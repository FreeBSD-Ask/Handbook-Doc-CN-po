# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2022-03-11 21:15+0800\n"
"PO-Revision-Date: 2022-04-04 21:08+0800\n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Poedit 3.0.1\n"

#. type: YAML Front Matter: description
#: content/zh-cn/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "This chapter explains much of the FreeBSD configuration process, including some of the parameters which can be set to tune a FreeBSD system."
msgstr "这一章解释了许多 FreeBSD 的配置过程，包括使用一些可以调整的参数来调整 FreeBSD 系统。"

#. type: YAML Front Matter: part
#: content/zh-cn/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr "第三部分 系统管理"

#. type: YAML Front Matter: title
#: content/zh-cn/books/handbook/config/_index.adoc:1
#, no-wrap
msgid "Chapter 12. Configuration and Tuning"
msgstr "第12章 设置和调整"

#. type: Title =
#: content/zh-cn/books/handbook/config/_index.adoc:14
#, no-wrap
msgid "Configuration and Tuning"
msgstr "第12章"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr "概述"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:56
msgid ""
"One of the important aspects of FreeBSD is proper system configuration.  This chapter explains much of the FreeBSD configuration process, "
"including some of the parameters which can be set to tune a FreeBSD system."
msgstr "玩转 FreeBSD 的一个重要方面就是进行正确的系统配置，这一章解释了许多 FreeBSD 的配置过程，包括使用一些可以调整的参数来调整 FreeBSD 系统。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:58
msgid "After reading this chapter, you will know:"
msgstr "读完本章后，你应该能知道："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:60
msgid "The basics of [.filename]#rc.conf# configuration and [.filename]#/usr/local/etc/rc.d# startup scripts."
msgstr "关于配置 [.filename]#rc.conf# 的基础内容以及启动脚本 [.filename]#/usr/local/etc/rc.d# 的基础配置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:61
msgid "How to configure and test a network card."
msgstr "如何配置并测试一张网卡。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:62
msgid "How to configure virtual hosts on network devices."
msgstr "如何配置在网络设备上配置虚拟主机。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:63
msgid "How to use the various configuration files in [.filename]#/etc#."
msgstr "如何在 [.filename]#/etc# 中使用多种配置文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:64
msgid "How to tune FreeBSD using man:sysctl[8] variables."
msgstr "如何用 man:sysctl[8] 变量来对 FreeBSD 进行调整。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:65
msgid "How to tune disk performance and modify kernel limitations."
msgstr "如何调整磁盘性能及修改内核限制。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:67
msgid "Before reading this chapter, you should:"
msgstr "在本章开始前，你应该："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:69
msgid "Understand UNIX(R) and FreeBSD basics (crossref:basics[basics,FreeBSD Basics])."
msgstr "理解 UNIX(R) 和 FreeBSD 的基础内容 （crossref:basics[basics,第 3 章 FREEBSD 基础]）"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:70
msgid "Be familiar with the basics of kernel configuration and compilation (crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel])."
msgstr "熟悉内核配置和编译的基础内容 （crossref:kernelconfig[kernelconfig,第 8 章 配置 FREEBSD 内核]）"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:72
#, no-wrap
msgid "Starting Services"
msgstr "启动服务"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:77
msgid ""
"Many users install third party software on FreeBSD from the Ports Collection and require the installed services to be started upon system "
"initialization.  Services, such as package:mail/postfix[] or package:www/apache22[] are just two of the many software packages which may be "
"started during system initialization.  This section explains the procedures available for starting third party software."
msgstr ""
"许多用户在 FreeBSD 上安装了来自 Ports Collection 的第三方软件，并要求在系统初始化时启动所安装的服务。诸如 package:mail/postfix[] 或"
" package:www/apache22[] 等服务只是众多可能在系统初始化时被启动的软件包中的两个。本节将解释如何自启动第三方软件。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:79
msgid "In FreeBSD, most included services, such as man:cron[8], are started through the system startup scripts."
msgstr "在 FreeBSD 中，大多数包含的服务，例如 man:cron[8] ，都是通过系统启动脚本启动的。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:80
#, no-wrap
msgid "Extended Application Configuration"
msgstr "扩展应用配置"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:85
msgid ""
"Now that FreeBSD includes [.filename]#rc.d#, configuration of application startup is easier and provides more features.  Using the key words "
"discussed in <<configtuning-rcd>>, applications can be set to start after certain other services and extra flags can be passed through [."
"filename]#/etc/rc.conf# in place of hard coded flags in the startup script.  A basic script may look similar to the following:"
msgstr ""
"现在 FreeBSD 包含了 [.filename]#rc.d#，使得应用程序的启动配置变得更加容易，并提供了更多的功能。通过使用本手册在《管理 FREEBSD 中的服务》 （参见："
"12.4. 管理 FREEBSD 中的服务）中包含的命令，应用程序可以被设置为在启动某些其他服务之后再启动，并且可以通过 [.filename]#/etc/rc.conf# 传递额外的标"
"志，以取代启动脚本中的硬编码标志。一个基本的启动脚本可能类似于以下内容："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:93
#, no-wrap
msgid ""
"#!/bin/sh\n"
"#\n"
"# PROVIDE: utility\n"
"# REQUIRE: DAEMON\n"
"# KEYWORD: shutdown\n"
msgstr ""
"#!/bin/sh\n"
"#\n"
"# PROVIDE: utility\n"
"# REQUIRE: DAEMON\n"
"# KEYWORD: shutdown\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:95
#, no-wrap
msgid ". /etc/rc.subr\n"
msgstr ". /etc/rc.subr\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:98
#, no-wrap
msgid ""
"name=utility\n"
"rcvar=utility_enable\n"
msgstr ""
"name=utility\n"
"rcvar=utility_enable\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:100
#, no-wrap
msgid "command=\"/usr/local/sbin/utility\"\n"
msgstr "command=\"/usr/local/sbin/utility\"\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:102
#, no-wrap
msgid "load_rc_config $name\n"
msgstr "load_rc_config $name\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:109
#, no-wrap
msgid ""
"#\n"
"# DO NOT CHANGE THESE DEFAULT VALUES HERE\n"
"# SET THEM IN THE /etc/rc.conf FILE\n"
"#\n"
"utility_enable=${utility_enable-\"NO\"}\n"
"pidfile=${utility_pidfile-\"/var/run/utility.pid\"}\n"
msgstr ""
"#\n"
"# DO NOT CHANGE THESE DEFAULT VALUES HERE\n"
"# SET THEM IN THE /etc/rc.conf FILE\n"
"#\n"
"utility_enable=${utility_enable-\"NO\"}\n"
"pidfile=${utility_pidfile-\"/var/run/utility.pid\"}\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:111
#, no-wrap
msgid "run_rc_command \"$1\"\n"
msgstr "run_rc_command \"$1\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:115
msgid ""
"This script will ensure that the provided `utility` will be started after the `DAEMON` pseudo-service.  It also provides a method for setting and "
"tracking the process ID (PID)."
msgstr "这个脚本将确保所提供的工具将在 `DAEMON` 伪服务之后启动，同时还提供了一种设置和追踪进程ID（PID）的方法。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:117
msgid "This application could then have the following line placed in [.filename]#/etc/rc.conf#:"
msgstr "然后，这个应用程序可以在 [.filename]#/etc/rc.conf# 中添加如下一行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:121
#, no-wrap
msgid "utility_enable=\"YES\"\n"
msgstr "utility_enable=\"YES\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:124
msgid ""
"This method allows for easier manipulation of command line arguments, inclusion of the default functions provided in [.filename]#/etc/rc.subr#, "
"compatibility with man:rcorder[8], and provides for easier configuration via [.filename]#rc.conf#."
msgstr ""
"通过这种方法能更容易地操作命令行参数、 [.filename]#/etc/rc.subr# 中默认函数的包含、与 man:rcorder[8] 的兼容，并且能通过 [.filename]#rc.conf# 来简"
"化配置。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:125
#, no-wrap
msgid "Using Services to Start Services"
msgstr "使用服务来启动服务"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:129
msgid ""
"Other services can be started using man:inetd[8].  Working with man:inetd[8] and its configuration is described in depth in crossref:network-"
"servers[network-inetd,“The inetd Super-Server”]."
msgstr ""
"其他服务可以使用 man:inetd[8] 来启动。man:inetd[8] 的工作及其配置在 crossref:network-servers[network-inetd, inetd Super-Server] 一节中有深入描述。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:133
msgid ""
"In some cases, it may make more sense to use man:cron[8] to start system services.  This approach has a number of advantages as man:cron[8] runs "
"these processes as the owner of the man:crontab[5].  This allows regular users to start and maintain their own applications."
msgstr ""
"在某些情况下，使用 man:cron[8] 来启动系统服务可能更有意义，这种方法有很多优点，因为 man:cron[8] 作为 man:crontab[5] 的所有者运行这些进程，这使得普"
"通用户可以启动和维护他们自己的应用程序。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:136
msgid ""
"The `@reboot` feature of man:cron[8], may be used in place of the time specification.  This causes the job to run when man:cron[8] is started, "
"normally during system initialization."
msgstr "man:cron[8] 的 `@reboot` 功能，可以用来代替时间规范，这可以使作业在 man:cron[8] 启动时运行，通常是在系统初始化期间。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:138
#, no-wrap
msgid "Configuring man:cron[8]"
msgstr "配置 man:cron[8]"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:144
msgid ""
"One of the most useful utilities in FreeBSD is cron.  This utility runs in the background and regularly checks [.filename]#/etc/crontab# for "
"tasks to execute and searches [.filename]#/var/cron/tabs# for custom crontab files.  These files are used to schedule tasks which cron runs at "
"the specified times.  Each entry in a crontab defines a task to run and is known as a _cron job_."
msgstr ""
"FreeBSD 中最有用的工具之一就是 cron。这个工具在后台运行，并定期检查 [.filename]#/etc/crontab# 中要执行的任务，并搜索 [.filename]#/var/cron/tabs# "
"中的自定义 crontab 文件。这些文件被用来安排 cron 在指定时间运行的任务。crontab 中的每个条目都定义了一个要运行的任务，被称为 _cron job_。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:150
msgid ""
"Two different types of configuration files are used: the system crontab, which should not be modified, and user crontabs, which can be created "
"and edited as needed.  The format used by these files is documented in man:crontab[5].  The format of the system crontab, [.filename]#/etc/"
"crontab# includes a `who` column which does not exist in user crontabs.  In the system crontab, cron runs the command as the user specified in "
"this column.  In a user crontab, all commands run as the user who created the crontab."
msgstr ""
"FreeBSD 使用了两种不同类型的配置文件：系统 crontab 和用户 crontab，其中前者不应该被修改，而后者可以根据需要创建和编辑, 这些文件使用的格式在 man:"
"crontab[5] 的手册中有记录。需要注意的是，系统 crontab 的格式，即 [.filename]#/etc/crontab# 包括的 `who` 列，在用户 crontabs 中不存在。在系统 "
"crontab 中，cron 以该列中指定的用户身份运行命令。在用户 crontab 中，所有命令都以创建 crontab 的用户的身份运行。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:153
msgid ""
"User crontabs allow individual users to schedule their own tasks.  The `root` user can also have a user [.filename]#crontab# which can be used to "
"schedule tasks that do not exist in the system [.filename]#crontab#."
msgstr ""
"用户 crontab 允许单个用户安排他们自己的任务，`root` 用户也可以有一个用户 [.filename]#crontab#，用来安排系统 [.filename]#crontab# 中不存在的任务。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:155
msgid "Here is a sample entry from the system crontab, [.filename]#/etc/crontab#:"
msgstr "如下是一个系统 crontab ，即 [.filename]#/etc/crontab# 的示例："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:168
#, no-wrap
msgid ""
"# /etc/crontab - root's crontab for FreeBSD\n"
"#\n"
"# $FreeBSD$\n"
"# <.>\n"
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <.>\n"
"#\n"
"#minute\thour\tmday\tmonth\twday\twho\tcommand <.>\n"
"#\n"
"*/5\t*\t*\t*\t*\troot\t/usr/libexec/atrun <.>\n"
msgstr ""
"# /etc/crontab - root's crontab for FreeBSD\n"
"#\n"
"# $FreeBSD$\n"
"# <.>\n"
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <.>\n"
"#\n"
"#minute\thour\tmday\tmonth\twday\twho\tcommand <.>\n"
"#\n"
"*/5\t*\t*\t*\t*\troot\t/usr/libexec/atrun <.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:171
msgid ""
"Lines that begin with the `#` character are comments. A comment can be placed in the file as a reminder of what and why a desired action is "
"performed. Comments cannot be on the same line as a command or else they will be interpreted as part of the command; they must be on a new line. "
"Blank lines are ignored."
msgstr ""
"以 `#` 开头的部分是注释，可以起到提醒的作用。注释不能和命令放在同一行，否则会被识别为是命令的一部分，因此注释必须另起一行。空行在执行过程中会被忽"
"略。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:173
msgid ""
"The equals (`=`) character is used to define any environment settings. In this example, it is used to define the `SHELL` and `PATH`. If the "
"`SHELL` is omitted, cron will use the default Bourne shell. If the `PATH` is omitted, the full path must be given to the command or script to run."
msgstr ""
"`=` 符号是被用来定义任何环境设置的。在这个实例中，它被用来定义 `SHELL` 和 `PATH` 。如果 `SHELL` 变量被忽略的话，cron 将会使用默认的 Bourne Shell；"
"如果 `PATH` 被忽略的话，当你运行某个程序或脚本时，将必须给定其完整路径。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:175
msgid ""
"This line defines the seven fields used in a system crontab: `minute`, `hour`, `mday`, `month`, `wday`, `who`, and `command`. The `minute` field "
"is the time in minutes when the specified command will be run, the `hour` is the hour when the specified command will be run, the `mday` is the "
"day of the month, `month` is the month, and `wday` is the day of the week. These fields must be numeric values, representing the twenty-four hour "
"clock, or a `*`, representing all values for that field. The `who` field only exists in the system crontab and specifies which user the command "
"should be run as. The last field is the command to be executed."
msgstr ""
"这一行定义了系统 crontab 所使用的七个字段（或参数）：`minute`、 `hour`、 `mday`、 `month`、`wday`、 `who` 和 `command`。其中，`minute` 字段运行指"
"定命令的时间（以分钟为单位），`hour` 是代表在一日中的第几个小时，`mday` 是指在一月中的某一日，`month` 是指月份， `wday` 则是指在一周中的哪一天。这"
"些字段的值必须是数字类型的，且使用 24 小时计时法。若使用 `*` 的话，则是指那个字段所包含的所有值，即对该字段下的条件不做限定。who` 字段仅在系统 "
"crontab 中使用，是用来指定运行该命令的用户的。最后一个字段的对应值是你想要运行的程序。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:177
msgid ""
"This entry defines the values for this cron job. The `\\*/5`, followed by several more `*` characters, specifies that `/usr/libexec/atrun` is "
"invoked by `root` every five minutes of every hour, of every day and day of the week, of every month.Commands can include any number of switches. "
"However, commands which extend to multiple lines need to be broken with the backslash \"\\\" continuation character."
msgstr ""
"这一行指定了这个 cron 任务的具体细节，即各个参数的对应值。比如， `\\*/5` ，以及它后面的那四个 `*` ，代表了这个由 `root` 用户执行的 `/usr/libexec/"
"atrun` 命令，需要在每一月、每一周的每一天内，每隔五分钟执行一次。命令可以包含任何数目的开关。扩展到多行的命令需要用反斜杠 \"\\\" 字符断开。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:179
#, no-wrap
msgid "Creating a User Crontab"
msgstr "创建一个用户级的 Crontab"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:182
msgid "To create a user crontab, invoke `crontab` in editor mode:"
msgstr "要创建一个用户 crontab，在编辑模式下调用 `crontab`："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:186
#, no-wrap
msgid "% crontab -e\n"
msgstr "% crontab -e\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:191
msgid ""
"This will open the user's crontab using the default text editor.  The first time a user runs this command, it will open an empty file.  Once a "
"user creates a crontab, this command will open that file for editing."
msgstr ""
"这将使用默认的文本编辑器打开用户的 crontab。用户第一次运行这个命令时，它将打开一个空文件，若用户曾经创建过一个 crontab，该命令将打开该文件进行编"
"辑。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:193
msgid ""
"It is useful to add these lines to the top of the crontab file in order to set the environment variables and to remember the meanings of the "
"fields in the crontab:"
msgstr "将这些行添加到 crontab 文件的顶部是很有用的，以便设置环境变量和记住 crontab 中各字段的含义："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:200
#, no-wrap
msgid ""
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin\n"
"# Order of crontab fields\n"
"# minute\thour\tmday\tmonth\twday\tcommand\n"
msgstr ""
"SHELL=/bin/sh\n"
"PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin\n"
"# Order of crontab fields\n"
"# minute\thour\tmday\tmonth\twday\tcommand\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:205
msgid ""
"Then add a line for each command or script to run, specifying the time to run the command.  This example runs the specified custom Bourne shell "
"script every day at two in the afternoon.  Since the path to the script is not specified in `PATH`, the full path to the script is given:"
msgstr ""
"然后为每个要运行的命令或脚本添加一行，并在此指定运行该命令的时间。这个例子是每天下午两点运行指定的自定义 Bourne shell 脚本。由于脚本的路径没有在 "
"`PATH` 中指定，所以我们给出了脚本的完整路径："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:209
#, no-wrap
msgid "0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr "0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:216
msgid ""
"Before using a custom script, make sure it is executable and test it with the limited set of environment variables set by cron.  To replicate the "
"environment that would be used to run the above cron entry, use:"
msgstr "在使用自定义脚本之前，请确保它是可执行的，并且用 cron 设置的有限环境变量集来测试它。要复制用于运行上述 cron 条目的环境，请使用："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:220
#, no-wrap
msgid "env -i SHELL=/bin/sh PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin HOME=/home/dru LOGNAME=dru /usr/home/dru/bin/mycustomscript.sh\n"
msgstr "env -i SHELL=/bin/sh PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin HOME=/home/dru LOGNAME=dru /usr/home/dru/bin/mycustomscript.sh\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:224
msgid ""
"The environment set by cron is discussed in man:crontab[5].  Checking that scripts operate correctly in a cron environment is especially "
"important if they include any commands that delete files using wildcards."
msgstr ""
"有关 cron 环境的设置可以在 man:crontab[5] 的手册中找到。如果脚本中包含任何使用通配符删除文件的命令，检查脚本是否在 cron 环境中正确运行就显得尤为重"
"要。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:229
msgid ""
"When finished editing the crontab, save the file.  It will automatically be installed and cron will read the crontab and run its cron jobs at "
"their specified times.  To list the cron jobs in a crontab, use this command:"
msgstr ""
"当完成编辑 crontab 后，保存该文件，之后它将被自动读取，cron 会读取 crontab 并在其指定的时间运行其 cron 作业。要列出 crontab 中的 cron 工作，使用这"
"个命令："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:234
#, no-wrap
msgid ""
"% crontab -l\n"
"0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"
msgstr ""
"% crontab -l\n"
"0\t14\t*\t*\t*\t/usr/home/dru/bin/mycustomscript.sh\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:237
msgid "To remove all of the cron jobs in a user crontab:"
msgstr "要删除这个用户 crontab 中的所有 cron 作业，使用这个命令："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:242
#, no-wrap
msgid ""
"% crontab -r\n"
"remove crontab for dru? y\n"
msgstr ""
"% crontab -r\n"
"remove crontab for dru? y\n"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:245
#, no-wrap
msgid "Managing Services in FreeBSD"
msgstr "管理 FreeBSD 中的服务"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:250
msgid ""
"FreeBSD uses the man:rc[8] system of startup scripts during system initialization and for managing services.  The scripts listed in [.filename]#/"
"etc/rc.d# provide basic services which can be controlled with the `start`, `stop`, and `restart` options to man:service[8].  For instance, man:"
"sshd[8] can be restarted with the following command:"
msgstr ""
"FreeBSD 在系统初始化和管理服务时使用 man:rc[8 系统的启动脚本。在 [.filename]#/etc/rc.d# 中列出的脚本提供了基本的服务，可以用 man:service[8] 的 "
"`start`、 `stop` 和 `restart` 选项来控制。例如，可以用下面的命令重启 man:sshd[8]:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:254
#, no-wrap
msgid "# service sshd restart\n"
msgstr "# service sshd restart\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:259
msgid ""
"This procedure can be used to start services on a running system.  Services will be started automatically at boot time as specified in man:rc."
"conf[5].  For example, to enable man:natd[8] at system startup, add the following line to [.filename]#/etc/rc.conf#:"
msgstr ""
"这个程序可以用来在一个运行中的系统上启动服务。服务将在启动时按照 man:rc.conf[5] 中的指定自动启动。例如，要在系统启动时启用 man:natd[8] ，"
"请在 [.filename]#/etc/rc.conf# 中添加以下一行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:263
#, no-wrap
msgid "natd_enable=\"YES\"\n"
msgstr "natd_enable=\"YES\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:267
msgid ""
"If a `natd_enable=\"NO\"` line is already present, change the `NO` to `YES`.  The man:rc[8] scripts will automatically load any dependent "
"services during the next boot, as described below."
msgstr "如果 `natd_enable=\"NO\"` 一行已经存在，请把 `NO` 改为 `YES`。man:rc[8] 脚本会在下一次启动时自动加载任何依赖的服务，如下所述。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:272
msgid ""
"Since the man:rc[8] system is primarily intended to start and stop services at system startup and shutdown time, the `start`, `stop` and "
"`restart` options will only perform their action if the appropriate [.filename]#/etc/rc.conf# variable is set.  For instance, `sshd restart` will "
"only work if `sshd_enable` is set to `YES` in [.filename]#/etc/rc.conf#.  To `start`, `stop` or `restart` a service regardless of the settings in "
"[.filename]#/etc/rc.conf#, these commands should be prefixed with \"one\".  For instance, to restart man:sshd[8] regardless of the current [."
"filename]#/etc/rc.conf# setting, execute the following command:"
msgstr ""
"由于 man:rc[8] 系统的主要目的是在系统启动和关闭时启动和停止服务，`start`、 `stop` 和 `restart` 选项只有在 [.filename]#/etc/rc.conf# 中的变量设置适"
"当时才会执行它们的操作。例如，只有在 [.filename]#/etc/rc.conf# 中把 `sshd_enable` 设置为 `YES` 时， `sshd restart` 才会生效。要 `start`、 `stop` "
"或 `restart` 一个服务，而不考虑 [.filename]#/etc/rc.conf# 中的设置，这些命令的前缀应该是 \"one\"。例如，要重启 man:sshd[8] 而不考虑当前"
" [.filename]#/etc/rc.conf# 的设置，执行以下命令:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:276
#, no-wrap
msgid "# service sshd onerestart\n"
msgstr "# service sshd onerestart\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:280
msgid ""
"To check if a service is enabled in [.filename]#/etc/rc.conf#, run the appropriate man:rc[8] script with `rcvar`.  This example checks to see if "
"man:sshd[8] is enabled in [.filename]#/etc/rc.conf#:"
msgstr ""
"为检查某个服务是否在 [.filename]#/etc/rc.conf# 中被启用，请用 `rcvar` 运行相应的 man:rc[8] 脚本。这个例子将检查 man:sshd[8] 是否在"
" [.filename]#/etc/rc.conf# 中被启用："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:288
#, no-wrap
msgid ""
"# service sshd rcvar\n"
"# sshd\n"
"#\n"
"sshd_enable=\"YES\"\n"
"#   (default: \"\")\n"
msgstr ""
"# service sshd rcvar\n"
"# sshd\n"
"#\n"
"sshd_enable=\"YES\"\n"
"#   (default: \"\")\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:293
msgid "The `# sshd` line is output from the above command, not a `root` console."
msgstr "`# sshd` 这一行是上面那个命令的输出，不是以 `root` 身份执行的命令"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:297
msgid "To determine whether or not a service is running, use `status`.  For instance, to verify that man:sshd[8] is running:"
msgstr "要确定一个服务是否在运行，使用 `status`。例如，要验证 man:sshd[8] 是否正在运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:302
#, no-wrap
msgid ""
"# service sshd status\n"
"sshd is running as pid 433.\n"
msgstr ""
"# service sshd status\n"
"sshd is running as pid 433.\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:308
msgid ""
"In some cases, it is also possible to `reload` a service.  This attempts to send a signal to an individual service, forcing the service to reload "
"its configuration files.  In most cases, this means sending the service a `SIGHUP` signal.  Support for this feature is not included for every "
"service."
msgstr ""
"在某些情况下，也有可能 `reload` 一个服务。他试图向一个单独的服务发送一个信号，迫使服务重新加载其配置文件。在大多数情况下，这意味着向该服务发送一"
"个 `SIGHUP` 信号。并非每个服务都支持这个功能。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:311
msgid ""
"The man:rc[8] system is used for network services and it also contributes to most of the system initialization.  For instance, when the [."
"filename]#/etc/rc.d/bgfsck# script is executed, it prints out the following message:"
msgstr "man:rc[8] 系统用于网络服务，它也为大部分的系统初始化做出了贡献。例如，当 [.filename]#/etc/rc.d/bgfsck# 脚本被执行时，它会打印出以下信息："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:315
#, no-wrap
msgid "Starting background file system checks in 60 seconds.\n"
msgstr "Starting background file system checks in 60 seconds.\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:318
msgid "This script is used for background file system checks, which occur only during system initialization."
msgstr "这个脚本被用来在系统初始化的时候在后台进行文件系统检测。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:323
msgid ""
"Many system services depend on other services to function properly.  For example, man:yp[8] and other RPC-based services may fail to start until "
"after the man:rpcbind[8] service has started.  To resolve this issue, information about dependencies and other meta-data is included in the "
"comments at the top of each startup script.  The man:rcorder[8] program is used to parse these comments during system initialization to determine "
"the order in which system services should be invoked to satisfy the dependencies."
msgstr ""
"许多系统服务依赖于其他服务才能正常运行。例如，man:yp[8] 和其它基于 RPC 的服务可能会在 man:rpcbind[8] 服务启动后才会启动。为了解决这个问题，关于依"
"赖关系和其他元数据的信息被包含在每个启动脚本顶部的注释中。man:rcorder[8] 程序被用来在系统初始化过程中解析这些注释，以确定系统服务应该被调用的顺"
"序，以满足依赖关系。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:325
msgid "The following key word must be included in all startup scripts as it is required by man:rc.subr[8] to \"enable\" the startup script:"
msgstr "所有的启动脚本都必须包含以下关键词，因为 man:rc.subr[8] 需要它来 \"启用\" 启动脚本："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:327
msgid "`PROVIDE`: Specifies the services this file provides."
msgstr "`PROVIDE`: 指定这个文件提供的服务"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:330
msgid ""
"The following key words may be included at the top of each startup script.  They are not strictly necessary, but are useful as hints to man:"
"rcorder[8]:"
msgstr "下列关键词可以放在每个启动脚本的顶部，他们并不是严格需要的，但是作为对 man:rcorder[8] 的提示来说是很有用的："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:332
msgid "`REQUIRE`: Lists services which are required for this service. The script containing this key word will run _after_ the specified services."
msgstr "`REQUIRE` : 列出此服务所需的服务，包含这个关键词的脚本将在指定的服务 _之后_ 运行。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:333
msgid "`BEFORE`: Lists services which depend on this service. The script containing this key word will run _before_ the specified services."
msgstr "`BEFORE`: 列出依赖这个的服务，包含这个关键词的脚本将在指定服务 _之前_ 运行。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:335
msgid ""
"By carefully setting these keywords for each startup script, an administrator has a fine-grained level of control of the startup order of the "
"scripts, without the need for \"runlevels\" used by some UNIX(R) operating systems."
msgstr "通过为每个启动脚本仔细设置这些关键字，管理员可以对脚本的启动顺序进行精细的控制，而不需要某些 UNIX(R) 操作系统所使用的“运行级别”。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:338
msgid ""
"Additional information can be found in man:rc[8] and man:rc.subr[8].  Refer to extref:{rc-scripting}[this article] for instructions on how to "
"create custom man:rc[8] scripts."
msgstr ""
"其他信息可以在 man:rc[8] 和 man:rc.subr[8] 的用户手册中中找到。关于创建自定义 man:rc[8] 脚本的说明，请参考 extref:{rc-scripting}[this article]。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:340
#, no-wrap
msgid "Managing System-Specific Configuration"
msgstr "管理特定的系统配置"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:345
msgid ""
"The principal location for system configuration information is [.filename]#/etc/rc.conf#.  This file contains a wide range of configuration "
"information and it is read at system startup to configure the system.  It provides the configuration information for the [.filename]#rc*# files."
msgstr ""
"系统配置信息的主要位置是 [.filename]#/etc/rc.conf#。该文件包含广泛的配置信息，在系统启动时被读取以配置系统，它提供了 [.filename]#rc*# 文件的配置信"
"息。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:349
msgid ""
"The entries in [.filename]#/etc/rc.conf# override the default settings in [.filename]#/etc/defaults/rc.conf#.  The file containing the default "
"settings should not be edited.  Instead, all system-specific changes should be made to [.filename]#/etc/rc.conf#."
msgstr ""
"[.filename]#/etc/rc.conf# 中的条目覆盖了 [.filename]#/etc/defaults/rc.conf# 中的默认设置。包含默认设置的文件不应该被编辑。相反，所有针对系统的修改"
"都应该在 [.filename]#/etc/rc.conf# 中进行。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:353
msgid ""
"A number of strategies may be applied in clustered applications to separate site-wide configuration from system-specific configuration in order "
"to reduce administration overhead.  The recommended approach is to place system-specific configuration into [.filename]#/etc/rc.conf.local#.  For "
"example, these entries in [.filename]#/etc/rc.conf# apply to all systems:"
msgstr ""
"在集群应用中可以采用一些策略，将整个站点的配置与系统特定的配置分开，以减少管理开销。推荐的方法是将系统特定的配置放入 [.filename]#/etc/rc.conf.local#。"
"例如，[.filename]#/etc/rc.conf# 中的这些条目适用于所有系统："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:359
#, no-wrap
msgid ""
"sshd_enable=\"YES\"\n"
"keyrate=\"fast\"\n"
"defaultrouter=\"10.1.1.254\"\n"
msgstr ""
"sshd_enable=\"YES\"\n"
"keyrate=\"fast\"\n"
"defaultrouter=\"10.1.1.254\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:362
msgid "Whereas these entries in [.filename]#/etc/rc.conf.local# apply to this system only:"
msgstr "而 [.filename]#/etc/rc.conf.local# 中的这些条目只适用于这个系统："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:367
#, no-wrap
msgid ""
"hostname=\"node1.example.org\"\n"
"ifconfig_fxp0=\"inet 10.1.1.1/8\"\n"
msgstr ""
"hostname=\"node1.example.org\"\n"
"ifconfig_fxp0=\"inet 10.1.1.1/8\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:370
msgid ""
"Distribute [.filename]#/etc/rc.conf# to every system using an application such as rsync or puppet, while [.filename]#/etc/rc.conf.local# remains "
"unique."
msgstr "使用 rsync 或 puppet 等应用程序将 [.filename]#/etc/rc.conf# 分发到每个系统，而使 [.filename]#/etc/rc.conf.local# 保持唯一。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:372
msgid "Upgrading the system will not overwrite [.filename]#/etc/rc.conf#, so system configuration information will not be lost."
msgstr "升级系统不会覆盖 [.filename]#/etc/rc.conf#，所以系统配置信息不会丢失。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:379
msgid ""
"Both [.filename]#/etc/rc.conf# and [.filename]#/etc/rc.conf.local# are parsed by man:sh[1].  This allows system operators to create complex "
"configuration scenarios.  Refer to man:rc.conf[5] for further information on this topic."
msgstr ""
"[.filename]#/etc/rc.conf# 和 [.filename]#/etc/rc.conf.local# 都是由 man:sh[1] 解析的，这使得系统操作者可以创建复杂的配置方案。参考 man:rc.conf[5] "
"的命令手册来了解更多关于这个的信息。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:382
#, no-wrap
msgid "Setting Up Network Interface Cards"
msgstr "设置网卡"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:385
msgid "Adding and configuring a network interface card (NIC) is a common task for any FreeBSD administrator."
msgstr "添加和配置网卡（NIC）是所有 FreeBSD 管理员的常规任务。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:386
#, no-wrap
msgid "Locating the Correct Driver"
msgstr "找到合适的驱动"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:391
msgid ""
"First, determine the model of the NIC and the chip it uses.  FreeBSD supports a wide variety of NICs.  Check the Hardware Compatibility List for "
"the FreeBSD release to see if the NIC is supported."
msgstr "首先，确定网卡的型号及其使用的芯片。FreeBSD 支持多种类型的网卡，检查 FreeBSD 发行版的硬件兼容列表，看是否支持该 NIC。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:395
msgid ""
"If the NIC is supported, determine the name of the FreeBSD driver for the NIC.  Refer to [.filename]#/usr/src/sys/conf/NOTES# and [.filename]#/"
"usr/src/sys/arch/conf/NOTES# for the list of NIC drivers with some information about the supported chipsets.  When in doubt, read the manual page "
"of the driver as it will provide more information about the supported hardware and any known limitations of the driver."
msgstr ""
"如果支持 NIC，请确定该 NIC 的 FreeBSD 驱动程序的名称。参考 [.filename]#/usr/src/sys/conf/NOTES# 和 [.filename]#/usr/src/sys/arch/conf/NOTES#，了解"
"带有支持的芯片组的一些信息的 NIC 驱动程序列表。如果有疑问，请阅读驱动程序的手册页，因为它将提供更多关于支持的硬件和关于这个驱动程序的已知限制。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:399
msgid ""
"The drivers for common NICs are already present in the [.filename]#GENERIC# kernel, meaning the NIC should be probed during boot.  The system's "
"boot messages can be viewed by typing `more /var/run/dmesg.boot` and using the spacebar to scroll through the text.  In this example, two "
"Ethernet NICs using the man:dc[4] driver are present on the system:"
msgstr ""
"普通网卡的驱动程序已经存在于 [.filename]#GENERIC# 内核中，这意味着网卡应该在启动时被探测到。系统的启动信息可以通过输入更多的 `more /var/run/dmesg.boot` "
"并使用空格键滚动浏览文本来查看。在这个例子中，系统上有两个使用 man:dc[4] 驱动的以太网网卡："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:416
#, no-wrap
msgid ""
"dc0: <82c169 PNIC 10/100BaseTX> port 0xa000-0xa0ff mem 0xd3800000-0xd38\n"
"000ff irq 15 at device 11.0 on pci0\n"
"miibus0: <MII bus> on dc0\n"
"bmtphy0: <BCM5201 10/100baseTX PHY> PHY 1 on miibus0\n"
"bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc0: Ethernet address: 00:a0:cc:da:da:da\n"
"dc0: [ITHREAD]\n"
"dc1: <82c169 PNIC 10/100BaseTX> port 0x9800-0x98ff mem 0xd3000000-0xd30\n"
"000ff irq 11 at device 12.0 on pci0\n"
"miibus1: <MII bus> on dc1\n"
"bmtphy1: <BCM5201 10/100baseTX PHY> PHY 1 on miibus1\n"
"bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc1: Ethernet address: 00:a0:cc:da:da:db\n"
"dc1: [ITHREAD]\n"
msgstr ""
"dc0: <82c169 PNIC 10/100BaseTX> port 0xa000-0xa0ff mem 0xd3800000-0xd38\n"
"000ff irq 15 at device 11.0 on pci0\n"
"miibus0: <MII bus> on dc0\n"
"bmtphy0: <BCM5201 10/100baseTX PHY> PHY 1 on miibus0\n"
"bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc0: Ethernet address: 00:a0:cc:da:da:da\n"
"dc0: [ITHREAD]\n"
"dc1: <82c169 PNIC 10/100BaseTX> port 0x9800-0x98ff mem 0xd3000000-0xd30\n"
"000ff irq 11 at device 12.0 on pci0\n"
"miibus1: <MII bus> on dc1\n"
"bmtphy1: <BCM5201 10/100baseTX PHY> PHY 1 on miibus1\n"
"bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto\n"
"dc1: Ethernet address: 00:a0:cc:da:da:db\n"
"dc1: [ITHREAD]\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:420
msgid ""
"If the driver for the NIC is not present in [.filename]#GENERIC#, but a driver is available, the driver will need to be loaded before the NIC can "
"be configured and used.  This may be accomplished in one of two ways:"
msgstr ""
"如果 [.filename]#GENERIC# 中没有 NIC 的驱动程序，但你手头有一个可用的驱动程序，则需要在配置和使用 NIC 之前加载该驱动程序。这可以通过以下两种方式之"
"一来实现："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:422
msgid ""
"The easiest way is to load a kernel module for the NIC using man:kldload[8]. To also automatically load the driver at boot time, add the "
"appropriate line to [.filename]#/boot/loader.conf#. Not all NIC drivers are available as modules."
msgstr ""
"最简单的方法是使用 man:kldload[8] 为网卡加载一个内核模块。要想在启动时自动加载驱动程序，可以在 [.filename]#/boot/loader.conf# 中添加相应的行。并非"
"所有的网卡驱动都可以作为模块使用。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:423
msgid ""
"Alternatively, statically compile support for the NIC into a custom kernel. Refer to [.filename]#/usr/src/sys/conf/NOTES#, [.filename]#/usr/src/"
"sys/arch/conf/NOTES# and the manual page of the driver to determine which line to add to the custom kernel configuration file. For more "
"information about recompiling the kernel, refer to crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel]. If the NIC was detected at "
"boot, the kernel does not need to be recompiled."
msgstr ""
"或者，将网卡驱动静态地编译到自定义内核中。参考 [.filename]#/usr/src/sys/conf/NOTES# , [.filename]#/usr/src/sys/arch/conf/NOTES# 和驱动程序的手册页"
"面，以确定在自定义内核配置文件中加入哪一行。更多关于重新编译内核的信息，请参考 crossref:kernelconfig[kernelconfig,配置 FREEBSD 内核]。如果能在启动"
"时检测到 NIC，则不需要重新编译内核。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:425
#, no-wrap
msgid "Using Windows(R) NDIS Drivers"
msgstr "使用 Windows(R) NDIS 驱动"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:429
msgid ""
"Unfortunately, there are still many vendors that do not provide schematics for their drivers to the open source community because they regard "
"such information as trade secrets.  Consequently, the developers of FreeBSD and other operating systems are left with two choices: develop the "
"drivers by a long and pain-staking process of reverse engineering or using the existing driver binaries available for Microsoft(R) Windows(R) "
"platforms."
msgstr ""
"不幸的是，仍然有许多供应商不向开源社区提供他们的驱动程序的源代码，因为他们把这些信息视为商业机密。因此，FreeBSD 和其他操作系统的开发者只能有两个选"
"择：通过漫长而艰苦的逆向工程来开发驱动程序，或者使用现有的用于 Microsoft(R) Windows(R) 平台的驱动程序二进制文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:434
msgid ""
"FreeBSD provides \"native\" support for the Network Driver Interface Specification (NDIS).  It includes man:ndisgen[8] which can be used to "
"convert a Windows(R) XP driver into a format that can be used on FreeBSD.  As the man:ndis[4] driver uses a Windows(R) XP binary, it only runs on "
"i386(TM) and amd64 systems.  PCI, CardBus, PCMCIA, and USB devices are supported."
msgstr ""
"FreeBSD 提供了对网络驱动接口规范（NDIS）的 \"本地\" 支持。它包括 man:ndisgen[8]，可以用来将 Windows(R) XP 驱动转换为可以在 FreeBSD 上使用的格式。由"
"于 man:ndis[4] 驱动程序使用的是 Windows(R) XP 二进制文件，它只能在 i386(TM) 和 amd64 系统上运行，支持 PCI、CardBus、PCMCIA 和 USB 设备。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:436
msgid "To use man:ndisgen[8], three things are needed:"
msgstr "要使用 man:ndisgen[8], 需要以下准备："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:438
msgid "FreeBSD kernel sources."
msgstr "FreeBSD 的内核源码"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:439
msgid "A Windows(R) XP driver binary with a [.filename]#.SYS# extension."
msgstr "一个带有 [.filename]#.SYS# 后缀的 Windows(R) XP 驱动程序"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:440
msgid "A Windows(R) XP driver configuration file with a [.filename]#.INF# extension."
msgstr "一个带有 [.filename]#.INF# 后缀的 Windows(R) XP 驱动配置文件"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:444
msgid ""
"Download the [.filename]#.SYS# and [.filename]#.INF# files for the specific NIC.  Generally, these can be found on the driver CD or at the "
"vendor's website.  The following examples use [.filename]#W32DRIVER.SYS# and [.filename]#W32DRIVER.INF#."
msgstr ""
"你可以为你的 NIC 网卡下载这些 [.filename]#.SYS# 和 [.filename]#.INF# 文件，这些一般能在驱动的光盘里或者提供商的网站上找到。接下来的例子我们将使用 "
"[.filename]#W32DRIVER.SYS# 和 [.filename]#W32DRIVER.INF# 。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:448
msgid ""
"The driver bit width must match the version of FreeBSD.  For FreeBSD/i386, use a Windows(R) 32-bit driver.  For FreeBSD/amd64, a Windows(R) 64-"
"bit driver is needed."
msgstr ""
"驱动程序的位宽必须与 FreeBSD 的版本相匹配。对于 FreeBSD/i386，需要使用 Windows(R) 32位驱动；对于 FreeBSD/amd64，需要使用 Windows(R) 64位驱动。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:451
msgid "The next step is to compile the driver binary into a loadable kernel module.  As `root`, use man:ndisgen[8]:"
msgstr "下一步是将驱动的二进制文件编译成可加载的内核模块。作为 `root`，使用 man:ndisgen[8]"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:455
#, no-wrap
msgid "# ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS\n"
msgstr "# ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:460
msgid ""
"This command is interactive and prompts for any extra information it requires.  A new kernel module will be generated in the current directory.  "
"Use man:kldload[8] to load the new module:"
msgstr "这个命令是交互式的，并提示它需要的任何额外信息。之后，一个新的内核模块将在当前目录下生成，使用 man:kldload[8] 来加载新模块："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:464
#, no-wrap
msgid "# kldload ./W32DRIVER_SYS.ko\n"
msgstr "# kldload ./W32DRIVER_SYS.ko\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:469
msgid ""
"In addition to the generated kernel module, the [.filename]#ndis.ko# and [.filename]#if_ndis.ko# modules must be loaded.  This should happen "
"automatically when any module that depends on man:ndis[4] is loaded.  If not, load them manually, using the following commands:"
msgstr ""
"除了生成的内核模块外，[.filename]#ndis.ko# 和 [.filename]#if_ndis.ko# 模块还必须被加载。当任何依赖 man:ndis[4] 的模块被加载时，这个会自动执行。如"
"果没有，请使用下列命令手动加载它们："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:474
#, no-wrap
msgid ""
"# kldload ndis\n"
"# kldload if_ndis\n"
msgstr ""
"# kldload ndis\n"
"# kldload if_ndis\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:477
msgid "The first command loads the man:ndis[4] miniport driver wrapper and the second loads the generated NIC driver."
msgstr "其中，第一条命令加载 man:ndis[4] miniport 驱动包装器，第二条命令加载生成的网卡驱动。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:480
msgid "Check man:dmesg[8] to see if there were any load errors.  If all went well, the output should be similar to the following:"
msgstr "检查 man:dmesg[8]，看看是否有任何加载错误。如果一切顺利，输出应该与下面类似："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:488
#, no-wrap
msgid ""
"ndis0: <Wireless-G PCI Adapter> mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1\n"
"ndis0: NDIS API version: 5.0\n"
"ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5\n"
"ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps\n"
"ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps\n"
msgstr ""
"ndis0: <Wireless-G PCI Adapter> mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1\n"
"ndis0: NDIS API version: 5.0\n"
"ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5\n"
"ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps\n"
"ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:491
msgid "From here, [.filename]#ndis0# can be configured like any other NIC."
msgstr "在这里，[.filename]#ndis0# 可以像其他网卡一样进行配置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:494
msgid ""
"To configure the system to load the man:ndis[4] modules at boot time, copy the generated module, [.filename]#W32DRIVER_SYS.ko#, to [.filename]#/"
"boot/modules#.  Then, add the following line to [.filename]#/boot/loader.conf#:"
msgstr ""
"要配置系统在启动时加载 man:ndis[4] 模块，将生成的模块 [.filename]#W32DRIVER_SYS.ko# 复制到 [.filename]#/boot/modules#。然后，"
"在 [.filename]#/boot/loader.conf# 中添加以下一行。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:498
#, no-wrap
msgid "W32DRIVER_SYS_load=\"YES\"\n"
msgstr "W32DRIVER_SYS_load=\"YES\"\n"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:500
#, no-wrap
msgid "Configuring the Network Card"
msgstr "配置网卡"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:504
msgid ""
"Once the right driver is loaded for the NIC, the card needs to be configured.  It may have been configured at installation time by man:"
"bsdinstall[8]."
msgstr "如果为网卡加载了正确的驱动程序，就需要对网卡进行配置。在安装时，可能已经通过 man:bsdinstall[8] 进行了配置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:506
msgid "To display the NIC configuration, enter the following command:"
msgstr "要显示 NIC 配置，请输入以下命令："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:528
#, no-wrap
msgid ""
"% ifconfig\n"
"dc0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:da\n"
"        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255\n"
"        media: Ethernet autoselect (100baseTX <full-duplex>)\n"
"        status: active\n"
"dc1: flags=8802<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:db\n"
"        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet 10baseT/UTP\n"
"        status: no carrier\n"
"lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384\n"
"        options=3<RXCSUM,TXCSUM>\n"
"        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4\n"
"        inet6 ::1 prefixlen 128\n"
"        inet 127.0.0.1 netmask 0xff000000\n"
"        nd6 options=3<PERFORMNUD,ACCEPT_RTADV>\n"
msgstr ""
"% ifconfig\n"
"dc0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:da\n"
"        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255\n"
"        media: Ethernet autoselect (100baseTX <full-duplex>)\n"
"        status: active\n"
"dc1: flags=8802<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"        options=80008<VLAN_MTU,LINKSTATE>\n"
"        ether 00:a0:cc:da:da:db\n"
"        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255\n"
"        media: Ethernet 10baseT/UTP\n"
"        status: no carrier\n"
"lo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> metric 0 mtu 16384\n"
"        options=3<RXCSUM,TXCSUM>\n"
"        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4\n"
"        inet6 ::1 prefixlen 128\n"
"        inet 127.0.0.1 netmask 0xff000000\n"
"        nd6 options=3<PERFORMNUD,ACCEPT_RTADV>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:531
msgid "In this example, the following devices were displayed:"
msgstr "在这个例子中，以下设备被显示出来："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:533
msgid "[.filename]#dc0#: The first Ethernet interface."
msgstr "[.filename]#dc0#: 第一个以太网口"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:534
msgid "[.filename]#dc1#: The second Ethernet interface."
msgstr "[.filename]#dc1#: 第二个以太网口"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:535
msgid "[.filename]#lo0#: The loopback device."
msgstr "[.filename]#lo0#: 回环设备"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:538
msgid ""
"FreeBSD uses the driver name followed by the order in which the card is detected at boot to name the NIC.  For example, [.filename]#sis2# is the "
"third NIC on the system using the man:sis[4] driver."
msgstr "FreeBSD 使用驱动程序的名称和启动时检测到的网卡的顺序来命名网卡。例如，[.filename]#sis2# 是系统中使用 man:sis[4] 驱动程序的第三块网卡。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:541
msgid "In this example, [.filename]#dc0# is up and running.  The key indicators are:"
msgstr "在这个例子中，[.filename]#dc0# 已经启动并运行，关键指标为："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:543
msgid "`UP` means that the card is configured and ready."
msgstr "`UP` 表示网卡已经被配置好了并且能使用"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:544
msgid "The card has an Internet (`inet`) address, `192.168.1.3`."
msgstr "这张网卡有一个网络 ( `inet` ) 地址，是 `192.168.1.3`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:545
msgid "It has a valid subnet mask (`netmask`), where `0xffffff00` is the same as `255.255.255.0`."
msgstr "这个有一个合法的子网掩码，其中 `0xffffff00` 与 `255.255.255.0` 相同"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:546
msgid "It has a valid broadcast address, `192.168.1.255`."
msgstr "它有一个合法的广播地址：`192.168.1.255`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:547
msgid "The MAC address of the card (`ether`) is `00:a0:cc:da:da:da`."
msgstr "这个网卡（ `ether` ）的 MAC 地址是： `00:a0:cc:da:da:da`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:548
msgid ""
"The physical media selection is on autoselection mode (`media: Ethernet autoselect (100baseTX <full-duplex>)`). In this example, [.filename]#dc1# "
"is configured to run with `10baseT/UTP` media. For more information on available media types for a driver, refer to its manual page."
msgstr ""
"物理媒介的选择方式是自动选择模式 (`media: Ethernet autoselect (100baseTX <full-duplex>)`)。在这个例子中，[.filename]#dc1# 是被配置来和"
" `10baseT/UTP` 运行的。更多关于可用的媒介的驱动，请到它的手册页面上去寻找。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:549
msgid ""
"The status of the link (`status`) is `active`, indicating that the carrier signal is detected. For [.filename]#dc1#, the `status: no carrier` "
"status is normal when an Ethernet cable is not plugged into the card."
msgstr ""
"链路的状态（`status`）是 `active` 的，表明检测到了载波信号。对于 [.filename]#dc1#，当以太网电缆没有插入卡中时，将显示：`status: no carrier`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:551
msgid "If the man:ifconfig[8] output had shown something similar to:"
msgstr "如果 ifconfig(8) 的输出是像这样的："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:559
#, no-wrap
msgid ""
"dc0: flags=8843<BROADCAST,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"\toptions=80008<VLAN_MTU,LINKSTATE>\n"
"\tether 00:a0:cc:da:da:da\n"
"\tmedia: Ethernet autoselect (100baseTX <full-duplex>)\n"
"\tstatus: active\n"
msgstr ""
"dc0: flags=8843<BROADCAST,SIMPLEX,MULTICAST> metric 0 mtu 1500\n"
"\toptions=80008<VLAN_MTU,LINKSTATE>\n"
"\tether 00:a0:cc:da:da:da\n"
"\tmedia: Ethernet autoselect (100baseTX <full-duplex>)\n"
"\tstatus: active\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:562
msgid "it would indicate the card has not been configured."
msgstr "这表明该卡还没有被配置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:566
msgid ""
"The card must be configured as `root`.  The NIC configuration can be performed from the command line with man:ifconfig[8] but will not persist "
"after a reboot unless the configuration is also added to [.filename]#/etc/rc.conf#.  If a DHCP server is present on the LAN, just add this line:"
msgstr ""
"该卡必须以 `root` 身份进行配置。网卡配置可以在命令行中用 man:ifconfig[8] 执行，但在重启后将不会持续，除非配置也被添加到 [.filename]#/etc/rc.conf# "
"中。如果局域网上有 DHCP 服务器，只需添加这一行即可："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:570
#, no-wrap
msgid "ifconfig_dc0=\"DHCP\"\n"
msgstr "ifconfig_dc0=\"DHCP\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:573
msgid "Replace _dc0_ with the correct value for the system."
msgstr "请用系统的正确值替换 _dc0_。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:575
msgid "The line added, then, follow the instructions given in <<config-network-testing>>."
msgstr "添加这一行后，按照《12.5.3. 测试和故障排除》中的说明进行操作。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:580
msgid ""
"If the network was configured during installation, some entries for the NIC(s) may be already present.  Double check [.filename]#/etc/rc.conf# "
"before adding any lines."
msgstr "如果网络在安装过程中就配置了，NIC 的一些条目就可能已经存在。在对 [.filename]#/etc/rc.conf# 进行任何添加前，请仔细检查。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:584
msgid "If there is no DHCP server, the NIC(s) must be configured manually.  Add a line for each NIC present on the system, as seen in this example:"
msgstr "如果没有 DHCP 服务器，则必须手动配置 NIC。如本例所示，为系统中的每个 NIC 添加一行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:589
#, no-wrap
msgid ""
"ifconfig_dc0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_dc1=\"inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP\"\n"
msgstr ""
"ifconfig_dc0=\"inet 192.168.1.3 netmask 255.255.255.0\"\n"
"ifconfig_dc1=\"inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:593
msgid ""
"Replace [.filename]#dc0# and [.filename]#dc1# and the IP address information with the correct values for the system.  Refer to the man page for "
"the driver, man:ifconfig[8], and man:rc.conf[5] for more details about the allowed options and the syntax of [.filename]#/etc/rc.conf#."
msgstr ""
"用系统的正确值替换 [.filename]#dc0# 和 [.filename]#dc1# 以及 IP 地址信息。关于允许的选项和 [.filename]#/etc/rc.conf# 的语法的更多细节，请参考驱动"
"程序、man:ifconfig[8] 和 man:rc.conf[5] 的手册页面。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:596
msgid ""
"If the network is not using DNS, edit [.filename]#/etc/hosts# to add the names and IP addresses of the hosts on the LAN, if they are not already "
"there.  For more information, refer to man:hosts[5] and to [.filename]#/usr/share/examples/etc/hosts#."
msgstr ""
"如果网络没有使用 DNS，请编辑 [.filename]#/etc/hosts#，如果局域网上的主机配置还没有在那里的话，添加它们的主机名称和 IP 地址。欲了解更多信息，请参"
"考 man:hosts[5] 的手册页面和 [.filename]#/usr/share/examples/etc/hosts#。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:600
msgid "If there is no DHCP server and access to the Internet is needed, manually configure the default gateway and the nameserver:"
msgstr "如果没有 DHCP 服务器，且需要访问互联网，请手动配置默认的 gateway 和 nameserver ："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:605
#, no-wrap
msgid ""
"# sysrc defaultrouter=\"your_default_router\"\n"
"# echo 'nameserver your_DNS_server' >> /etc/resolv.conf\n"
msgstr ""
"# sysrc defaultrouter=\"your_default_router\"\n"
"# echo 'nameserver your_DNS_server' >> /etc/resolv.conf\n"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:610
#, no-wrap
msgid "Testing and Troubleshooting"
msgstr "测试和故障排除"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:614
msgid ""
"Once the necessary changes to [.filename]#/etc/rc.conf# are saved, a reboot can be used to test the network configuration and to verify that the "
"system restarts without any configuration errors.  Alternatively, apply the settings to the networking system with this command:"
msgstr ""
"一旦保存了对 [.filename]#/etc/rc.conf# 的必要更改，就可以使用重新启动来测试网络配置，并验证系统重新启动时没有出现任何配置错误。或者，通过下面的命"
"令将这些设置应用到网络系统:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:618
#, no-wrap
msgid "# service netif restart\n"
msgstr "# service netif restart\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:623
msgid "If a default gateway has been set in [.filename]#/etc/rc.conf#, also issue this command:"
msgstr "如果在 [.filename]#/etc/rc.conf# 中设置了默认网关，也可以执行以下命令:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:627
#, no-wrap
msgid "# service routing restart\n"
msgstr "# service routing restart\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:632
msgid "Once the networking system has been relaunched, test the NICs."
msgstr "重新启动网络系统后，测试网卡。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:633
#, no-wrap
msgid "Testing the Ethernet Card"
msgstr "测试以太网卡"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:636
msgid "To verify that an Ethernet card is configured correctly, man:ping[8] the interface itself, and then man:ping[8] another machine on the LAN:"
msgstr "为了验证以太网卡的配置是否正确，先 man:ping[8] 接口本身，然后再 man:ping[8] 局域网上的另一台机器。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:646
#, no-wrap
msgid ""
"% ping -c5 192.168.1.3\n"
"PING 192.168.1.3 (192.168.1.3): 56 data bytes\n"
"64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms\n"
msgstr ""
"% ping -c5 192.168.1.3\n"
"PING 192.168.1.3 (192.168.1.3): 56 data bytes\n"
"64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms\n"
"64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:650
#, no-wrap
msgid ""
"--- 192.168.1.3 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms\n"
msgstr ""
"--- 192.168.1.3 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:661
#, no-wrap
msgid ""
"% ping -c5 192.168.1.2\n"
"PING 192.168.1.2 (192.168.1.2): 56 data bytes\n"
"64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms\n"
msgstr ""
"% ping -c5 192.168.1.2\n"
"PING 192.168.1.2 (192.168.1.2): 56 data bytes\n"
"64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms\n"
"64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:665
#, no-wrap
msgid ""
"--- 192.168.1.2 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms\n"
msgstr ""
"--- 192.168.1.2 ping statistics ---\n"
"5 packets transmitted, 5 packets received, 0% packet loss\n"
"round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:671
msgid ""
"To test network resolution, use the host name instead of the IP address.  If there is no DNS server on the network, [.filename]#/etc/hosts# must "
"first be configured.  To this purpose, edit [.filename]#/etc/hosts# to add the names and IP addresses of the hosts on the LAN, if they are not "
"already there.  For more information, refer to man:hosts[5] and to [.filename]#/usr/share/examples/etc/hosts#."
msgstr ""
"要测试网络分辨率 ( network resolution )，使用主机名而不是 IP 地址。如果网络上没有 DNS 服务器，必须首先配置 [.filename]#/etc/hosts#。为此，"
"编辑 [.filename]#/etc/hosts#，添加局域网上主机的名称和 IP 地址，如果它们还没有在那里。欲了解更多信息，请参考 man:hosts[5] 和 "
"[.filename]#/usr/share/examples/etc/hosts# 。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:672
#, no-wrap
msgid "Troubleshooting"
msgstr "故障排除"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:676
msgid ""
"When troubleshooting hardware and software configurations, check the simple things first.  Is the network cable plugged in? Are the network "
"services properly configured? Is the firewall configured correctly? Is the NIC supported by FreeBSD? Before sending a bug report, always check "
"the Hardware Notes, update the version of FreeBSD to the latest STABLE version, check the mailing list archives, and search the Internet."
msgstr ""
"在排除硬件和软件配置的故障时，请首先检查简单的东西。网线是否插好了？网络服务的配置是否正确？防火墙的配置是否正确？这个网卡是否被 FreeBSD 支持？在"
"发送错误报告之前，一定要检查硬件说明，将 FreeBSD 的版本更新到最新的 STABLE 版本，然后检查邮件列表的存档，并在互联网上搜索。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:679
msgid ""
"If the card works, yet performance is poor, read through man:tuning[7].  Also, check the network configuration as incorrect network settings can "
"cause slow connections."
msgstr "如果网卡可以工作，但性能却很差，请阅读 man:tuning[7] 的手册。另外，检查网络配置，因为不正确的网络设置也会导致连接缓慢。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:684
msgid ""
"Some users experience one or two `device timeout` messages, which is normal for some cards.  If they continue, or are bothersome, determine if "
"the device is conflicting with another device.  Double check the cable connections.  Consider trying another card."
msgstr ""
"有些用户遇到一两个设备超时 （ `device timeout` ）的信息，这对某些卡来说是正常的。如果它们继续存在，或令人烦恼，请确定该设备是否与其他设备冲突，仔"
"细检查电缆的连接，并考虑尝试另一块卡。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:689
msgid ""
"To resolve `watchdog timeout` errors, first check the network cable.  Many cards require a PCI slot which supports bus mastering.  On some old "
"motherboards, only one PCI slot allows it, usually slot 0.  Check the NIC and the motherboard documentation to determine if that may be the "
"problem."
msgstr ""
"要解决看门狗超时（ `watchdog timeout` ）错误，首先检查网线。许多卡需要一个支持总线主控的 PCI 插槽。在一些旧主板上，只有一个 PCI 插槽允许，通常是 "
"0 号插槽。检查网卡和主板文档，以确定这是否可能是问题所在。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:694
msgid ""
"`No route to host` messages occur if the system is unable to route a packet to the destination host.  This can happen if no default route is "
"specified or if a cable is unplugged.  Check the output of `netstat -rn` and make sure there is a valid route to the host.  If there is not, read "
"crossref:advanced-networking[network-routing,“Gateways and Routes”]."
msgstr ""
"如果系统无法将数据包路由到目标主机，就会出现没有路由到主机（ `No route to host` ）的信息。如果没有指定默认路由或拔掉电缆，就会发生这种情况。检查 "
"`netstat -rn` 的输出，确保有一个到主机的有效路由。如果没有，请阅读 crossref:advanced-networking[network-routing,网关和路由]。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:698
msgid ""
"`ping: sendto: Permission denied` error messages are often caused by a misconfigured firewall.  If a firewall is enabled on FreeBSD but no rules "
"have been defined, the default policy is to deny all traffic, even man:ping[8].  Refer to crossref:firewalls[firewalls,Firewalls] for more "
"information."
msgstr ""
"`ping: sendto: Permission denied` 的错误信息通常是由防火墙的配置错误引起的。如果在 FreeBSD 上启用了防火墙，但没有定义规则，那默认策略是拒绝所有流"
"量，甚至是对于 man:ping[8] 。更多信息请参考 crossref:firewalls[firewalls, 防火墙]。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:703
msgid ""
"Sometimes performance of the card is poor or below average.  In these cases, try setting the media selection mode from `autoselect` to the "
"correct media selection.  While this works for most hardware, it may or may not resolve the issue.  Again, check all the network settings, and "
"refer to man:tuning[7]."
msgstr ""
"有时卡的性能很差或低于平均水平。在这些情况下，尝试将媒体选择模式从自动选择（`autoselect`）设置为正确的媒体选择。虽然这对大多数硬件有效，但它也可能"
"没法解决这个问题。同样，检查所有的网络设置，并参考 man:tuning[7] 的用户手册。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:705
#, no-wrap
msgid "Virtual Hosts"
msgstr "虚拟主机"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:709
msgid ""
"A common use of FreeBSD is virtual site hosting, where one server appears to the network as many servers.  This is achieved by assigning multiple "
"network addresses to a single interface."
msgstr "FreeBSD 的一个常见用途是虚拟网站托管，即一个服务器在网络上看起来像许多服务器。这可以通过给一个接口分配多个网络地址来实现。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:712
msgid ""
"A given network interface has one \"real\" address, and may have any number of \"alias\" addresses.  These aliases are normally added by placing "
"alias entries in [.filename]#/etc/rc.conf#, as seen in this example:"
msgstr ""
"一个给定的网络接口有一个 \"真实\" 地址，并且可以有任意数量的 \"别名\" 地址。这些别名通常是通过在 [.filename]#/etc/rc.conf# 中放置别名条目来添加"
"的，如本例所示："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:716
#, no-wrap
msgid "ifconfig_fxp0_alias0=\"inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx\"\n"
msgstr "ifconfig_fxp0_alias0=\"inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:720
msgid ""
"Alias entries must start with `alias__0__` using a sequential number such as `alias0`, `alias1`, and so on.  The configuration process will stop "
"at the first missing number."
msgstr "别名条目必须从 `alias__0__` 开始，使用一个连续的数字，如 `alias0`、 `alias1`，等等。配置过程将在第一个缺失的数字处停止。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:724
msgid ""
"The calculation of alias netmasks is important.  For a given interface, there must be one address which correctly represents the network's "
"netmask.  Any other addresses which fall within this network must have a netmask of all ``1``s, expressed as either `255.255.255.255` or "
"`0xffffffff`."
msgstr ""
"别名网络掩码的计算很重要。对于一个给定的接口，必须有一个正确代表网络掩码的地址。任何属于这个网络的其他地址必须有一个全部为 ``1`` 的网络掩码，表示"
"为 `255.255.255.255` 或 `0xffffffff`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:729
msgid ""
"For example, consider the case where the [.filename]#fxp0# interface is connected to two networks: `10.1.1.0` with a netmask of `255.255.255.0` "
"and `202.0.75.16` with a netmask of `255.255.255.240`.  The system is to be configured to appear in the ranges `10.1.1.1` through `10.1.1.5` and "
"`202.0.75.17` through `202.0.75.20`.  Only the first address in a given network range should have a real netmask.  All the rest (`10.1.1.2` "
"through `10.1.1.5` and `202.0.75.18` through `202.0.75.20`) must be configured with a netmask of `255.255.255.255`."
msgstr ""
"例如，考虑 [.filename]#fxp0# 接口连接到两个网络的情况： `10.1.1.0` ，网络掩码为 `255.255.255.0`；`202.0.75.16`，网络掩码为 `255.255.255.240`。系统"
"将被配置为出现在 `10.1.1.1` 至 `10.1.1.5` 和 `202.0.75.17` 至 `202.0.75.20` 范围内。在一个给定的网络范围内只有第一个地址应该有一个真正的网络掩码。"
"其余的（`10.1.1.2` 到 `10.1.1.5` 和 `202.0.75.18` 到 `202.0.75.20` ）必须配置 `255.255.255.255` 的净掩码。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:731
msgid "The following [.filename]#/etc/rc.conf# entries configure the adapter correctly for this scenario:"
msgstr "下面的 [.filename]#/etc/rc.conf# 条目为这种情况正确配置了适配器:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:743
#, no-wrap
msgid ""
"ifconfig_fxp0=\"inet 10.1.1.1 netmask 255.255.255.0\"\n"
"ifconfig_fxp0_alias0=\"inet 10.1.1.2 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias1=\"inet 10.1.1.3 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias2=\"inet 10.1.1.4 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias3=\"inet 10.1.1.5 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias4=\"inet 202.0.75.17 netmask 255.255.255.240\"\n"
"ifconfig_fxp0_alias5=\"inet 202.0.75.18 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias6=\"inet 202.0.75.19 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias7=\"inet 202.0.75.20 netmask 255.255.255.255\"\n"
msgstr ""
"ifconfig_fxp0=\"inet 10.1.1.1 netmask 255.255.255.0\"\n"
"ifconfig_fxp0_alias0=\"inet 10.1.1.2 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias1=\"inet 10.1.1.3 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias2=\"inet 10.1.1.4 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias3=\"inet 10.1.1.5 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias4=\"inet 202.0.75.17 netmask 255.255.255.240\"\n"
"ifconfig_fxp0_alias5=\"inet 202.0.75.18 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias6=\"inet 202.0.75.19 netmask 255.255.255.255\"\n"
"ifconfig_fxp0_alias7=\"inet 202.0.75.20 netmask 255.255.255.255\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:747
msgid ""
"A simpler way to express this is with a space-separated list of IP address ranges.  The first address will be given the indicated subnet mask and "
"the additional addresses will have a subnet mask of `255.255.255.255`."
msgstr "一个更简单的表达方式是用一个空格分隔的 IP 地址范围列表。第一个地址将被赋予指定的子网掩码，其他地址的子网掩码为 `255.255.255.255`。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:751
#, no-wrap
msgid "ifconfig_fxp0_aliases=\"inet 10.1.1.1-5/24 inet 202.0.75.17-20/28\"\n"
msgstr "ifconfig_fxp0_aliases=\"inet 10.1.1.1-5/24 inet 202.0.75.17-20/28\"\n"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:754
#, no-wrap
msgid "Configuring System Logging"
msgstr "配置系统日志"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:760
msgid ""
"Generating and reading system logs is an important aspect of system administration.  The information in system logs can be used to detect "
"hardware and software issues as well as application and system configuration errors.  This information also plays an important role in security "
"auditing and incident response.  Most system daemons and applications will generate log entries."
msgstr ""
"生成和阅读系统日志是系统管理的一个重要内容。系统日志中的信息可以用来检测硬件和软件问题，以及应用程序和系统配置错误。这些信息在安全审计和事件响应中"
"也起着重要作用。大多数系统守护程序和应用程序都会产生日志。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:766
msgid ""
"FreeBSD provides a system logger, syslogd, to manage logging.  By default, syslogd is started when the system boots.  This is controlled by the "
"variable `syslogd_enable` in [.filename]#/etc/rc.conf#.  There are numerous application arguments that can be set using `syslogd_flags` in [."
"filename]#/etc/rc.conf#.  Refer to man:syslogd[8] for more information on the available arguments."
msgstr ""
"FreeBSD 提供了一个系统日志记录器 syslogd 来管理日志记录。默认情况下，syslogd 在系统启动时被启动。这是由 [.filename]#/etc/rc.conf# 中的变量 "
"`syslogd_enable` 控制的。有许多应用参数可以使用 [.filename]#/etc/rc.conf# 中的 `syslogd_flags` 来设置。关于可用参数的更多信息，"
"请参考 man:syslogd[8] 的手册页面。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:768
msgid ""
"This section describes how to configure the FreeBSD system logger for both local and remote logging and how to perform log rotation and log "
"management."
msgstr "这一节描述了如何为本地和远程 FreeBSD 系统配置日志，以及如何进行日志轮换和日志管理。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:769
#, no-wrap
msgid "Configuring Local Logging"
msgstr "配置本地日志"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:776
msgid ""
"The configuration file, [.filename]#/etc/syslog.conf#, controls what syslogd does with log entries as they are received.  There are several "
"parameters to control the handling of incoming events.  The _facility_ describes which subsystem generated the message, such as the kernel or a "
"daemon, and the _level_ describes the severity of the event that occurred.  This makes it possible to configure if and where a log message is "
"logged, depending on the facility and level.  It is also possible to take action depending on the application that sent the message, and in the "
"case of remote logging, the hostname of the machine generating the logging event."
msgstr ""
"配置文件 [.filename]#/etc/syslog.conf#，可控制 syslogd 在收到日志条目时的处理方式。有几个参数可以控制对传入事件的处理。设施描述了哪个子系统产生了"
"消息，如内核或守护进程，级别描述了所发生事件的严重程度。这使得我们可以根据设施和级别来配置是否和在哪里记录日志信息。也可以根据发送消息的应用程序采"
"取相应的行动，在远程日志的情况下，还可以根据产生日志事件的机器的主机名采取行动。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:784
msgid ""
"This configuration file contains one line per action, where the syntax for each line is a selector field followed by an action field.  The syntax "
"of the selector field is _facility.level_ which will match log messages from _facility_ at level _level_ or higher.  It is also possible to add "
"an optional comparison flag before the level to specify more precisely what is logged.  Multiple selector fields can be used for the same action, "
"and are separated with a semicolon (`;`).  Using `*` will match everything.  The action field denotes where to send the log message, such as to a "
"file or remote log host.  As an example, here is the default [.filename]#syslog.conf# from FreeBSD:"
msgstr ""
"这个配置文件包含每个行动的一行，每一行的语法是一个选择器字段，然后是一个行动字段。选择器字段的语法是 facility.level，它将匹配来自 level 级别或更高"
"的设施的日志信息。也可以在级别前添加一个可选的比较标志，以更精确地指定记录的内容。多个选择器字段可以用于同一个动作，并以分号（`;`）分开。使用 `*` "
"将匹配所有的内容。动作字段表示要将日志信息发送到哪里，比如发送到文件或远程日志主机。作为一个例子，这里是 FreeBSD 的默认 [.filename]#syslog.conf#："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:822
#, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#       Spaces ARE valid field separators in this file. However,\n"
"#       other *nix-like systems still insist on using tabs as field\n"
"#       separators. If you are sharing this file between systems, you\n"
"#       may want to use only tabs as field separators here.\n"
"#       Consult the syslog.conf(5) manpage.\n"
"*.err;kern.warning;auth.notice;mail.crit                /dev/console\n"
"*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/messages\n"
"security.*                                      /var/log/security\n"
"auth.info;authpriv.info                         /var/log/auth.log\n"
"mail.info                                       /var/log/maillog\n"
"lpr.info                                        /var/log/lpd-errs\n"
"ftp.info                                        /var/log/xferlog\n"
"cron.*                                          /var/log/cron\n"
"!-devd\n"
"*.=debug                                        /var/log/debug.log\n"
"*.emerg                                         *\n"
"# uncomment this to log all writes to /dev/console to /var/log/console.log\n"
"#console.info                                   /var/log/console.log\n"
"# uncomment this to enable logging of all log messages to /var/log/all.log\n"
"# touch /var/log/all.log and chmod it to mode 600 before it will work\n"
"#*.*                                            /var/log/all.log\n"
"# uncomment this to enable logging to a remote loghost named loghost\n"
"#*.*                                            @loghost\n"
"# uncomment these if you're running inn\n"
"# news.crit                                     /var/log/news/news.crit\n"
"# news.err                                      /var/log/news/news.err\n"
"# news.notice                                   /var/log/news/news.notice\n"
"# Uncomment this if you wish to see messages produced by devd\n"
"# !devd\n"
"# *.>=info\n"
"!ppp\n"
"*.*                                             /var/log/ppp.log\n"
"!*\n"
msgstr ""
"# $FreeBSD$\n"
"#\n"
"#       Spaces ARE valid field separators in this file. However,\n"
"#       other *nix-like systems still insist on using tabs as field\n"
"#       separators. If you are sharing this file between systems, you\n"
"#       may want to use only tabs as field separators here.\n"
"#       Consult the syslog.conf(5) manpage.\n"
"*.err;kern.warning;auth.notice;mail.crit                /dev/console\n"
"*.notice;authpriv.none;kern.debug;lpr.info;mail.crit;news.err   /var/log/messages\n"
"security.*                                      /var/log/security\n"
"auth.info;authpriv.info                         /var/log/auth.log\n"
"mail.info                                       /var/log/maillog\n"
"lpr.info                                        /var/log/lpd-errs\n"
"ftp.info                                        /var/log/xferlog\n"
"cron.*                                          /var/log/cron\n"
"!-devd\n"
"*.=debug                                        /var/log/debug.log\n"
"*.emerg                                         *\n"
"# uncomment this to log all writes to /dev/console to /var/log/console.log\n"
"#console.info                                   /var/log/console.log\n"
"# uncomment this to enable logging of all log messages to /var/log/all.log\n"
"# touch /var/log/all.log and chmod it to mode 600 before it will work\n"
"#*.*                                            /var/log/all.log\n"
"# uncomment this to enable logging to a remote loghost named loghost\n"
"#*.*                                            @loghost\n"
"# uncomment these if you're running inn\n"
"# news.crit                                     /var/log/news/news.crit\n"
"# news.err                                      /var/log/news/news.err\n"
"# news.notice                                   /var/log/news/news.notice\n"
"# Uncomment this if you wish to see messages produced by devd\n"
"# !devd\n"
"# *.>=info\n"
"!ppp\n"
"*.*                                             /var/log/ppp.log\n"
"!*\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:825
msgid "In this example:"
msgstr "在这个例子中："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:827
msgid ""
"Line 8 matches all messages with a level of `err` or higher, as well as `kern.warning`, `auth.notice` and `mail.crit`, and sends these log "
"messages to the console ([.filename]#/dev/console#)."
msgstr ""
"第8行匹配所有级别为 `err` 或更高的消息，以及 `kern.warning` 、`auth.notice` 和 `mail.crit`，并将这些日志消息发送到控制台"
"（[.filename]#/dev/console# ）。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:828
msgid "Line 12 matches all messages from the `mail` facility at level `info` or above and logs the messages to [.filename]#/var/log/maillog#."
msgstr "第12行匹配来自邮件设施的所有信息，级别为 `info` 或以上，并将这些信息记录到 [.filename]#/var/log/maillog#。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:829
msgid "Line 17 uses a comparison flag (`=`) to only match messages at level `debug` and logs them to [.filename]#/var/log/debug.log#."
msgstr "第17行使用一个比较标志（`=`），只匹配 `debug` 级别的消息，并将它们记录到 [.filename]#/var/log/debug.log# 。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:830
msgid ""
"Line 33 is an example usage of a program specification. This makes the rules following it only valid for the specified program. In this case, "
"only the messages generated by ppp are logged to [.filename]#/var/log/ppp.log#."
msgstr ""
"第 33 行是一个使用程序规范的例子。这使得它后面的规则只对指定的程序有效。在这种情况下，只有 ppp 产生的消息被记录到 [.filename]#/var/log/ppp.log# 中。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:832
msgid "The available levels, in order from most to least critical are `emerg`, `alert`, `crit`, `err`, `warning`, `notice`, `info`, and `debug`."
msgstr "可用的级别中，从最严重到最不严重的顺序是：`emerg`、 `alert`、 `crit`、 `err`、 `warning`、 `notice`、 `info` 和 `debug`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:835
msgid ""
"The facilities, in no particular order, are `auth`, `authpriv`, `console`, `cron`, `daemon`, `ftp`, `kern`, `lpr`, `mail`, `mark`, `news`, "
"`security`, `syslog`, `user`, `uucp`, and `local0` through `local7`.  Be aware that other operating systems might have different facilities."
msgstr ""
"设施（facilities），没有特别的顺序，是 `auth`、 `authpriv`、 `console`、 `cron`、 `daemon`、 `ftp`、`kern`、 `lpr`、 `mail`、 `mark`、 `news`、 "
"`security`、 `syslog`、 `user`、 `uucp` 和 `local0` 到 `local7`。请注意，其他操作系统可能有不同的设施。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:837
msgid "To log everything of level `notice` and higher to [.filename]#/var/log/daemon.log#, add the following entry:"
msgstr "要把所有通知级别及以上的内容记录到 [.filename]#/var/log/daemon.log#，请添加以下条目："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:841
#, no-wrap
msgid "daemon.notice                                        /var/log/daemon.log\n"
msgstr "daemon.notice                                        /var/log/daemon.log\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:845
msgid ""
"For more information about the different levels and facilities, refer to man:syslog[3] and man:syslogd[8].  For more information about [."
"filename]#/etc/syslog.conf#, its syntax, and more advanced usage examples, see man:syslog.conf[5]."
msgstr ""
"更多关于不同级别和设施的信息，请参考 man:syslog[3] 和 man:syslogd[8] 的命令手册。更多关于 [.filename]#/etc/syslog.conf# 的信息、语法和高级使用示"
"例，请参见 man:syslog.conf[5] 的命令手册。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:846
#, no-wrap
msgid "Log Management and Rotation"
msgstr "日志管理和轮换"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:855
msgid ""
"Log files can grow quickly, taking up disk space and making it more difficult to locate useful information.  Log management attempts to mitigate "
"this.  In FreeBSD, newsyslog is used to manage log files.  This built-in program periodically rotates and compresses log files, and optionally "
"creates missing log files and signals programs when log files are moved.  The log files may be generated by syslogd or by any other program which "
"generates log files.  While newsyslog is normally run from man:cron[8], it is not a system daemon.  In the default configuration, it runs every "
"hour."
msgstr ""
"日志文件会迅速增长，占用磁盘空间，使查找有用信息更加困难。日志管理试图缓解这种情况。在 FreeBSD 中，newsyslog 被用来管理日志文件。这个内置的程序周"
"期性地旋转和压缩日志文件，并且可以选择创建缺失的日志文件，在日志文件被移动时向程序发出信号。日志文件可以由 syslogd 或任何其他生成日志文件的程序生"
"成。虽然 newsyslog 通常从 man:cron[8] 运行，但它不是一个系统守护程序。在默认配置中，它每小时运行一次。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:860
msgid ""
"To know which actions to take, newsyslog reads its configuration file, [.filename]#/etc/newsyslog.conf#.  This file contains one line for each "
"log file that newsyslog manages.  Each line states the file owner, permissions, when to rotate that file, optional flags that affect log "
"rotation, such as compression, and programs to signal when the log is rotated.  Here is the default configuration in FreeBSD:"
msgstr ""
"为了知道要采取哪些行动，newsyslog 会读取其配置文件 [.filename]#/etc/newsyslog.conf#。该文件为 newsyslog 管理的每个日志文件包含一行。每一行都说明了"
"文件的所有者、权限、何时轮换该文件、影响日志轮换的可选标志（如压缩）以及日志轮换时的信号程序。下面是 FreeBSD 中的默认配置:"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:902
#, no-wrap
msgid ""
"# configuration file for newsyslog\n"
"# $FreeBSD$\n"
"#\n"
"# Entries which do not specify the '/pid_file' field will cause the\n"
"# syslogd process to be signalled when that log file is rotated.  This\n"
"# action is only appropriate for log files which are written to by the\n"
"# syslogd process (ie, files listed in /etc/syslog.conf).  If there\n"
"# is no process which needs to be signalled when a given log file is\n"
"# rotated, then the entry for that file should include the 'N' flag.\n"
"#\n"
"# The 'flags' field is one or more of the letters: BCDGJNUXZ or a '-'.\n"
"#\n"
"# Note: some sites will want to select more restrictive protections than the\n"
"# defaults.  In particular, it may be desirable to switch many of the 644\n"
"# entries to 640 or 600.  For example, some sites will consider the\n"
"# contents of maillog, messages, and lpd-errs to be confidential.  In the\n"
"# future, these defaults may change to more conservative ones.\n"
"#\n"
"# logfilename          [owner:group]    mode count size when  flags [/pid_file] [sig_num]\n"
"/var/log/all.log                        600  7     *    @T00  J\n"
"/var/log/amd.log                        644  7     100  *     J\n"
"/var/log/auth.log                       600  7     100  @0101T JC\n"
"/var/log/console.log                    600  5     100  *     J\n"
"/var/log/cron                           600  3     100  *     JC\n"
"/var/log/daily.log                      640  7     *    @T00  JN\n"
"/var/log/debug.log                      600  7     100  *     JC\n"
"/var/log/kerberos.log                   600  7     100  *     J\n"
"/var/log/lpd-errs                       644  7     100  *     JC\n"
"/var/log/maillog                        640  7     *    @T00  JC\n"
"/var/log/messages                       644  5     100  @0101T JC\n"
"/var/log/monthly.log                    640  12    *    $M1D0 JN\n"
"/var/log/pflog                          600  3     100  *     JB    /var/run/pflogd.pid\n"
"/var/log/ppp.log        root:network    640  3     100  *     JC\n"
"/var/log/devd.log                       644  3     100  *     JC\n"
"/var/log/security                       600  10    100  *     JC\n"
"/var/log/sendmail.st                    640  10    *    168   B\n"
"/var/log/utx.log                        644  3     *    @01T05 B\n"
"/var/log/weekly.log                     640  5     1    $W6D0 JN\n"
"/var/log/xferlog                        600  7     100  *     JC\n"
msgstr ""
"# configuration file for newsyslog\n"
"# $FreeBSD$\n"
"#\n"
"# Entries which do not specify the '/pid_file' field will cause the\n"
"# syslogd process to be signalled when that log file is rotated.  This\n"
"# action is only appropriate for log files which are written to by the\n"
"# syslogd process (ie, files listed in /etc/syslog.conf).  If there\n"
"# is no process which needs to be signalled when a given log file is\n"
"# rotated, then the entry for that file should include the 'N' flag.\n"
"#\n"
"# The 'flags' field is one or more of the letters: BCDGJNUXZ or a '-'.\n"
"#\n"
"# Note: some sites will want to select more restrictive protections than the\n"
"# defaults.  In particular, it may be desirable to switch many of the 644\n"
"# entries to 640 or 600.  For example, some sites will consider the\n"
"# contents of maillog, messages, and lpd-errs to be confidential.  In the\n"
"# future, these defaults may change to more conservative ones.\n"
"#\n"
"# logfilename          [owner:group]    mode count size when  flags [/pid_file] [sig_num]\n"
"/var/log/all.log                        600  7     *    @T00  J\n"
"/var/log/amd.log                        644  7     100  *     J\n"
"/var/log/auth.log                       600  7     100  @0101T JC\n"
"/var/log/console.log                    600  5     100  *     J\n"
"/var/log/cron                           600  3     100  *     JC\n"
"/var/log/daily.log                      640  7     *    @T00  JN\n"
"/var/log/debug.log                      600  7     100  *     JC\n"
"/var/log/kerberos.log                   600  7     100  *     J\n"
"/var/log/lpd-errs                       644  7     100  *     JC\n"
"/var/log/maillog                        640  7     *    @T00  JC\n"
"/var/log/messages                       644  5     100  @0101T JC\n"
"/var/log/monthly.log                    640  12    *    $M1D0 JN\n"
"/var/log/pflog                          600  3     100  *     JB    /var/run/pflogd.pid\n"
"/var/log/ppp.log        root:network    640  3     100  *     JC\n"
"/var/log/devd.log                       644  3     100  *     JC\n"
"/var/log/security                       600  10    100  *     JC\n"
"/var/log/sendmail.st                    640  10    *    168   B\n"
"/var/log/utx.log                        644  3     *    @01T05 B\n"
"/var/log/weekly.log                     640  5     1    $W6D0 JN\n"
"/var/log/xferlog                        600  7     100  *     JC\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:911
msgid ""
"Each line starts with the name of the log to be rotated, optionally followed by an owner and group for both rotated and newly created files.  The "
"`mode` field sets the permissions on the log file and `count` denotes how many rotated log files should be kept.  The `size` and `when` fields "
"tell newsyslog when to rotate the file.  A log file is rotated when either its size is larger than the `size` field or when the time in the "
"`when` field has passed.  An asterisk (`*`) means that this field is ignored.  The _flags_ field gives further instructions, such as how to "
"compress the rotated file or to create the log file if it is missing.  The last two fields are optional and specify the name of the Process ID "
"(PID) file of a process and a signal number to send to that process when the file is rotated."
msgstr ""
"每一行都以要轮换的日志名称开始，后面可以选择轮换的和新创建的文件的所有者和组。`mode` 字段设置日志文件的权限，`count` 表示应该保留多少个轮换的日志"
"文件。`size` 和 `when` 字段告诉 newsyslog 何时轮换文件。当一个日志文件的大小大于 `size` 字段或 `when` 字段中的时间已过，它就会被轮换。一个星号"
"（`*`）意味着这个字段被忽略。标志字段给出了进一步的指示，比如如何压缩旋转的文件，或者在缺少日志文件的情况下如何创建。最后两个字段是可选的，指定一"
"个进程的进程 ID（ PID）文件的名称，以及当文件被旋转时要发送给该进程的信号号。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:914
msgid ""
"For more information on all fields, valid flags, and how to specify the rotation time, refer to man:newsyslog.conf[5].  Since newsyslog is run "
"from man:cron[8], it cannot rotate files more often than it is scheduled to run from man:cron[8]."
msgstr ""
"关于所有字段、有效标志以及如何指定轮换时间的更多信息，请参考 man:newsyslog.conf[5]。由于 newsyslog 是从 man:cron[8] 中运行的，"
"它不能比从 man:cron[8] 中运行的计划更频繁地轮换文件。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:916
#, no-wrap
msgid "Configuring Remote Logging"
msgstr "配置远程日志"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:920
msgid ""
"Monitoring the log files of multiple hosts can become unwieldy as the number of systems increases.  Configuring centralized logging can reduce "
"some of the administrative burden of log file administration."
msgstr "随着系统数量的增加，监控多个主机的日志文件可能会变得很麻烦。配置集中式日志可以减少日志文件管理的一些管理负担。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:924
msgid ""
"In FreeBSD, centralized log file aggregation, merging, and rotation can be configured using syslogd and newsyslog.  This section demonstrates an "
"example configuration, where host `A`, named `logserv.example.com`, will collect logging information for the local network.  Host `B`, named "
"`logclient.example.com`, will be configured to pass logging information to the logging server."
msgstr ""
"在 FreeBSD 中，可以使用 syslogd 和 newsyslog 来配置集中的日志文件聚合、合并和旋转。本节演示了一个配置的例子，主机 `A`，名为 `logserv.example.com`，"
"将收集本地网络的日志信息。主机 `B`，名为 `logclient.example.com`，将被配置为将日志信息传递给日志服务器。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:925
#, no-wrap
msgid "Log Server Configuration"
msgstr "日志服务器的配置"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:929
msgid ""
"A log server is a system that has been configured to accept logging information from other hosts.  Before configuring a log server, check the "
"following:"
msgstr "日志服务器是一个已被配置为接受来自其他主机的日志信息的系统。在配置日志服务器之前，请检查以下内容。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:931
msgid ""
"If there is a firewall between the logging server and any logging clients, ensure that the firewall ruleset allows UDP port 514 for both the "
"clients and the server."
msgstr "如果在日志服务器和任何日志客户端之间有防火墙，确保防火墙规则集允许客户端和服务器使用UDP 514 端口。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:932
msgid ""
"The logging server and all client machines must have forward and reverse entries in the local DNS. If the network does not have a DNS server, "
"create entries in each system's [.filename]#/etc/hosts#. Proper name resolution is required so that log entries are not rejected by the logging "
"server."
msgstr ""
"记录服务器和所有客户机必须在本地 DNS 中拥有正向和反向条目。如果网络没有 DNS 服务器，请在每个系统的 [.filename]#/etc/hosts# 中创建条目。正确的名称"
"解析是必需的，这样日志条目才不会被日志服务器拒绝。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:935
msgid ""
"On the log server, edit [.filename]#/etc/syslog.conf# to specify the name of the client to receive log entries from, the logging facility to be "
"used, and the name of the log to store the host's log entries.  This example adds the hostname of `B`, logs all facilities, and stores the log "
"entries in [.filename]#/var/log/logclient.log#."
msgstr ""
"在日志服务器上，编辑 [.filename]#/etc/syslog.conf# 以指定接收日志条目的客户端名称、要使用的日志设施、以及存储主机日志条目的日志名称。这个例子添加"
"了B的主机名，记录了所有设施，并将日志条目存储在 [.filename]#/var/log/logclient.log# 中。"

#. type: Block title
#: content/zh-cn/books/handbook/config/_index.adoc:936
#, no-wrap
msgid "Sample Log Server Configuration"
msgstr "日志服务器配置的样例"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:944
#, no-wrap
msgid ""
"+logclient.example.com\n"
"*.*     /var/log/logclient.log\n"
msgstr ""
"+logclient.example.com\n"
"*.*     /var/log/logclient.log\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:950
msgid ""
"When adding multiple log clients, add a similar two-line entry for each client.  More information about the available facilities may be found in "
"man:syslog.conf[5]."
msgstr "当添加多个日志客户端时，为每个客户端添加一个类似的双行条目。关于可用设施的更多信息可以在 man:syslog.conf[5] 中找到。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:952
msgid "Next, configure [.filename]#/etc/rc.conf#:"
msgstr "接下来配置 [.filename]#/etc/rc.conf# ："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:957
#, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-a logclient.example.com -v -v\"\n"
msgstr ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-a logclient.example.com -v -v\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:963
msgid ""
"The first entry starts syslogd at system boot.  The second entry allows log entries from the specified client.  The `-v -v` increases the "
"verbosity of logged messages.  This is useful for tweaking facilities as administrators are able to see what type of messages are being logged "
"under each facility."
msgstr ""
"第一个条目是在系统启动时启动 syslogd。第二个条目允许来自指定客户端的日志条目。`-v -v` 增加了记录的消息的粗略程度。这对于调整设施是很有用的，因为管"
"理员能够看到每个设施下记录的消息的类型。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:967
msgid ""
"Multiple `-a` options may be specified to allow logging from multiple clients.  IP addresses and whole netblocks may also be specified.  Refer to "
"man:syslogd[8] for a full list of possible options."
msgstr "可以指定多个 `-a` 选项以允许从多个客户端记录。IP 地址和整个网块也可以被指定。请参考 man:syslogd[8] 以获得可能的选项的完整列表。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:969
msgid "Finally, create the log file:"
msgstr "最后，创建日志文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:973
#, no-wrap
msgid "# touch /var/log/logclient.log\n"
msgstr "# touch /var/log/logclient.log\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:976
msgid "At this point, syslogd should be restarted and verified:"
msgstr "在这一点上，应该重新启动 syslogd 并进行验证："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:981
#, no-wrap
msgid ""
"# service syslogd restart\n"
"# pgrep syslog\n"
msgstr ""
"# service syslogd restart\n"
"# pgrep syslog\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:985
msgid ""
"If a PID is returned, the server restarted successfully, and client configuration can begin.  If the server did not restart, consult [.filename]#/"
"var/log/messages# for the error."
msgstr "如果返回一个 PID，说明服务器重启成功，可以开始客户端配置。如果服务器没有重启，请查阅 [.filename]#/var/log/messages# 中的错误。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:986
#, no-wrap
msgid "Log Client Configuration"
msgstr "日志客户端的配置"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:990
msgid "A logging client sends log entries to a logging server on the network.  The client also keeps a local copy of its own logs."
msgstr "日志客户端将日志条目发送到网络上的一个日志服务器。客户端还保留一份自己的日志的本地副本。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:992
msgid "Once a logging server has been configured, edit [.filename]#/etc/rc.conf# on the logging client:"
msgstr "配置了一个日志服务器后，就可以在日志客户端上编辑 [.filename]#/etc/rc.conf#："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:997
#, no-wrap
msgid ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-s -v -v\"\n"
msgstr ""
"syslogd_enable=\"YES\"\n"
"syslogd_flags=\"-s -v -v\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1001
msgid ""
"The first entry enables syslogd on boot up.  The second entry prevents logs from being accepted by this client from other hosts (`-s`) and "
"increases the verbosity of logged messages."
msgstr "第一个条目在开机时启用 syslogd。第二个条目防止该客户端接受来自其他主机的日志（`-s`），并增加了日志信息的粗略程度。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1004
msgid ""
"Next, define the logging server in the client's [.filename]#/etc/syslog.conf#.  In this example, all logged facilities are sent to a remote "
"system, denoted by the `@` symbol, with the specified hostname:"
msgstr ""
"接下来，在客户端的 [.filename]#/etc/syslog.conf# 中定义日志服务器。在这个例子中，所有记录的设施都被发送到一个远程系统，用 `@` 符号表示，并指定了主"
"机名。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1008
#, no-wrap
msgid "*.*\t\t@logserv.example.com\n"
msgstr "*.*\t\t@logserv.example.com\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1011
msgid "After saving the edit, restart syslogd for the changes to take effect:"
msgstr "保存之后，重启 syslogd 来使其生效："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1015 content/zh-cn/books/handbook/config/_index.adoc:1045
#, no-wrap
msgid "# service syslogd restart\n"
msgstr "# service syslogd restart\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1018
msgid "To test that log messages are being sent across the network, use man:logger[1] on the client to send a message to syslogd:"
msgstr "要测试日志信息是否在网络上被发送，请在客户端使用 man:logger[1] 向 syslogd 发送一条信息："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1022
#, no-wrap
msgid "# logger \"Test message from logclient\"\n"
msgstr "# logger \"Test message from logclient\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1025
msgid ""
"This message should now exist both in [.filename]#/var/log/messages# on the client and [.filename]#/var/log/logclient.log# on the log server."
msgstr "这条信息现在应该同时存在于客户端的 [.filename]#/var/log/messages# 和日志服务器的 [.filename]#/var/log/logclient.log#。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1026
#, no-wrap
msgid "Debugging Log Servers"
msgstr "调试日志客户端"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1032
msgid ""
"If no messages are being received on the log server, the cause is most likely a network connectivity issue, a hostname resolution issue, or a "
"typo in a configuration file.  To isolate the cause, ensure that both the logging server and the logging client are able to `ping` each other "
"using the hostname specified in their [.filename]#/etc/rc.conf#.  If this fails, check the network cabling, the firewall ruleset, and the "
"hostname entries in the DNS server or [.filename]#/etc/hosts# on both the logging server and clients.  Repeat until the `ping` is successful from "
"both hosts."
msgstr ""
"如果在日志服务器上没有收到任何消息，那么原因很可能是网络连接问题、主机名解析问题或配置文件中的一个错字。为了隔离原因，确保日志服务器和日志客户端都"
"能够使用它们的 [.filename]#/etc/rc.conf# 中指定的主机名来 ping 对方。如果失败了，检查网络布线、防火墙规则集，以及日志服务器和客户端的 DNS 服务器"
"或 [.filename]#/etc/hosts# 中的主机名条目。重复进行，直到从两台主机上 ping 成功。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1036
msgid ""
"If the `ping` succeeds on both hosts but log messages are still not being received, temporarily increase logging verbosity to narrow down the "
"configuration issue.  In the following example, [.filename]#/var/log/logclient.log# on the logging server is empty and [.filename]#/var/log/"
"messages# on the logging client does not indicate a reason for the failure.  To increase debugging output, edit the `syslogd_flags` entry on the "
"logging server and issue a restart:"
msgstr ""
"如果在两台主机上 `ping` 成功，但仍然没有收到日志信息，请暂时增加日志的粗略程度，以缩小配置问题。在下面的例子中，日志服务器上的"
" [.filename]#/var/log/logclient.log# 是空的，而日志客户端上的 [.filename]#/var/log/messages# 也没有指出失败的原因。为了增加调试输出，编辑日志服务器上的 "
"`syslogd_flags` 条目，并发出重启信号："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1040
#, no-wrap
msgid "syslogd_flags=\"-d -a logclient.example.com -v -v\"\n"
msgstr "syslogd_flags=\"-d -a logclient.example.com -v -v\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1048
msgid "Debugging data similar to the following will flash on the console immediately after the restart:"
msgstr "重启后，类似以下的调试数据将立即在控制台出现："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1059
#, no-wrap
msgid ""
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"Logging to FILE /var/log/messages\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"rejected in rule 0 due to name mismatch.\n"
msgstr ""
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"Logging to FILE /var/log/messages\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"rejected in rule 0 due to name mismatch.\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1064
msgid ""
"In this example, the log messages are being rejected due to a typo which results in a hostname mismatch.  The client's hostname should be "
"`logclient`, not `logclien`.  Fix the typo, issue a restart, and verify the results:"
msgstr ""
"在这个例子中，日志信息被拒绝是由于一个错字，导致主机名不匹配。客户端的主机名应该是 `logclient` ，而不是 `logclien` 。修正错别字，发出重启，并验证"
"结果："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1080
#, no-wrap
msgid ""
"# service syslogd restart\n"
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"logmsg: pri 166, flags 17, from logserv.example.com,\n"
"msg Dec 10 20:55:02 <syslog.err> logserv.example.com syslogd: exiting on signal 2\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"accepted in rule 0.\n"
"logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 trhodes: Test message 2\n"
"Logging to FILE /var/log/logclient.log\n"
"Logging to FILE /var/log/messages\n"
msgstr ""
"# service syslogd restart\n"
"logmsg: pri 56, flags 4, from logserv.example.com, msg syslogd: restart\n"
"syslogd: restarted\n"
"logmsg: pri 6, flags 4, from logserv.example.com, msg syslogd: kernel boot file is /boot/kernel/kernel\n"
"syslogd: kernel boot file is /boot/kernel/kernel\n"
"logmsg: pri 166, flags 17, from logserv.example.com,\n"
"msg Dec 10 20:55:02 <syslog.err> logserv.example.com syslogd: exiting on signal 2\n"
"cvthname(192.168.1.10)\n"
"validate: dgram from IP 192.168.1.10, port 514, name logclient.example.com;\n"
"accepted in rule 0.\n"
"logmsg: pri 15, flags 0, from logclient.example.com, msg Dec 11 02:01:28 trhodes: Test message 2\n"
"Logging to FILE /var/log/logclient.log\n"
"Logging to FILE /var/log/messages\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1083
msgid "At this point, the messages are being properly received and placed in the correct file."
msgstr "现在，信息被正确地接收并放在正确的文件中。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1084
#, no-wrap
msgid "Security Considerations"
msgstr "出于安全的考虑"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1090
msgid ""
"As with any network service, security requirements should be considered before implementing a logging server.  Log files may contain sensitive "
"data about services enabled on the local host, user accounts, and configuration data.  Network data sent from the client to the server will not "
"be encrypted or password protected.  If a need for encryption exists, consider using package:security/stunnel[], which will transmit the logging "
"data over an encrypted tunnel."
msgstr ""
"与任何网络服务一样，在实施日志服务器之前应考虑安全要求。日志文件可能包含关于本地主机上启用的服务、用户账户和配置数据的敏感数据。从客户端发送到服务"
"器的网络数据将不会被加密或密码保护。如果存在加密的需要，考虑使用 安全/隧道（package:security/stunnel[]），它将通过加密的隧道传输日志数据。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1098
msgid ""
"Local security is also an issue.  Log files are not encrypted during use or after log rotation.  Local users may access log files to gain "
"additional insight into system configuration.  Setting proper permissions on log files is critical.  The built-in log rotator, newsyslog, "
"supports setting permissions on newly created and rotated log files.  Setting log files to mode `600` should prevent unwanted access by local "
"users.  Refer to man:newsyslog.conf[5] for additional information."
msgstr ""
"本地安全也是一个问题。日志文件在使用过程中或在日志轮换后都没有加密。本地用户可能会访问日志文件，以获得对系统配置的额外洞察力。在日志文件上设置适当"
"的权限是至关重要的。内置的日志轮换器，newsyslog，支持对新创建和轮换的日志文件设置权限。将日志文件设置为模式 `600` 应能防止本地用户的不必要的访问。"
"请参阅 man:newsyslog.conf[5] 的手册以了解更多信息。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1100
#, no-wrap
msgid "Configuration Files"
msgstr "配置文件"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1102
#, no-wrap
msgid "[.filename]#/etc# Layout"
msgstr "[.filename]#/etc# 的配置"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1106
msgid "There are a number of directories in which configuration information is kept.  These include:"
msgstr "有许多目录保存着配置信息。这些目录包括："

#. type: Table
#: content/zh-cn/books/handbook/config/_index.adoc:1131
#, no-wrap
msgid ""
"|[.filename]#/etc#\n"
"|Generic system-specific configuration information.\n"
"\n"
"|[.filename]#/etc/defaults#\n"
"|Default versions of system configuration files.\n"
"\n"
"|[.filename]#/etc/mail#\n"
"|Extra man:sendmail[8] configuration and other MTA configuration files.\n"
"\n"
"|[.filename]#/etc/ppp#\n"
"|Configuration for both user- and kernel-ppp programs.\n"
"\n"
"|[.filename]#/usr/local/etc#\n"
"|Configuration files for installed applications. May contain per-application subdirectories.\n"
"\n"
"|[.filename]#/usr/local/etc/rc.d#\n"
"|man:rc[8] scripts for installed applications.\n"
"\n"
"|[.filename]#/var/db#\n"
"|Automatically generated system-specific database files, such as the package database and the man:locate[1] database.\n"
msgstr ""
"|[.filename]#/etc#\n"
"|通用的系统特定配置信息。\n"
"\n"
"|[.filename]#/etc/defaults#\n"
"|系统配置文件的默认版本\n"
"\n"
"|[.filename]#/etc/mail#\n"
"|额外的 Extra man:sendmail[8] 配置和其他 MTA 配置文件\n"
"\n"
"|[.filename]#/etc/ppp#\n"
"|用户或系统 ppp 程序的配置\n"
"\n"
"|[.filename]#/usr/local/etc#\n"
"|已安装的应用程序的配置文件。可能包含每个应用的子目录\n"
"\n"
"|[.filename]#/usr/local/etc/rc.d#\n"
"|已安装程序的 man:rc[8] 脚本\n"
"\n"
"|[.filename]#/var/db#\n"
"|自动生成系统特定的数据库文件，例如软件包数据库和 man:locate[1] 数据库\n"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1133
#, no-wrap
msgid "Hostnames"
msgstr "主机名称"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1135
#, no-wrap
msgid "[.filename]#/etc/resolv.conf#"
msgstr "[.filename]#/etc/resolv.conf#"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1138
msgid "How a FreeBSD system accesses the Internet Domain Name System (DNS) is controlled by man:resolv.conf[5]."
msgstr "FreeBSD 系统如何访问互联网域名系统 ( DNS ) 是由 man:resolv.conf[5] 控制的。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1140
msgid "The most common entries to [.filename]#/etc/resolv.conf# are:"
msgstr "以下为 [.filename]#/etc/resolv.conf# 中最常见的条目："

#. type: Table
#: content/zh-cn/books/handbook/config/_index.adoc:1153
#, no-wrap
msgid ""
"|`nameserver`\n"
"|The IP address of a name server the resolver should query. The servers are queried in the order listed with a maximum of three.\n"
"\n"
"|`search`\n"
"|Search list for hostname lookup. This is normally determined by the domain of the local hostname.\n"
"\n"
"|`domain`\n"
"|The local domain name.\n"
msgstr ""
"|`nameserver`\n"
"|解析器应查询的名称服务器的 IP 地址，服务器按照列出的顺序进行查询，最多可查询三个。\n"
"\n"
"|`search`\n"
"|用于主机名查询的搜索列表，这通常是由本地主机名的域决定的。\n"
"\n"
"|`domain`\n"
"|本地域名。\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1156
msgid "A typical [.filename]#/etc/resolv.conf# looks like this:"
msgstr "一个典型的 [.filename]#/etc/resolv.conf# 长这样："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1162
#, no-wrap
msgid ""
"search example.com\n"
"nameserver 147.11.1.11\n"
"nameserver 147.11.100.30\n"
msgstr ""
"search example.com\n"
"nameserver 147.11.1.11\n"
"nameserver 147.11.100.30\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1167
msgid "Only one of the `search` and `domain` options should be used."
msgstr "`search` 和 `domain` 中，只有一个能被使用。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1170
msgid "When using DHCP, man:dhclient[8] usually rewrites [.filename]#/etc/resolv.conf# with information received from the DHCP server."
msgstr "当使用 DHCP 时，man:dhclient[8] 常常用从 DHCP 服务器中收到的信息来重写 [.filename]#/etc/resolv.conf#。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1171
#, no-wrap
msgid "[.filename]#/etc/hosts#"
msgstr "[.filename]#/etc/hosts#"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1176
msgid ""
"[.filename]#/etc/hosts# is a simple text database which works in conjunction with DNS and NIS to provide host name to IP address mappings.  "
"Entries for local computers connected via a LAN can be added to this file for simplistic naming purposes instead of setting up a man:named[8] "
"server.  Additionally, [.filename]#/etc/hosts# can be used to provide a local record of Internet names, reducing the need to query external DNS "
"servers for commonly accessed names."
msgstr ""
"[.filename]#/etc/hosts# 是一个简单的文本数据库，它与 DNS 和 NIS 一起工作，提供主机名和 IP 地址的映射。通过局域网连接的本地计算机的条目可以被添加到"
"这个文件中，以达到简化命名的目的，而不是建立一个 man:named[8] 服务器。此外，[.filename]#/etc/hosts# 还可以用来提供互联网名称的本地记录，减少为常用"
"名称查询外部 DNS 服务器的需要。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1211
#, no-wrap
msgid ""
"# $FreeBSD$\n"
"#\n"
"#\n"
"# Host Database\n"
"#\n"
"# This file should contain the addresses and aliases for local hosts that\n"
"# share this file.  Replace 'my.domain' below with the domainname of your\n"
"# machine.\n"
"#\n"
"# In the presence of the domain name service or NIS, this file may\n"
"# not be consulted at all; see /etc/nsswitch.conf for the resolution order.\n"
"#\n"
"#\n"
"::1\t\t\tlocalhost localhost.my.domain\n"
"127.0.0.1\t\tlocalhost localhost.my.domain\n"
"#\n"
"# Imaginary network.\n"
"#10.0.0.2\t\tmyname.my.domain myname\n"
"#10.0.0.3\t\tmyfriend.my.domain myfriend\n"
"#\n"
"# According to RFC 1918, you can use the following IP networks for\n"
"# private nets which will never be connected to the Internet:\n"
"#\n"
"#\t10.0.0.0\t-   10.255.255.255\n"
"#\t172.16.0.0\t-   172.31.255.255\n"
"#\t192.168.0.0\t-   192.168.255.255\n"
"#\n"
"# In case you want to be able to connect to the Internet, you need\n"
"# real official assigned numbers.  Do not try to invent your own network\n"
"# numbers but instead get one from your network provider (if any) or\n"
"# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)\n"
"#\n"
msgstr ""
"# $FreeBSD$\n"
"#\n"
"#\n"
"# Host Database\n"
"#\n"
"# This file should contain the addresses and aliases for local hosts that\n"
"# share this file.  Replace 'my.domain' below with the domainname of your\n"
"# machine.\n"
"#\n"
"# In the presence of the domain name service or NIS, this file may\n"
"# not be consulted at all; see /etc/nsswitch.conf for the resolution order.\n"
"#\n"
"#\n"
"::1\t\t\tlocalhost localhost.my.domain\n"
"127.0.0.1\t\tlocalhost localhost.my.domain\n"
"#\n"
"# Imaginary network.\n"
"#10.0.0.2\t\tmyname.my.domain myname\n"
"#10.0.0.3\t\tmyfriend.my.domain myfriend\n"
"#\n"
"# According to RFC 1918, you can use the following IP networks for\n"
"# private nets which will never be connected to the Internet:\n"
"#\n"
"#\t10.0.0.0\t-   10.255.255.255\n"
"#\t172.16.0.0\t-   172.31.255.255\n"
"#\t192.168.0.0\t-   192.168.255.255\n"
"#\n"
"# In case you want to be able to connect to the Internet, you need\n"
"# real official assigned numbers.  Do not try to invent your own network\n"
"# numbers but instead get one from your network provider (if any) or\n"
"# from your regional registry (ARIN, APNIC, LACNIC, RIPE NCC, or AfriNIC.)\n"
"#\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1214
msgid "The format of [.filename]#/etc/hosts# is as follows:"
msgstr "[.filename]#/etc/hosts# 的格式如下："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1218
#, no-wrap
msgid "[Internet address] [official hostname] [alias1] [alias2] ...\n"
msgstr "[Internet address] [official hostname] [alias1] [alias2] ...\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1221
msgid "For example:"
msgstr "比如："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1225
#, no-wrap
msgid "10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2\n"
msgstr "10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1228
msgid "Consult man:hosts[5] for more information."
msgstr "可在 man:hosts[5] 的手册中找到更多信息。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1230
#, no-wrap
msgid "Tuning with man:sysctl[8]"
msgstr "使用 man:sysctl[8] 进行调整"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1235
msgid ""
"man:sysctl[8] is used to make changes to a running FreeBSD system.  This includes many advanced options of the TCP/IP stack and virtual memory "
"system that can dramatically improve performance for an experienced system administrator.  Over five hundred system variables can be read and set "
"using man:sysctl[8]."
msgstr ""
"man:sysctl[8] 是用来对运行中的 FreeBSD 系统进行修改的命令。这包括许多 TCP/IP 协议栈和虚拟内存系统的高级选项，对于有经验的系统管理员来说，可以极大"
"地提高性能。使用 man:sysctl[8] 可以读取和设置超过五百个系统变量。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1237
msgid "At its core, man:sysctl[8] serves two functions: to read and to modify system settings."
msgstr "在其核心部分，man:sysctl[8] 有两个功能：读取和修改系统设置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1239
msgid "To view all readable variables:"
msgstr "要查看所有可读的变量，请输入："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1243
#, no-wrap
msgid "% sysctl -a\n"
msgstr "% sysctl -a\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1246
msgid "To read a particular variable, specify its name:"
msgstr "要查看某个特定的变量，请指定它的名称："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1251
#, no-wrap
msgid ""
"% sysctl kern.maxproc\n"
"kern.maxproc: 1044\n"
msgstr ""
"% sysctl kern.maxproc\n"
"kern.maxproc: 1044\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1254
msgid "To set a particular variable, use the _variable_=_value_ syntax:"
msgstr "要设置一个特定的变量，使用：_变量_ = _值_ 的语法："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1259
#, no-wrap
msgid ""
"# sysctl kern.maxfiles=5000\n"
"kern.maxfiles: 2088 -> 5000\n"
msgstr ""
"# sysctl kern.maxfiles=5000\n"
"kern.maxfiles: 2088 -> 5000\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1262
msgid "Settings of sysctl variables are usually either strings, numbers, or booleans, where a boolean is `1` for yes or `0` for no."
msgstr "sysctl变量的设置通常是字符串、数字或布尔值，其中布尔值是 `1` 时表示是，`0` 表示否。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1265
msgid ""
"To automatically set some variables each time the machine boots, add them to [.filename]#/etc/sysctl.conf#.  For more information, refer to man:"
"sysctl.conf[5] and <<configtuning-sysctlconf>>."
msgstr ""
"要在机器每次启动时自动设置一些变量，可以将它们添加到 [.filename]#/etc/sysctl.conf# 中。更多信息，请参考 man:sysctl.conf[5] 手册页面和 12.9.1. "
"sysctl.conf。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1267
#, no-wrap
msgid "[.filename]#sysctl.conf#"
msgstr "[.filename]#sysctl.conf#"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1273
msgid ""
"The configuration file for man:sysctl[8], [.filename]#/etc/sysctl.conf#, looks much like [.filename]#/etc/rc.conf#.  Values are set in a "
"`variable=value` form.  The specified values are set after the system goes into multi-user mode.  Not all variables are settable in this mode."
msgstr ""
"man:sysctl[8] 的配置文件 [.filename]#/etc/sysctl.conf#，看起来很像 [.filename]#/etc/rc.conf# 。值是以 `变量` = `值` 的形式设置的，指定的值在系统进"
"入多用户模式后被设置。不是所有的变量都可以在这种模式下设置。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1275
msgid ""
"For example, to turn off logging of fatal signal exits and prevent users from seeing processes started by other users, the following tunables can "
"be set in [.filename]#/etc/sysctl.conf#:"
msgstr "例如，为了关闭对致命信号退出的记录，并防止用户看到其他用户启动的进程，可以在 [.filename]#/etc/sysctl.conf# 中设置以下调整项："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1280
#, no-wrap
msgid ""
"# Do not log fatal signal exits (e.g., sig 11)\n"
"kern.logsigexit=0\n"
msgstr ""
"# Do not log fatal signal exits (e.g., sig 11)\n"
"kern.logsigexit=0\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1284
#, no-wrap
msgid ""
"# Prevent users from seeing information about processes that\n"
"# are being run under another UID.\n"
"security.bsd.see_other_uids=0\n"
msgstr ""
"# Prevent users from seeing information about processes that\n"
"# are being run under another UID.\n"
"security.bsd.see_other_uids=0\n"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1287
#, no-wrap
msgid "man:sysctl[8] Read-only"
msgstr "man:sysctl[8] 只读"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1290
msgid "In some cases it may be desirable to modify read-only man:sysctl[8] values, which will require a reboot of the system."
msgstr "在某些情况下，可能需要修改只读的 man:sysctl[8] 值，这将需要重新启动系统。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1292
msgid "For instance, on some laptop models the man:cardbus[4] device will not probe memory ranges and will fail with errors similar to:"
msgstr "例如，在某些型号的笔记本电脑上，man:cardbus[4] 设备不会探测内存范围，会出现类似的错误："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1297
#, no-wrap
msgid ""
"cbb0: Could not map register memory\n"
"device_probe_and_attach: cbb0 attach returned 12\n"
msgstr ""
"cbb0: Could not map register memory\n"
"device_probe_and_attach: cbb0 attach returned 12\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1302
msgid ""
"The fix requires the modification of a read-only man:sysctl[8] setting.  Add `hw.pci.allow_unsupported_io_range=1` to [.filename]#/boot/loader."
"conf# and reboot.  Now man:cardbus[4] should work properly."
msgstr ""
"修复这个问题时，需要更改 man:sysctl[8] 的只读设定，为此，可向 [.filename]#/boot/loader.conf# 添加 `hw.pci.allow_unsupported_io_range=1` 并重启。现"
"在 man:cardbus[4] 应该能够正常运行了。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1304
#, no-wrap
msgid "Tuning Disks"
msgstr "调整磁盘"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1311
msgid ""
"The following section will discuss various tuning mechanisms and options which may be applied to disk devices.  In many cases, disks with "
"mechanical parts, such as SCSI drives, will be the bottleneck driving down the overall system performance.  While a solution is to install a "
"drive without mechanical parts, such as a solid state drive, mechanical drives are not going away anytime in the near future.  When tuning disks, "
"it is advisable to utilize the features of the man:iostat[8] command to test various changes to the system.  This command will allow the user to "
"obtain valuable information on system IO."
msgstr ""
"下面的章节将讨论各种可用于磁盘设备的调整机制和选项。在许多情况下，带有机械部件的磁盘，如 SCSI 驱动器，将成为降低整个系统性能的瓶颈。虽然一个解决方"
"案是安装一个没有机械部件的驱动器，如固态驱动器，但机械驱动器在不久的将来不会消失。在调整磁盘时，建议利用 man:iostat[8] 命令的功能来测试系统的各种"
"变化。这个命令将使用户获得关于系统 IO 的宝贵信息。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1312
#, no-wrap
msgid "Sysctl Variables"
msgstr "Sysctl 变量"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1314
#, no-wrap
msgid "`vfs.vmiodirenable`"
msgstr "`vfs.vmiodirenable`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1325
msgid ""
"The `vfs.vmiodirenable` man:sysctl[8] variable may be set to either `0` (off) or `1` (on).  It is set to `1` by default. This variable controls "
"how directories are cached by the system.  Most directories are small, using just a single fragment (typically 1 K) in the file system and "
"typically 512 bytes in the buffer cache.  With this variable turned off, the buffer cache will only cache a fixed number of directories, even if "
"the system has a huge amount of memory.  When turned on, this man:sysctl[8] allows the buffer cache to use the VM page cache to cache the "
"directories, making all the memory available for caching directories.  However, the minimum in-core memory used to cache a directory is the "
"physical page size (typically 4 K) rather than 512 bytes.  Keeping this option enabled is recommended if the system is running any services which "
"manipulate large numbers of files.  Such services can include web caches, large mail systems, and news systems.  Keeping this option on will "
"generally not reduce performance, even with the wasted memory, but one should experiment to find out."
msgstr ""
"`vfs.vmiodirenable` man:sysctl[8] 变量可以被设置为 `0`（关闭）或 `1`（打开）。默认情况下，它被设置为 `1`。这个变量控制系统对目录的缓存方式。大多数"
"目录都很小，在文件系统中只使用一个片段（通常为 1K ），在缓冲区缓存中通常为 512 字节。如果关闭这个变量，缓冲区缓存将只缓存固定数量的目录，即使系统"
"有大量的内存。当打开时，这个 man:sysctl[8] 允许缓冲区缓存使用虚拟机页面缓存来缓存目录，使所有的内存都可以用于缓存目录。然而，用于缓存目录的最小核"
"心内存是物理页大小（通常是 4K ）而不是 512 字节。如果系统正在运行任何操作大量文件的服务，建议保持该选项的启用。这些服务可能包括网络缓存、大型邮件"
"系统和新闻系统。保持这个选项通常不会降低性能，即使浪费了内存，但人们应该通过实验来发现问题。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1326
#, no-wrap
msgid "`vfs.write_behind`"
msgstr "`vfs.write_behind`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1332
msgid ""
"The `vfs.write_behind` man:sysctl[8] variable defaults to `1` (on).  This tells the file system to issue media writes as full clusters are "
"collected, which typically occurs when writing large sequential files.  This avoids saturating the buffer cache with dirty buffers when it would "
"not benefit I/O performance.  However, this may stall processes and under certain circumstances should be turned off."
msgstr ""
"`vfs.write_behind` man:sysctl[8] 变量的默认值是 `1` (on)。这告诉文件系统在收集完整的集群时发出媒体写入，这通常发生在写入大的顺序文件时。这可以避免"
"在 I/O 性能无益的情况下用脏缓冲区使缓冲区缓存饱和。然而，这可能会拖延进程，在某些情况下应该关闭。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1333
#, no-wrap
msgid "`vfs.hirunningspace`"
msgstr "`vfs.hirunningspace`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1339
msgid ""
"The `vfs.hirunningspace` man:sysctl[8] variable determines how much outstanding write I/O may be queued to disk controllers system-wide at any "
"given instance.  The default is usually sufficient, but on machines with many disks, try bumping it up to four or five _megabytes_.  Setting too "
"high a value which exceeds the buffer cache's write threshold can lead to bad clustering performance.  Do not set this value arbitrarily high as "
"higher write values may add latency to reads occurring at the same time."
msgstr ""
"`vfs.hirunningspace` man:sysctl[8] 变量决定了在任何给定的实例中，有多少未完成的写 I/O 可以被排到磁盘控制器的系统中。默认值通常是足够的，但在有许多"
"磁盘的机器上，可以尝试把它提高到 4 或 5 _兆字节_。设置太高的值，超过缓冲区缓存的写入阈值，会导致糟糕的集群性能。不要任意设置这个值，因为更高的写入"
"值可能会增加同时进行的读取的延迟。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1342
msgid ""
"There are various other buffer cache and VM page cache related man:sysctl[8] values.  Modifying these values is not recommended as the VM system "
"does a good job of automatically tuning itself."
msgstr "还有其他各种与缓冲区高速缓存和虚拟机页面高速缓存相关的 man:sysctl[8] 值。不建议修改这些值，因为虚拟机系统在自动调整自己方面做得很好。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1343
#, no-wrap
msgid "`vm.swap_idle_enabled`"
msgstr "`vm.swap_idle_enabled`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1351
msgid ""
"The `vm.swap_idle_enabled` man:sysctl[8] variable is useful in large multi-user systems with many active login users and lots of idle processes.  "
"Such systems tend to generate continuous pressure on free memory reserves.  Turning this feature on and tweaking the swapout hysteresis (in idle "
"seconds) via `vm.swap_idle_threshold1` and `vm.swap_idle_threshold2` depresses the priority of memory pages associated with idle processes more "
"quickly then the normal pageout algorithm.  This gives a helping hand to the pageout daemon.  Only turn this option on if needed, because the "
"tradeoff is essentially pre-page memory sooner rather than later which eats more swap and disk bandwidth.  In a small system this option will "
"have a determinable effect, but in a large system that is already doing moderate paging, this option allows the VM system to stage whole "
"processes into and out of memory easily."
msgstr ""
"`vm.swap_idle_enabled` man:sysctl[8] 变量在有许多活跃的登录用户和大量空闲进程的大型多用户系统中非常有用。这样的系统往往会对自由内存储备产生持续的"
"压力。通过 `vm.swap_idle_threshold1` 和 `vm.swap_idle_threshold2` 打开这个功能并调整交换滞后（以空闲秒为单位），比正常的分页算法更快地降低与空闲进"
"程相关的内存页的优先级。这给了分页守护程序一个帮助。只有在需要时才打开这个选项，因为这样做的代价是尽早对内存进行预分页，而不是晚分页，这会消耗更多"
"的交换空间和磁盘带宽。在一个小系统中，这个选项的影响是可以确定的，但是在一个已经在进行适度分页的大系统中，这个选项允许虚拟机系统轻松地将整个进程放"
"入和取出内存。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1352
#, no-wrap
msgid "`hw.ata.wc`"
msgstr "`hw.ata.wc`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1360
msgid ""
"Turning off IDE write caching reduces write bandwidth to IDE disks, but may sometimes be necessary due to data consistency issues introduced by "
"hard drive vendors.  The problem is that some IDE drives lie about when a write completes.  With IDE write caching turned on, IDE hard drives "
"write data to disk out of order and will sometimes delay writing some blocks indefinitely when under heavy disk load.  A crash or power failure "
"may cause serious file system corruption.  Check the default on the system by observing the `hw.ata.wc` man:sysctl[8] variable.  If IDE write "
"caching is turned off, one can set this read-only variable to `1` in [.filename]#/boot/loader.conf# in order to enable it at boot time."
msgstr ""
"关闭 IDE 写缓存可以减少对 IDE 磁盘的写入带宽，但由于硬盘供应商引入的数据一致性问题，有时可能是必要的。问题是，有些 IDE 硬盘会在写入完成时撒谎。在"
"打开 IDE 写缓存的情况下，IDE硬盘会不按顺序向磁盘写入数据，在磁盘负载较重的情况下，有时会无限期地延迟写入一些块。崩溃或断电可能导致严重的文件系统损"
"坏。通过观察 `hw.ata.wc` man:sysctl[8] 变量来检查系统上的默认情况。如果 IDE 写缓存被关闭，可以在 [.filename]#/boot/loader.conf# 中把这个只读变量设"
"置为 `1`，以便在启动时启用它。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1362
msgid "For more information, refer to man:ata[4]."
msgstr "更多信息，请参考 man:ata[4] 的手册。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1363
#, no-wrap
msgid "`SCSI_DELAY` (`kern.cam.scsi_delay`)"
msgstr "`SCSI_DELAY` (`kern.cam.scsi_delay`)"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1370
msgid ""
"The `SCSI_DELAY` kernel configuration option may be used to reduce system boot times.  The defaults are fairly high and can be responsible for "
"`15` seconds of delay in the boot process.  Reducing it to `5` seconds usually works with modern drives.  The `kern.cam.scsi_delay` boot time "
"tunable should be used.  The tunable and kernel configuration option accept values in terms of _milliseconds_ and _not seconds_."
msgstr ""
"`SCSI_DELAY` 内核配置选项可以用来减少系统启动时间。默认值是相当高的，可能会在启动过程中造成 `15` 秒的延迟。把它减少到 `5` 秒通常对现代硬盘有效。应"
"该使用 `kern.cam.scsi_delay` 启动时间可调。调谐器和内核配置选项接受以 _毫秒_ 而不是 _秒_ 为单位的值。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1372
#, no-wrap
msgid "Soft Updates"
msgstr "软更新"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1377
msgid "To fine-tune a file system, use man:tunefs[8].  This program has many different options.  To toggle Soft Updates on and off, use:"
msgstr "要对文件系统进行微调，可以使用 man:tunefs[8] 。这个程序有许多不同的选项。要打开和关闭软更新，请使用："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1382
#, no-wrap
msgid ""
"# tunefs -n enable /filesystem\n"
"# tunefs -n disable /filesystem\n"
msgstr ""
"# tunefs -n enable /filesystem\n"
"# tunefs -n disable /filesystem\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1386
msgid ""
"A file system cannot be modified with man:tunefs[8] while it is mounted.  A good time to enable Soft Updates is before any partitions have been "
"mounted, in single-user mode."
msgstr "文件系统在挂载时不能用 man:tunefs[8] 来修改。在单用户模式下，启用软更新的好时机是在任何分区被挂载之前。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1393
msgid ""
"Soft Updates is recommended for UFS file systems as it drastically improves meta-data performance, mainly file creation and deletion, through the "
"use of a memory cache.  There are two downsides to Soft Updates to be aware of.  First, Soft Updates guarantee file system consistency in the "
"case of a crash, but could easily be several seconds or even a minute behind updating the physical disk.  If the system crashes, unwritten data "
"may be lost.  Secondly, Soft Updates delay the freeing of file system blocks.  If the root file system is almost full, performing a major update, "
"such as `make installworld`, can cause the file system to run out of space and the update to fail."
msgstr ""
"软更新被推荐用于 UFS 文件系统，因为它通过使用内存缓存极大地提高了元数据的性能，主要是文件的创建和删除。软更新有两个需要注意的缺点。首先，软更新保"
"证了文件系统在崩溃情况下的一致性，但可能很容易比更新物理磁盘晚几秒甚至一分钟。如果系统崩溃了，未写入的数据可能会丢失。其次，软更新延迟了文件系统块"
"的释放。如果根文件系统几乎满了，执行一个主要的更新，如 make installworld，会导致文件系统的空间耗尽，更新失败。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1394
#, no-wrap
msgid "More Details About Soft Updates"
msgstr "更多关于软更新的细节"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1398
msgid ""
"Meta-data updates are updates to non-content data like inodes or directories.  There are two traditional approaches to writing a file system's "
"meta-data back to disk."
msgstr "元数据更新是对非内容数据的更新，如 inodes 或目录。有两种传统的方法来将文件系统的元数据写回磁盘。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1411
msgid ""
"Historically, the default behavior was to write out meta-data updates synchronously.  If a directory changed, the system waited until the change "
"was actually written to disk.  The file data buffers (file contents) were passed through the buffer cache and backed up to disk later on "
"asynchronously.  The advantage of this implementation is that it operates safely.  If there is a failure during an update, meta-data is always in "
"a consistent state.  A file is either created completely or not at all.  If the data blocks of a file did not find their way out of the buffer "
"cache onto the disk by the time of the crash, man:fsck[8] recognizes this and repairs the file system by setting the file length to `0`.  "
"Additionally, the implementation is clear and simple.  The disadvantage is that meta-data changes are slow.  For example, `rm -r` touches all the "
"files in a directory sequentially, but each directory change will be written synchronously to the disk.  This includes updates to the directory "
"itself, to the inode table, and possibly to indirect blocks allocated by the file.  Similar considerations apply for unrolling large hierarchies "
"using `tar -x`."
msgstr ""
"历史上，默认行为是同步写出元数据更新。如果一个目录发生了变化，系统会等待，直到该变化被实际写入磁盘。文件数据缓冲区（文件内容）通过缓冲区缓存，随后"
"异步备份到磁盘。这种实现方式的优点是操作安全。如果在更新过程中出现了故障，元数据总是处于一致的状态。一个文件要么被完全创建，要么根本就没有。如果一"
"个文件的数据块在崩溃时还没有从缓冲区缓存中找到它们的位置，man:fsck[8] 会识别出这一点，并通过将文件长度设置为 `0` 来修复文件系统。此外，这个实现是"
"清晰和简单的。缺点是，元数据的改变很慢。例如，`rm -r` 按顺序触及一个目录中的所有文件，但每个目录的变化都会同步写入磁盘。这包括对目录本身的更新，"
"对 inode 表的更新，以及可能对文件分配的间接块的更新。类似的考虑也适用于使用 `tar -x` 解开大型层次结构。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1422
msgid ""
"The second approach is to use asynchronous meta-data updates.  This is the default for a UFS file system mounted with `mount -o async`.  Since "
"all meta-data updates are also passed through the buffer cache, they will be intermixed with the updates of the file content data.  The advantage "
"of this implementation is there is no need to wait until each meta-data update has been written to disk, so all operations which cause huge "
"amounts of meta-data updates work much faster than in the synchronous case.  This implementation is still clear and simple, so there is a low "
"risk for bugs creeping into the code.  The disadvantage is that there is no guarantee for a consistent state of the file system If there is a "
"failure during an operation that updated large amounts of meta-data, like a power failure or someone pressing the reset button, the file system "
"will be left in an unpredictable state.  There is no opportunity to examine the state of the file system when the system comes up again as the "
"data blocks of a file could already have been written to the disk while the updates of the inode table or the associated directory were not.  It "
"is impossible to implement a man:fsck[8] which is able to clean up the resulting chaos because the necessary information is not available on the "
"disk.  If the file system has been damaged beyond repair, the only choice is to reformat it and restore from backup."
msgstr ""
"第二种方法是使用异步的元数据更新。这是用 `mount -o async` 挂载的 UFS 文件系统的默认做法。由于所有的元数据更新也要通过缓冲区缓存，它们将与文件内容"
"数据的更新混在一起。这个实现的好处是不需要等待每个元数据的更新被写入磁盘，所以所有引起大量元数据更新的操作都比同步情况下快得多。这个实现仍然是清晰"
"和简单的，所以代码中出现错误的风险很低。缺点是不能保证文件系统的一致状态 如果在更新大量元数据的操作中出现故障，比如断电或有人按下复位按钮，文件系"
"统将被留在不可预测的状态中。当系统再次启动时，没有机会检查文件系统的状态，因为文件的数据块可能已经被写入磁盘，而节点表或相关目录的更新却没有。因为"
"磁盘上没有必要的信息，所以不可能实现 man:fsck[8] 来清理由此产生的混乱。如果文件系统已经被破坏得无法修复，唯一的选择就是重新格式化并从备份中恢复。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1430
msgid ""
"The usual solution for this problem is to implement _dirty region logging_, which is also referred to as _journaling_.  Meta-data updates are "
"still written synchronously, but only into a small region of the disk.  Later on, they are moved to their proper location.  Since the logging "
"area is a small, contiguous region on the disk, there are no long distances for the disk heads to move, even during heavy operations, so these "
"operations are quicker than synchronous updates.  Additionally, the complexity of the implementation is limited, so the risk of bugs being "
"present is low.  A disadvantage is that all meta-data is written twice, once into the logging region and once to the proper location, so "
"performance \"pessimization\" might result.  On the other hand, in case of a crash, all pending meta-data operations can be either quickly rolled "
"back or completed from the logging area after the system comes up again, resulting in a fast file system startup."
msgstr ""
"这个问题的通常解决方案是 _实现脏区记录_，这也被称为 _日记_。元数据的更新仍然是同步写入的，但只写入磁盘的一个小区域。后来，它们被移到适当的位置。由"
"于日志区是磁盘上的一个小的、连续的区域，即使在繁重的操作中，磁盘磁头也不会有长距离的移动，所以这些操作比同步更新要快。此外，实现的复杂性是有限的，"
"所以出现错误的风险很低。一个缺点是，所有的元数据都要写两次，一次写到日志区域，一次写到适当的位置，所以可能导致性能 \"下降\"。另一方面，在崩溃的情"
"况下，所有悬而未决的元数据操作可以迅速回滚，或者在系统再次启动后从日志区域完成，从而导致文件系统的快速启动。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1446
msgid ""
"Kirk McKusick, the developer of Berkeley FFS, solved this problem with Soft Updates.  All pending meta-data updates are kept in memory and "
"written out to disk in a sorted sequence (\"ordered meta-data updates\").  This has the effect that, in case of heavy meta-data operations, later "
"updates to an item \"catch\" the earlier ones which are still in memory and have not already been written to disk.  All operations are generally "
"performed in memory before the update is written to disk and the data blocks are sorted according to their position so that they will not be on "
"the disk ahead of their meta-data.  If the system crashes, an implicit \"log rewind\" causes all operations which were not written to the disk "
"appear as if they never happened.  A consistent file system state is maintained that appears to be the one of 30 to 60 seconds earlier.  The "
"algorithm used guarantees that all resources in use are marked as such in their blocks and inodes.  After a crash, the only resource allocation "
"error that occurs is that resources are marked as \"used\" which are actually \"free\".  man:fsck[8] recognizes this situation, and frees the "
"resources that are no longer used.  It is safe to ignore the dirty state of the file system after a crash by forcibly mounting it with `mount -"
"f`.  In order to free resources that may be unused, man:fsck[8] needs to be run at a later time.  This is the idea behind the _background man:"
"fsck[8]_: at system startup time, only a _snapshot_ of the file system is recorded and man:fsck[8] is run afterwards.  All file systems can then "
"be mounted \"dirty\", so the system startup proceeds in multi-user mode.  Then, background man:fsck[8] is scheduled for all file systems where "
"this is required, to free resources that may be unused.  File systems that do not use Soft Updates still need the usual foreground man:fsck[8]."
msgstr ""
"Berkeley FFS 的开发者 Kirk McKusick 用软更新解决了这个问题。所有悬而未决的元数据更新被保存在内存中，并以排序的顺序写入磁盘（“有序元数据更新”）。这"
"样做的效果是，在大量元数据操作的情况下，一个项目的后期更新会“抓住”仍在内存中且尚未被写入磁盘的早期更新。在更新被写入磁盘之前，所有的操作一般都是在"
"内存中进行的，而且数据块会根据它们的位置进行排序，这样它们就不会在磁盘上领先于它们的元数据。如果系统崩溃，一个隐含的“日志倒退”会使所有没有被写入磁"
"盘的操作看起来就像它们从未发生一样。一个一致的文件系统状态被维持，看起来是 30 到 60 秒之前的状态。所用的算法保证了所有正在使用的资源在它们的块和节"
"点中都被标记成这样。在崩溃之后，唯一发生的资源分配错误是资源被标记为“已使用”（used），而实际上是“已释放”（free）。man:fsck[8] 识别这种情况，并释放"
"不再使用的资源。在文件系统崩溃后，用 `mount -f` 强行挂载文件系统的脏状态是安全的。为了释放可能未使用的资源，man:fsck[8] 需要在以后的时间运行。这就"
"是 _后台 man:fsck[8]_ 的想法：在系统启动时，只记录文件系统的 _快照_，之后再运行 man:fsck[8] 。然后，所有的文件系统都可以 \"dirty\" 挂载，所以系统"
"的启动在多用户模式下进行。然后，后台 man:fsck[8] 被安排在所有需要这样做的文件系统上，以释放可能未使用的资源。不使用软更新的文件系统仍然需要常规的"
"前台 man:fsck[8]。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1453
msgid ""
"The advantage is that meta-data operations are nearly as fast as asynchronous updates and are faster than _logging_, which has to write the meta-"
"data twice.  The disadvantages are the complexity of the code, a higher memory consumption, and some idiosyncrasies.  After a crash, the state of "
"the file system appears to be somewhat \"older\".  In situations where the standard synchronous approach would have caused some zero-length files "
"to remain after the man:fsck[8], these files do not exist at all with Soft Updates because neither the meta-data nor the file contents have been "
"written to disk.  Disk space is not released until the updates have been written to disk, which may take place some time after running man:"
"rm[1].  This may cause problems when installing large amounts of data on a file system that does not have enough free space to hold all the files "
"twice."
msgstr ""
"其优点是元数据操作的速度几乎与异步更新一样快，而且比 _记录_ 要快，因为记录要写两次元数据。缺点是代码的复杂性，较高的内存消耗，以及一些特异性的问"
"题。在崩溃之后，文件系统的状态显得有些“旧”。在标准的同步方法会导致一些零长度的文件在 man:fsck[8] 之后仍然存在的情况下，这些文件在软更新中根本就不"
"存在，因为元数据和文件内容都没有被写入磁盘。在更新被写入磁盘之前，磁盘空间不会被释放，这可能发生在运行 man:rm[1] 之后的一段时间。当在一个没有足够"
"自由空间容纳所有文件的文件系统上安装大量数据时，这可能会导致问题。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1455
#, no-wrap
msgid "Tuning Kernel Limits"
msgstr "调整内核限制"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1458
#, no-wrap
msgid "File/Process Limits"
msgstr "文件/进程限制"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1461
#, no-wrap
msgid "`kern.maxfiles`"
msgstr "`kern.maxfiles`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1466
msgid ""
"The `kern.maxfiles` man:sysctl[8] variable can be raised or lowered based upon system requirements.  This variable indicates the maximum number "
"of file descriptors on the system.  When the file descriptor table is full, `file: table is full` will show up repeatedly in the system message "
"buffer, which can be viewed using man:dmesg[8]."
msgstr ""
"可根据系统的要求来提高或降低 man:sysctl[8] 变量 `kern.maxfiles` 。这个变量表示系统中文件描述符的最大数量。当文件描述符表已满时，`file: table is "
"full` 会在系统消息缓冲区中反复显示，可以用 man:dmesg[8] 查看。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1469
msgid ""
"Each open file, socket, or fifo uses one file descriptor.  A large-scale production server may easily require many thousands of file descriptors, "
"depending on the kind and number of services running concurrently."
msgstr ""
"每个打开的文件、套接字或 fifo 使用一个文件描述符。一个大规模的生产型服务器可能很容易需要成千上万的文件描述符，这取决于同时运行的服务的种类和数量。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1475
msgid ""
"In older FreeBSD releases, the default value of `kern.maxfiles` is derived from `maxusers` in the kernel configuration file.  `kern.maxfiles` "
"grows proportionally to the value of `maxusers`.  When compiling a custom kernel, consider setting this kernel configuration option according to "
"the use of the system.  From this number, the kernel is given most of its pre-defined limits.  Even though a production machine may not have 256 "
"concurrent users, the resources needed may be similar to a high-scale web server."
msgstr ""
"在较早的 FreeBSD 版本中，`kern.maxfiles` 的默认值来自于内核配置文件中的 `maxusers` 。`kern.maxfiles` 的增长与 `maxusers` 的值成比例。当编译一个自"
"定义的内核时，考虑根据系统的使用情况来设置这个内核配置选项。从这个数字来看，内核被赋予了大部分的预定义限制。即使一台生产机器可能没有256个并发用"
"户，但所需要的资源可能与一个高规模的网络服务器相似。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1481
msgid ""
"The read-only man:sysctl[8] variable `kern.maxusers` is automatically sized at boot based on the amount of memory available in the system, and "
"may be determined at run-time by inspecting the value of `kern.maxusers`.  Some systems require larger or smaller values of `kern.maxusers` and "
"values of `64`, `128`, and `256` are not uncommon.  Going above `256` is not recommended unless a huge number of file descriptors is needed.  "
"Many of the tunable values set to their defaults by `kern.maxusers` may be individually overridden at boot-time or run-time in [.filename]#/boot/"
"loader.conf#.  Refer to man:loader.conf[5] and [.filename]#/boot/defaults/loader.conf# for more details and some hints."
msgstr ""
"只读的 man:sysctl[8] 变量 `kern.maxusers` 在启动时根据系统中可用的内存量自动确定大小，也可以在运行时通过检查 `kern.maxusers` 的值来确定。有些系统"
"需要更大或更小的 `kern.maxusers` 值，`64`、`128` 和 `256` 的值并不少见。除非需要大量的文件描述符，否则不建议超过 `256`。许多被 `kern.maxusers` 设"
"置为默认值的可调整值可以在启动时或运行时在 [.filename]#/boot/loader.conf# 中被单独覆盖。请参考 man:loader.conf[5] 和"
" [.filename]#/boot/defaults/loader.conf# 以了解更多细节和一些提示。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1489
msgid ""
"In older releases, the system will auto-tune `maxusers` if it is set to `0`. footnote:[The auto-tuning algorithm sets maxusers equal to the "
"amount of memory in the system, with a minimum of 32, and a maximum of 384.].  When setting this option, set `maxusers` to at least `4`, "
"especially if the system runs Xorg or is used to compile software.  The most important table set by `maxusers` is the maximum number of "
"processes, which is set to `20 + 16 * maxusers`.  If `maxusers` is set to `1`, there can only be `36` simultaneous processes, including the `18` "
"or so that the system starts up at boot time and the `15` or so used by Xorg.  Even a simple task like reading a manual page will start up nine "
"processes to filter, decompress, and view it.  Setting `maxusers` to `64` allows up to `1044` simultaneous processes, which should be enough for "
"nearly all uses.  If, however, the error is displayed when trying to start another program, or a server is running with a large number of "
"simultaneous users, increase the number and rebuild."
msgstr ""
"在较早的版本中，如果 `maxusers` 被设置为 `0`，footnote:[系统会自动进行调整（自动调整算法将 maxusers 设定为等于系统中的内存量，最小为32，最大为384）]。"
"在设置这个选项时，至少要把 `maxusers` 设置为 `4`，特别是在系统运行 Xorg 或用来编译软件的情况下。`maxusers` 设置的最重要的表是最大进程数，"
"它被设置为 `20 + 16 * maxusers` 。如果 `maxusers` 被设置为 `1`，则只能有 `36` 个同时进行的进程，包括系统在启动时启动的 `18` 个左右的进程和 Xorg 使"
"用的 `15` 个左右的进程。即使是一个简单的任务，比如阅读一个手册页面，也会启动9个进程来过滤、解压和查看它。将 `maxusers` 设置为 `64`，最多允许 "
"`1044` 个同时进行的进程，这应该足以满足几乎所有的用途。但是，如果在试图启动另一个程序时显示错误，或者服务器在运行时有大量的并发用户，请增加数量并"
"重新构建。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1494
msgid ""
"`maxusers` does _not_ limit the number of users which can log into the machine.  It instead sets various table sizes to reasonable values "
"considering the maximum number of users on the system and how many processes each user will be running."
msgstr "`maxusers` 并 _不_ 限制可以登录机器的用户数量。相反，考虑到系统中的最大用户数和每个用户将运行的进程数，它将各种表的大小设置为合理值。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1496
#, no-wrap
msgid "`kern.ipc.soacceptqueue`"
msgstr "`kern.ipc.soacceptqueue`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1503
msgid ""
"The `kern.ipc.soacceptqueue` man:sysctl[8] variable limits the size of the listen queue for accepting new `TCP` connections.  The default value "
"of `128` is typically too low for robust handling of new connections on a heavily loaded web server.  For such environments, it is recommended to "
"increase this value to `1024` or higher.  A service such as man:sendmail[8], or Apache may itself limit the listen queue size, but will often "
"have a directive in its configuration file to adjust the queue size.  Large listen queues do a better job of avoiding Denial of Service (DoS) "
"attacks."
msgstr ""
"man:sysctl[8] 的 `kern.ipc.soacceptqueue` 变量限制了用于接受新 `TCP` 连接的监听队列的大小。默认值 `128` 通常太低，不利于稳健地处理高负荷的 web 服"
"务器上的新连接。对于这样的环境，建议将这个值增加到1024或更高。像 man:sendmail[8] 或 Apache 这样的服务可能本身就限制了监听队列的大小，但通常在其配"
"置文件中会有一个指令来调整队列大小。大的监听队列在避免拒绝服务（DoS）攻击方面做得更好。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1505
#, no-wrap
msgid "Network Limits"
msgstr "网络限制"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1516
msgid ""
"The `NMBCLUSTERS` kernel configuration option dictates the amount of network Mbufs available to the system.  A heavily-trafficked server with a "
"low number of Mbufs will hinder performance.  Each cluster represents approximately 2 K of memory, so a value of `1024` represents `2` megabytes "
"of kernel memory reserved for network buffers.  A simple calculation can be done to figure out how many are needed.  A web server which maxes out "
"at `1000` simultaneous connections where each connection uses a 6 K receive and 16 K send buffer, requires approximately 32 MB worth of network "
"buffers to cover the web server.  A good rule of thumb is to multiply by `2`, so 2x32 MB / 2 KB = 64 MB / 2 kB = `32768`.  Values between `4096` "
"and `32768` are recommended for machines with greater amounts of memory.  Never specify an arbitrarily high value for this parameter as it could "
"lead to a boot time crash.  To observe network cluster usage, use `-m` with man:netstat[1]."
msgstr ""
"`NMBCLUSTERS` 内核配置选项决定了系统可用的网络 Mbufs 的数量。一个大量使用的服务器，如果 Mbufs 的数量很低，会妨碍性能。每个簇代表大约 2K 的内存，所"
"以 `1024` 的值代表 `2` 兆字节的内核内存保留给网络缓冲区。可以做一个简单的计算来计算出需要多少个。一个网络服务器的最大同时连接数为 `1000`，每个连接"
"使用 6K 的接收和 16K 的发送缓冲区，需要大约 32MB 的网络缓冲区来覆盖网络服务器。一个好的经验法则是乘以 `2`，所以 2 x 32 MB / 2 KB = 64 MB / 2 kB = "
"`32768`。对于拥有更大内存的机器，建议使用 `4096` 和 `32768` 之间的值。千万不要为这个参数指定一个任意的高值，因为它可能导致启动时崩溃。要观察网络集"
"群的使用情况，可以使用 man:netstat[1] 的 `-m`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1519
msgid ""
"The `kern.ipc.nmbclusters` loader tunable should be used to tune this at boot time.  Only older versions of FreeBSD will require the use of the "
"`NMBCLUSTERS` kernel man:config[8] option."
msgstr "应该使用 `kern.ipc.nmbclusters` loader 可调参数来在启动时进行调整。只有老版本的 FreeBSD 需要使用 `NMBCLUSTERS` 内核 man:config[8] 选项。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1524
msgid ""
"For busy servers that make extensive use of the man:sendfile[2] system call, it may be necessary to increase the number of man:sendfile[2] "
"buffers via the `NSFBUFS` kernel configuration option or by setting its value in [.filename]#/boot/loader.conf# (see man:loader[8] for details).  "
"A common indicator that this parameter needs to be adjusted is when processes are seen in the `sfbufa` state.  The man:sysctl[8] variable `kern."
"ipc.nsfbufs` is read-only.  This parameter nominally scales with `kern.maxusers`, however it may be necessary to tune accordingly."
msgstr ""
"对于大量使用 man:sendfile[2] 系统调用的繁忙服务器，可能需要通过 `NSFBUFS` 内核配置选项或在 [.filename]#/boot/loader.conf# 中设置其值来增加"
" man:sendfile[2] 缓冲区的数量 (详见 man:loader[8] 的手册)。这个参数需要调整的一个常见指标是当进程被看到处于 `sfbufa` 状态时。man:sysctl[8] 变量"
" `kern.ipc.nsfbufs` 是只读的。这个参数在名义上与 `kern.maxusers` 呈比例关系，但可能需要进行相应的调整。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1528
msgid ""
"Even though a socket has been marked as non-blocking, calling man:sendfile[2] on the non-blocking socket may result in the man:sendfile[2] call "
"blocking until enough ``struct sf_buf``'s are made available."
msgstr ""
"即使一个套接字被标记为非阻塞，在非阻塞套接字上调用 man:sendfile[2] 可能会导致 man:sendfile[2] 的调用阻塞，直到有足够的 `struct sf_buf` 可用。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1530
#, no-wrap
msgid "`net.inet.ip.portrange.*`"
msgstr "`net.inet.ip.portrange.*`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1542
msgid ""
"The `net.inet.ip.portrange.*` man:sysctl[8] variables control the port number ranges automatically bound to `TCP` and `UDP` sockets.  There are "
"three ranges: a low range, a default range, and a high range.  Most network programs use the default range which is controlled by `net.inet.ip."
"portrange.first` and `net.inet.ip.portrange.last`, which default to `1024` and `5000`, respectively.  Bound port ranges are used for outgoing "
"connections and it is possible to run the system out of ports under certain circumstances.  This most commonly occurs when running a heavily "
"loaded web proxy.  The port range is not an issue when running a server which handles mainly incoming connections, such as a web server, or has a "
"limited number of outgoing connections, such as a mail relay.  For situations where there is a shortage of ports, it is recommended to increase "
"`net.inet.ip.portrange.last` modestly.  A value of `10000`, `20000` or `30000` may be reasonable. Consider firewall effects when changing the "
"port range.  Some firewalls may block large ranges of ports, usually low-numbered ports, and expect systems to use higher ranges of ports for "
"outgoing connections.  For this reason, it is not recommended that the value of `net.inet.ip.portrange.first` be lowered."
msgstr ""
"`net.inet.ip.portrange.*` man:sysctl[8] 变量控制自动绑定到 `TCP` 和 `UDP` 套接字的端口号范围，其中有三个范围：一个低范围，一个默认范围和一个高范"
"围。大多数网络程序使用默认范围，它由 `net.inet.ip.portrange.first` 和 `net.inet.ip.portrange.last` 控制，它们的默认值分别为 `1024` 和 `5000`。绑定"
"的端口范围用于出站连接，在某些情况下，系统有可能运行到端口之外。这种情况最常发生在运行一个高负荷的网络代理时。当运行一个主要处理传入连接的服务器，"
"如 Web 服务器，或有有限数量的传出连接，如邮件中转时，端口范围不是问题。对于端口不足的情况，建议适度增加 `net.inet.ip.portrange.last`。`10000`、"
"`20000` 或 `30000` 的值可能是合理的。在改变端口范围时要考虑到防火墙的影响。一些防火墙可能会阻止大范围的端口，通常是低编号的端口，并希望系统使用较"
"高范围的端口进行外发连接。出于这个原因，不建议降低 `net.inet.ip.portrange.first` 的值。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1543
#, no-wrap
msgid "`TCP` Bandwidth Delay Product"
msgstr "`TCP` 带宽延迟产品"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1547
msgid ""
"`TCP` bandwidth delay product limiting can be enabled by setting the `net.inet.tcp.inflight.enable` man:sysctl[8] variable to `1`.  This "
"instructs the system to attempt to calculate the bandwidth delay product for each connection and limit the amount of data queued to the network "
"to just the amount required to maintain optimum throughput."
msgstr ""
"`TCP` 带宽延迟乘积限制可以通过将 `net.inet.tcp.inflight.enable` man:sysctl[8] 变量设置为 `1` 来启用。这指示系统尝试计算每个连接的带宽延迟乘积，并"
"将排入网络的数据量限制在维持最佳吞吐量所需的数量。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1556
msgid ""
"This feature is useful when serving data over modems, Gigabit Ethernet, high speed `WAN` links, or any other link with a high bandwidth delay "
"product, especially when also using window scaling or when a large send window has been configured.  When enabling this option, also set `net."
"inet.tcp.inflight.debug` to `0` to disable debugging.  For production use, setting `net.inet.tcp.inflight.min` to at least `6144` may be "
"beneficial.  Setting high minimums may effectively disable bandwidth limiting, depending on the link.  The limiting feature reduces the amount of "
"data built up in intermediate route and switch packet queues and reduces the amount of data built up in the local host's interface queue.  With "
"fewer queued packets, interactive connections, especially over slow modems, will operate with lower _Round Trip Times_.  This feature only "
"effects server side data transmission such as uploading.  It has no effect on data reception or downloading."
msgstr ""
"当通过调制解调器、千兆以太网、高速广域网链路或任何其他具有高带宽延迟积的链路提供数据时，这一功能非常有用，特别是当同时使用窗口缩放或配置了大的发送"
"窗口时。当启用这个选项时，还要将 `net.inet.tcp.inflight.debug` 设置为 `0`，以禁用调试。对于生产使用，将 `net.inet.tcp.inflight.min` 设置为至少 "
"`6144` 可能是有益的。设置高的最小值可能会有效地禁用带宽限制，这取决于链路的情况。限制功能减少了中间路由和交换机数据包队列中积累的数据量，并减少了"
"本地主机接口队列中积累的数据量。由于排队的数据量较少，交互式连接，特别是通过慢速调制解调器，将以较低的 _往返时间运行_。这个功能只影响服务器端的数"
"据传输，如上传。它对数据接收或下载没有影响。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1562
msgid ""
"Adjusting `net.inet.tcp.inflight.stab` is _not_ recommended.  This parameter defaults to `20`, representing 2 maximal packets added to the "
"bandwidth delay product window calculation.  The additional window is required to stabilize the algorithm and improve responsiveness to changing "
"conditions, but it can also result in higher man:ping[8] times over slow links, though still much lower than without the inflight algorithm.  In "
"such cases, try reducing this parameter to `15`, `10`, or `5` and reducing `net.inet.tcp.inflight.min` to a value such as `3500` to get the "
"desired effect.  Reducing these parameters should be done as a last resort only."
msgstr ""
"不建议调整 `net.inet.tcp.inflight.stab`。这个参数的默认值是 `20`，代表在计算带宽延迟乘积窗口时增加 2 个最大的数据包。额外的窗口是稳定算法和提高对"
"变化条件的反应能力所必需的，但它也可能导致在慢速链路上更高的 man:ping[8] 时间，尽管仍然比没有 inflight 算法时低得多。在这种情况下，可以尝试把这个"
"参数减少到 `15`、`10` 或 `5`，并把 `net.inet.tcp.inflight.min` 减少到 `3500` 这样一个值，以获得理想的效果。减少这些参数应该只作为最后的手段来做。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1563
#, no-wrap
msgid "Virtual Memory"
msgstr "虚拟内存"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1565
#, no-wrap
msgid "`kern.maxvnodes`"
msgstr "`kern.maxvnodes`"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1572
msgid ""
"A vnode is the internal representation of a file or directory.  Increasing the number of vnodes available to the operating system reduces disk I/"
"O.  Normally, this is handled by the operating system and does not need to be changed.  In some cases where disk I/O is a bottleneck and the "
"system is running out of vnodes, this setting needs to be increased.  The amount of inactive and free RAM will need to be taken into account."
msgstr ""
"一个虚拟节点（vnode）是一个文件或目录的内部代表。增加操作系统可用的虚拟节点的数量可以减少磁盘 I/O。通常情况下，这是由操作系统处理的，不需要改变。"
"在某些情况下，磁盘 I/O 是一个瓶颈，系统正在耗尽 vnodes，这个设置需要增加。不活动的和空闲的 RAM 的数量将需要被考虑在内。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1574
msgid "To see the current number of vnodes in use:"
msgstr "要查看当前正在使用的虚拟节点的数量："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1579
#, no-wrap
msgid ""
"# sysctl vfs.numvnodes\n"
"vfs.numvnodes: 91349\n"
msgstr ""
"# sysctl vfs.numvnodes\n"
"vfs.numvnodes: 91349\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1582
msgid "To see the maximum vnodes:"
msgstr "查看虚拟节点的最大数量："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1587
#, no-wrap
msgid ""
"# sysctl kern.maxvnodes\n"
"kern.maxvnodes: 100000\n"
msgstr ""
"# sysctl kern.maxvnodes\n"
"kern.maxvnodes: 100000\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1593
msgid ""
"If the current vnode usage is near the maximum, try increasing `kern.maxvnodes` by a value of `1000`.  Keep an eye on the number of `vfs."
"numvnodes`.  If it climbs up to the maximum again, `kern.maxvnodes` will need to be increased further.  Otherwise, a shift in memory usage as "
"reported by man:top[1] should be visible and more memory should be active."
msgstr ""
"如果当前的 vnode 使用量接近最大值，可以尝试将 `kern.maxvnodes` 增加到 `1000` 的数值。密切关注 `vfs.numvnodes` 的数量。如果它再次攀升到最大值，"
"`kern.maxvnodes` 将需要进一步增加。否则，man:top[1] 报告的内存使用的转变应该是可见的，更多的内存应该被需要。"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1595
#, no-wrap
msgid "Adding Swap Space"
msgstr "添加交换空间"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1599
msgid ""
"Sometimes a system requires more swap space.  This section describes two methods to increase swap space: adding swap to an existing partition or "
"new hard drive, and creating a swap file on an existing partition."
msgstr "有时，系统需要更多的交换空间。本节介绍了两种增加交换空间的方法：将交换空间添加到现有分区或新的硬盘上、在现有分区上创建一个交换文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1601
msgid ""
"For information on how to encrypt swap space, which options exist, and why it should be done, refer to crossref:disks[swap-encrypting,“Encrypting "
"Swap”]."
msgstr "关于如何加密交换空间、存在哪些选项以及为什么要这样做的信息，请参考 crossref:disks[swap-encrypting,\"加密交换空间\"]。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1603
#, no-wrap
msgid "Swap on a New Hard Drive or Existing Partition"
msgstr "将交换空间添加到现有分区或新的硬盘上"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1607
msgid ""
"Adding a new hard drive for swap gives better performance than using a partition on an existing drive.  Setting up partitions and hard drives is "
"explained in crossref:disks[disks-adding,“Adding Disks”] while crossref:bsdinstall[configtuning-initial,“Designing the Partition Layout”] "
"discusses partition layouts and swap partition size considerations."
msgstr ""
"添加一个新的硬盘用于交换，比使用现有硬盘上的分区有更好的性能。设置分区和硬盘在 crossref:disks[disks-adding,“添加磁盘”] 中解释，"
"而 crossref:bsdinstall[configtuning-initial,“设计分区布局”] 讨论了分区布局和交换分区大小的考虑。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1610
msgid "Use `swapon` to add a swap partition to the system.  For example:"
msgstr "使用 `swapon` 向系统添加一个交换分区，比如说："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1614
#, no-wrap
msgid "# swapon /dev/ada1s1b\n"
msgstr "# swapon /dev/ada1s1b\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1622
msgid ""
"It is possible to use any partition not currently mounted, even if it already contains data.  Using `swapon` on a partition that contains data "
"will overwrite and destroy that data.  Make sure that the partition to be added as swap is really the intended partition before running `swapon`."
msgstr ""
"可以使用任何当前未挂载的分区，即使它已经包含数据，但在包含数据的分区上使用 `swapon` 会覆盖并破坏这些数据。在运行 `swapon` 之前，请确保被添加为交换"
"的分区确实是预定的分区。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1625
msgid "To automatically add this swap partition on boot, add an entry to [.filename]#/etc/fstab#:"
msgstr "要在启动时自动添加这个交换分区，请在 [.filename]#/etc/fstab# 中添加一个条目："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1629
#, no-wrap
msgid "/dev/ada1s1b\tnone\tswap\tsw\t0\t0\n"
msgstr "/dev/ada1s1b\tnone\tswap\tsw\t0\t0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1633
msgid ""
"See man:fstab[5] for an explanation of the entries in [.filename]#/etc/fstab#.  More information about `swapon` can be found in man:swapon[8]."
msgstr "关于 [.filename]#/etc/fstab# 中的条目的解释，参见 man:fstab[5] 的手册 。关于 `swapon` 的更多信息可以在 man:swapon[8] 的手册页中找到。"

#. type: Block title
#: content/zh-cn/books/handbook/config/_index.adoc:1635 content/zh-cn/books/handbook/config/_index.adoc:1643
#, no-wrap
msgid "Creating a Swap File"
msgstr "创建一个 Swap 文件"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1638
msgid "These examples create a 512M swap file called [.filename]#/usr/swap0# instead of using a partition."
msgstr "这些例子创建了一个 512M 的交换文件，名为 [.filename]#/usr/swap0#，而不是使用一个分区。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1641
msgid ""
"Using swap files requires that the module needed by man:md[4] has either been built into the kernel or has been loaded before swap is enabled.  "
"See crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel] for information about building a custom kernel."
msgstr ""
"使用 swap 文件需要确保 man:md[4] 所需要的模块已经建立在内核中，或者在启用 swap 之前已经加载。请参阅 crossref:kernelconfig[kernelconfig,配置 FreeBSD 内核] "
"以了解关于建立自定义内核的信息。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1648
msgid "Create the swap file:"
msgstr "创建一个 Swap 文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1652
#, no-wrap
msgid "# dd if=/dev/zero of=/usr/swap0 bs=1m count=512\n"
msgstr "# dd if=/dev/zero of=/usr/swap0 bs=1m count=512\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1655
msgid "Set the proper permissions on the new file:"
msgstr "给这个新文件设置合适的权限："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1659
#, no-wrap
msgid "# chmod 0600 /usr/swap0\n"
msgstr "# chmod 0600 /usr/swap0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1662
msgid "Inform the system about the swap file by adding a line to [.filename]#/etc/fstab#:"
msgstr "通过向 [.filename]#/etc/fstab# 添加以下一行来告知系统 Swap 文件的存在："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1666
#, no-wrap
msgid "md\tnone\tswap\tsw,file=/usr/swap0,late\t0\t0\n"
msgstr "md\tnone\tswap\tsw,file=/usr/swap0,late\t0\t0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1669
msgid "Swap space will be added on system startup. To add swap space immediately, use man:swapon[8]:"
msgstr "系统重新启动时，Swap 空间将会被自动加载。欲使其立即生效，使用如下 man:swapon[8] 指令："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1673
#, no-wrap
msgid "# swapon -aL\n"
msgstr "# swapon -aL\n"

#. type: Title ==
#: content/zh-cn/books/handbook/config/_index.adoc:1678
#, no-wrap
msgid "Power and Resource Management"
msgstr "电源和资源管理"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1688
msgid ""
"It is important to utilize hardware resources in an efficient manner.  Power and resource management allows the operating system to monitor "
"system limits and to possibly provide an alert if the system temperature increases unexpectedly.  An early specification for providing power "
"management was the Advanced Power Management (APM) facility.  APM controls the power usage of a system based on its activity.  However, it was "
"difficult and inflexible for operating systems to manage the power usage and thermal properties of a system.  The hardware was managed by the "
"BIOS and the user had limited configurability and visibility into the power management settings.  The APMBIOS is supplied by the vendor and is "
"specific to the hardware platform.  An APM driver in the operating system mediates access to the APM Software Interface, which allows management "
"of power levels."
msgstr ""
"以一种有效的方式利用硬件资源是很重要的。电源和资源管理允许操作系统监控系统极限，并在系统温度意外升高时可能提供警报。提供电源管理的一个早期规范是高"
"级电源管理（APM）设施。APM 根据系统的活动来控制其电源的使用。然而，对于操作系统来说，管理一个系统的电源使用和热属性是困难的，也不灵活。硬件是由 "
"BIOS 管理的，用户对电源管理设置的可配置性和可见性有限。APMBIOS 是由供应商提供的，是针对硬件平台的。操作系统中的 APM 驱动程序介导对 APM 软件接口的"
"访问，该接口允许对功率水平进行管理。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1696
msgid ""
"There are four major problems in APM.  First, power management is done by the vendor-specific BIOS, separate from the operating system.  For "
"example, the user can set idle-time values for a hard drive in the APMBIOS so that, when exceeded, the BIOS spins down the hard drive without the "
"consent of the operating system.  Second, the APM logic is embedded in the BIOS, and it operates outside the scope of the operating system.  This "
"means that users can only fix problems in the APMBIOS by flashing a new one into the ROM, which is a dangerous procedure with the potential to "
"leave the system in an unrecoverable state if it fails.  Third, APM is a vendor-specific technology, meaning that there is a lot of duplication "
"of efforts and bugs found in one vendor's BIOS may not be solved in others.  Lastly, the APMBIOS did not have enough room to implement a "
"sophisticated power policy or one that can adapt well to the purpose of the machine."
msgstr ""
"APM 有四个主要问题。首先，电源管理是由供应商特定的 BIOS 完成的，与操作系统分开。例如，用户可以在 APMBIOS 中为硬盘设置空闲时间值，这样一来，如果超"
"过了空闲时间，BIOS 就会在未经操作系统同意的情况下将硬盘旋转下来。第二，APM 逻辑被嵌入到 BIOS 中，它在操作系统的范围之外运行。这意味着用户只能通过"
"将新的 APMBIOS 闪入 ROM 来解决 APMBIOS 的问题，这是一个危险的程序，一旦失败，有可能使系统处于无法恢复的状态。第三，APM 是一项针对供应商的技术，这"
"意味着有很多重复的工作，在一个供应商的 BIOS 中发现的错误可能无法在其他供应商中得到解决。最后，APMBIOS 没有足够的空间来实现复杂的电源策略或能够很好"
"地适应机器的用途。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1701
msgid ""
"The Plug and Play BIOS (PNPBIOS) was unreliable in many situations.  PNPBIOS is 16-bit technology, so the operating system has to use 16-bit "
"emulation in order to interface with PNPBIOS methods.  FreeBSD provides an APM driver as APM should still be used for systems manufactured at or "
"before the year 2000.  The driver is documented in man:apm[4]."
msgstr ""
"在很多情况下即插即用 BIOS（PNPBIOS）都不可靠。PNPBIOS 是 16 位的技术，所以操作系统必须使用 16 位的仿真技术才能与 PNPBIOS 方法对接。FreeBSD 提供了"
"一个 APM 驱动程序，因为在 2000 年或之前制造的系统仍应使用 APM。这个驱动在 man:apm[4] 中做了说明。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1705
msgid ""
"The successor to APM is the Advanced Configuration and Power Interface (ACPI).  ACPI is a standard written by an alliance of vendors to provide "
"an interface for hardware resources and power management.  It is a key element in _Operating System-directed configuration and Power Management_ "
"as it provides more control and flexibility to the operating system."
msgstr ""
"APM 的后续版本是高级配置和电源接口（ACPI）。ACPI 是一个由供应商联盟编写的标准，为硬件资源和电源管理提供一个接口。它是 _操作系统引导的配置和电源管"
"理_ 的一个关键因素，因为它为操作系统提供了更多的控制和灵活性。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1708
msgid ""
"This chapter demonstrates how to configure ACPI on FreeBSD.  It then offers some tips on how to debug ACPI and how to submit a problem report "
"containing debugging information so that developers can diagnosis and fix ACPI issues."
msgstr ""
"本章演示了如何在 FreeBSD 上配置 ACPI。然后，它提供了一些关于如何调试 ACPI 的提示，以及如何提交包含调试信息的问题报告，以便开发人员能够诊断和修复 "
"ACPI 问题。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1710
#, no-wrap
msgid "Configuring ACPI"
msgstr "配置 ACPI"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1715
msgid ""
"In FreeBSD the man:acpi[4] driver is loaded by default at system boot and should _not_ be compiled into the kernel.  This driver cannot be "
"unloaded after boot because the system bus uses it for various hardware interactions.  However, if the system is experiencing problems, ACPI can "
"be disabled altogether by rebooting after setting `hint.acpi.0.disabled=\"1\"` in [.filename]#/boot/loader.conf# or by setting this variable at "
"the loader prompt, as described in crossref:boot[boot-loader,“Stage Three”]."
msgstr ""
"在 FreeBSD 中，man:acpi[4] 驱动在系统启动时被默认加载，不应该被编译到内核中。这个驱动在启动后不能被卸载，因为系统总线使用它进行各种硬件交互。然"
"而，如果系统遇到问题，可以通过在 [.filename]#/boot/loader.conf# 中设置 `hint.acpi.0.disabled=\"1\"` 后重启，或者通过在加载器提示下设置这个变量来完"
"全禁用 ACPI，如 crossref:boot[boot-loader,“第三阶段”] 所述。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1720
msgid "ACPI and APM cannot coexist and should be used separately.  The last one to load will terminate if the driver notices the other is running."
msgstr "ACPI 和 APM 不能共存，应该分开使用。如果驱动程序注意到另一个正在运行，最后加载的那个将终止。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1725
msgid ""
"ACPI can be used to put the system into a sleep mode with `acpiconf`, the `-s` flag, and a number from `1` to `5`.  Most users only need `1` "
"(quick suspend to RAM) or `3` (suspend to RAM).  Option `5` performs a soft-off which is the same as running `halt -p`."
msgstr ""
"ACPI可以用 `acpiconf`、`-s` 标志和 `1` 到 `5` 的数字来使系统进入睡眠模式。大多数用户只需要 `1`（快速挂起到 RAM）或 `3`（挂起到 RAM）。选项 `5` 执"
"行软关闭，与运行 `halt -p` 相同。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1730
msgid ""
"The man:acpi_video[4] driver uses link:https://uefi.org/specs/ACPI/6.4/Apx_B_Video_Extensions/Apx_B_Video_Extensions.html[ACPI Video Extensions] "
"to control display switching and backlight brightness.  It must be loaded after any of the DRM kernel modules.  After loading the driver, the kbd:"
"[Fn] brightness keys will change the brightness of the screen.  It is possible to check the ACPI events by inspecting [.filename]#/var/run/devd."
"pipe#:"
msgstr ""
"man:acpi_video[4] 驱动程序使用 link:https://uefi.org/specs/ACPI/6.4/Apx_B_Video_Extensions/Apx_B_Video_Extensions.html[ACPI 视频扩展] 来控制显示切"
"换和背光亮度。它必须在任何 DRM 内核模块之后加载。在加载该驱动后，kbd:[Fn] 亮度键将改变屏幕的亮度。可以通过检查 [.filename]#/var/run/devd.pipe# 来"
"检查 ACPI 事件："

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1738
msgid ""
"...  # cat /var/run/devd.pipe !system=ACPI subsystem=Video type=brightness notify=62 !system=ACPI subsystem=Video type=brightness notify=63 !"
"system=ACPI subsystem=Video type=brightness notify=64 ..."
msgstr ""
"...  # cat /var/run/devd.pipe !system=ACPI subsystem=Video type=brightness notify=62 !system=ACPI subsystem=Video type=brightness notify=63 !"
"system=ACPI subsystem=Video type=brightness notify=64 ..."

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1741
msgid "Other options are available using `sysctl`.  Refer to man:acpi[4] and man:acpiconf[8] for more information."
msgstr "其他选项可以使用 `sysctl`。更多信息请参考 man:acpi[4] 和 man:acpiconf[8] 的手册。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1743
#, no-wrap
msgid "Common Problems"
msgstr "常见错误"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1750
msgid ""
"ACPI is present in all modern computers that conform to the ia32 (x86) and amd64 (AMD) architectures.  The full standard has many features "
"including CPU performance management, power planes control, thermal zones, various battery systems, embedded controllers, and bus enumeration.  "
"Most systems implement less than the full standard.  For instance, a desktop system usually only implements bus enumeration while a laptop might "
"have cooling and battery management support as well.  Laptops also have suspend and resume, with their own associated complexity."
msgstr ""
"ACPI 存在于所有符合 ia32（x86）和 amd64（AMD）架构的现代计算机中。完整的标准有许多功能，包括 CPU 性能管理、电源平面控制、热区（thermal zones）、各"
"种电池系统、嵌入式控制器和总线枚举。大多数系统实现的功能比完整标准要少。例如，台式机系统通常只实现总线枚举，而笔记本电脑可能也有冷却和电池管理支"
"持。笔记本电脑也有挂起和恢复功能，并有其相关的复杂性。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1754
msgid ""
"An ACPI-compliant system has various components.  The BIOS and chipset vendors provide various fixed tables, such as FADT, in memory that specify "
"things like the APIC map (used for SMP), config registers, and simple configuration values.  Additionally, a bytecode table, the Differentiated "
"System Description Table DSDT, specifies a tree-like name space of devices and methods."
msgstr ""
"一个符合 ACPI 标准的系统有各种组件。BIOS 和芯片组供应商在内存中提供各种固定表，如 FADT，指定 APIC 地图（用于 SMP）、配置寄存器和简单的配置值等。此"
"外，一个字节码表，即差异化系统描述表 DSDT，指定了一个树状的设备和方法的名称空间。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1760
msgid ""
"The ACPI driver must parse the fixed tables, implement an interpreter for the bytecode, and modify device drivers and the kernel to accept "
"information from the ACPI subsystem.  For FreeBSD, Intel(R) has provided an interpreter (ACPI-CA) that is shared with Linux(R) and NetBSD.  The "
"path to the ACPI-CA source code is [.filename]#src/sys/contrib/dev/acpica#.  The glue code that allows ACPI-CA to work on FreeBSD is in [."
"filename]#src/sys/dev/acpica/Osd#.  Finally, drivers that implement various ACPI devices are found in [.filename]#src/sys/dev/acpica#."
msgstr ""
"ACPI 驱动程序必须解析这些固定的表格，实现字节码的解释器，并修改设备驱动程序和内核以接受来自 ACPI 子系统的信息。对于FreeBSD，Intel(R) 提供了一个解"
"释器（ACPI-CA），与 Linux(R) 和 NetBSD 共享。ACPI-CA 源代码的路径是 [.filename]#src/sys/contrib/dev/acpica#。允许 ACPI-CA 在 FreeBSD 上工作的胶合"
"代码是在 [.filename]#src/sys/dev/acpica/Osd#。最后，实现各种 ACPI 设备的驱动在 [.filename]#src/sys/dev/acpica# 中找到。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1764
msgid ""
"For ACPI to work correctly, all the parts have to work correctly.  Here are some common problems, in order of frequency of appearance, and some "
"possible workarounds or fixes.  If a fix does not resolve the issue, refer to <<ACPI-submitdebug>> for instructions on how to submit a bug report."
msgstr ""
"要使 ACPI 正确工作，所有的部分都必须正确工作。下面是一些常见的问题，按照出现的频率排列，以及一些可能的解决方法或修复方法。如果修复方法不能解决问"
"题，请参阅“获取和提交调试信息”，了解如何提交错误报告的说明。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1765
#, no-wrap
msgid "Mouse Issues"
msgstr "鼠标问题"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1769
msgid ""
"In some cases, resuming from a suspend operation will cause the mouse to fail.  A known work around is to add `hint.psm.0.flags=\"0x3000\"` to [."
"filename]#/boot/loader.conf#."
msgstr "在某些情况下，从暂停操作中恢复会导致鼠标失败。一个已知的解决方法是在 [.filename]#/boot/loader.conf# 中添加 `hint.psm.0.flags=\"0x3000\"`。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1770
#, no-wrap
msgid "Suspend/Resume"
msgstr "暂停/恢复"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1776
msgid ""
"ACPI has three suspend to RAM (STR) states, `S1`-`S3`, and one suspend to disk state (STD), called `S4`.  STD can be implemented in two separate "
"ways.  The ``S4``BIOS is a BIOS-assisted suspend to disk and ``S4``OS is implemented entirely by the operating system.  The normal state the "
"system is in when plugged in but not powered up is \"soft off\" (`S5`)."
msgstr ""
"ACPI 有三种暂停到 RAM（STR）的状态，`S1`-`S3`，和一种暂停到磁盘的状态（STD），称为 `S4`。STD 可以用两种不同的方式实现。``S4``BIOS 是一个由 BIOS 协"
"助的挂起到磁盘的状态，``S4``OS 则完全由操作系统实现。当插上电源但不开机时，系统所处的正常状态是 \"软关闭\"（`S5`）。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1779
msgid "Use `sysctl hw.acpi` to check for the suspend-related items.  These example results are from a Thinkpad:"
msgstr "使用 `sysctl hw.acpi` 来检查与挂起有关的项目。这些例子的结果来自 Thinkpad："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1784
#, no-wrap
msgid ""
"hw.acpi.supported_sleep_state: S3 S4 S5\n"
"hw.acpi.s4bios: 0\n"
msgstr ""
"hw.acpi.supported_sleep_state: S3 S4 S5\n"
"hw.acpi.s4bios: 0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1788
msgid ""
"Use `acpiconf -s` to test `S3`, `S4`, and `S5`.  An `s4bios` of one (`1`) indicates ``S4``BIOS support instead of `S4` operating system support."
msgstr "使用 `acpiconf -s` 来测试 `S3`、`S4` 和 `S5`。`s4bios` 为一（`1`）表示 ``S4``BIOS 的支持而不是 `S4` 操作系统的支持。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1794
msgid ""
"When testing suspend/resume, start with `S1`, if supported.  This state is most likely to work since it does not require much driver support.  No "
"one has implemented `S2`, which is similar to `S1`.  Next, try `S3`.  This is the deepest STR state and requires a lot of driver support to "
"properly reinitialize the hardware."
msgstr ""
"当测试挂起/恢复时，如果支持，从 `S1` 开始。这个状态最有可能工作，因为它不需要太多的驱动支持。没有人实现 `S2`，它与 `S1` 类似。接下来，尝试 `S3`。"
"这是最深的 STR 状态，需要大量的驱动支持来正确地重新初始化硬件。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1797
msgid ""
"A common problem with suspend/resume is that many device drivers do not save, restore, or reinitialize their firmware, registers, or device "
"memory properly.  As a first attempt at debugging the problem, try:"
msgstr "暂停/恢复的一个常见问题是，许多设备驱动程序不能正确地保存、恢复或重新初始化其固件、寄存器或设备内存。作为调试问题的第一次尝试，请尝试："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1803
#, no-wrap
msgid ""
"# sysctl debug.bootverbose=1\n"
"# sysctl debug.acpi.suspend_bounce=1\n"
"# acpiconf -s 3\n"
msgstr ""
"# sysctl debug.bootverbose=1\n"
"# sysctl debug.acpi.suspend_bounce=1\n"
"# acpiconf -s 3\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1808
msgid ""
"This test emulates the suspend/resume cycle of all device drivers without actually going into `S3` state.  In some cases, problems such as losing "
"firmware state, device watchdog time out, and retrying forever, can be captured with this method.  Note that the system will not really enter "
"`S3` state, which means devices may not lose power, and many will work fine even if suspend/resume methods are totally missing, unlike real `S3` "
"state."
msgstr ""
"这个测试模拟了所有设备驱动程序的暂停/恢复周期，而没有实际进入 `S3` 状态。在某些情况下，诸如丢失固件状态、设备看门狗超时、永远重试等问题，都可以用"
"这种方法捕捉到。注意，系统不会真正进入 `S3` 状态，这意味着设备可能不会失去电源，即使暂停/恢复方法完全消失，许多设备也能正常工作，这与真正的 `S3` "
"状态不同。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1810
msgid ""
"If the previous test worked, on a laptop it is possible to configure the system to suspend into `S3` on lid close and resume when it is open back "
"again:"
msgstr "如果前面的测试有效，在笔记本电脑上可以配置系统在关闭盖子时暂停进入 `S3` ，并在再次打开时恢复："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1814
#, no-wrap
msgid "# sysctl hw.acpi.lid_switch_state=S3\n"
msgstr "# sysctl hw.acpi.lid_switch_state=S3\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1817
msgid "This change can be made persistent across reboots:"
msgstr "这一变化可以在重启后持续进行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1821
#, no-wrap
msgid "# echo 'hw.acpi.lid_switch_state=S3' >> /etc/sysctl.conf\n"
msgstr "# echo 'hw.acpi.lid_switch_state=S3' >> /etc/sysctl.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1824
msgid ""
"Harder cases require additional hardware, such as a serial port and cable for debugging through a serial console, a Firewire port and cable for "
"using man:dcons[4], and kernel debugging skills."
msgstr ""
"更困难的情况需要额外的硬件，例如通过串行控制台进行调试的串行端口和电缆，使用 man:dcons[4] 的火线端口（Firewire port）和电缆，以及内核调试技能。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1831
msgid ""
"To help isolate the problem, unload as many drivers as possible.  If it works, narrow down which driver is the problem by loading drivers until "
"it fails again.  Typically, binary drivers like [.filename]#nvidia.ko#, display drivers, and USB will have the most problems while Ethernet "
"interfaces usually work fine.  If drivers can be properly loaded and unloaded, automate this by putting the appropriate commands in [.filename]#/"
"etc/rc.suspend# and [.filename]#/etc/rc.resume#.  Try setting `hw.acpi.reset_video` to `1` if the display is messed up after resume.  Try setting "
"longer or shorter values for `hw.acpi.sleep_delay` to see if that helps."
msgstr ""
"为了帮助隔离问题，尽可能多地卸载驱动程序。如果它能工作，通过加载驱动程序来缩小问题所在，直到它再次失败。通常，像 [.filename]#nvidia.ko# 这样的二进"
"制驱动、显示驱动和 USB 会有最多的问题，而以太网接口通常工作良好。如果驱动程序可以被正确加载和卸载，可以通过在 [.filename]#/etc/rc.suspend# 和"
" [.filename]#/etc/rc.resume# 中添加适当的命令来实现自动化。如果恢复后显示混乱，试着将 `hw.acpi.reset_video` 设置为 `1`。尝试为 `hw.acpi.sleep_delay` "
"设置更长或更短的值，看看是否有帮助。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1837
msgid ""
"Try loading a recent Linux(R) distribution to see if suspend/resume works on the same hardware.  If it works on Linux(R), it is likely a FreeBSD "
"driver problem.  Narrowing down which driver causes the problem will assist developers in fixing the problem.  Since the ACPI maintainers rarely "
"maintain other drivers, such as sound or ATA, any driver problems should also be posted to the {freebsd-current} and mailed to the driver "
"maintainer.  Advanced users can include debugging man:printf[3]s in a problematic driver to track down where in its resume function it hangs."
msgstr ""
"试着加载一个最新的 Linux(R) 发行版，看看挂起/恢复是否在相同的硬件上工作。如果它在 Linux(R) 上有效，那就很可能是 FreeBSD 的驱动问题。缩小哪个驱动导"
"致问题的范围将有助于开发人员解决这个问题。由于 ACPI 的维护者很少维护其他的驱动，例如声音或 ATA，任何驱动问题都应该发布到 {freebsd-current} 邮件列"
"表中并邮寄给驱动维护者。高级用户可以在有问题的驱动程序中加入调试 man:printf[3] 的功能，以追踪它在恢复功能的哪个地方挂掉。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1841
msgid ""
"Finally, try disabling ACPI and enabling APM instead.  If suspend/resume works with APM, stick with APM, especially on older hardware "
"(pre-2000).  It took vendors a while to get ACPI support correct and older hardware is more likely to have BIOS problems with ACPI."
msgstr ""
"最后，尝试禁用 ACPI，启用 APM。如果挂起/恢复功能在 APM 下有效，那就坚持使用 APM，特别是在旧硬件上（2000 年以前）。供应商花了一些时间来纠正对 ACPI "
"的支持，而且旧硬件更有可能在 ACPI 上出现 BIOS 问题。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1842
#, no-wrap
msgid "System Hangs"
msgstr "系统挂起"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1846
msgid ""
"Most system hangs are a result of lost interrupts or an interrupt storm.  Chipsets may have problems based on boot, how the BIOS configures "
"interrupts before correctness of the APIC (MADT) table, and routing of the System Control Interrupt (SCI)."
msgstr ""
"大多数系统挂起是由于中断丢失或中断风暴造成的。芯片组可能会根据启动、BIOS 如何在 APIC（MADT）表的正确性之前配置中断，以及系统控制中断（SCI）的路由"
"而出现问题。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1850
msgid ""
"Interrupt storms can be distinguished from lost interrupts by checking the output of `vmstat -i` and looking at the line that has `acpi0`.  If "
"the counter is increasing at more than a couple per second, there is an interrupt storm.  If the system appears hung, try breaking to DDB (kbd:"
"[CTRL+ALT+ESC] on console) and type `show interrupts`."
msgstr ""
"中断风暴可以通过检查 `vmstat -I` 的输出并查看有 `acpi0` 的那一行来区别于丢失的中断。如果计数器的增加速度超过每秒几次，就有一个中断风暴。如果系统出"
"现挂起的情况，尝试中断到 DDB（控制台的 kbd:[CTRL+ALT+ESC]）并输入 `show interrupts`。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1852
msgid "When dealing with interrupt problems, try disabling APIC support with `hint.apic.0.disabled=\"1\"` in [.filename]#/boot/loader.conf#."
msgstr "当处理中断问题时，尝试在 [.filename]#/boot/loader.conf# 中用 `hint.apic.0.disabled=\"1\"` 禁用 APIC 支持。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1853
#, no-wrap
msgid "Panics"
msgstr "Panics"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1860
msgid ""
"Panics are relatively rare for ACPI and are the top priority to be fixed.  The first step is to isolate the steps to reproduce the panic, if "
"possible, and get a backtrace.  Follow the advice for enabling `options DDB` and setting up a serial console in crossref:"
"serialcomms[serialconsole-ddb,“Entering the DDB Debugger from the Serial Line”] or setting up a dump partition.  To get a backtrace in DDB, use "
"`tr`.  When handwriting the backtrace, get at least the last five and the top five lines in the trace."
msgstr ""
"Panic 对于 ACPI 来说是比较少见的，而且是最优先修复的。第一步是隔离再现恐慌的步骤，如果可能的话，并得到一个回溯。"
"按照 crossref:serialcomms[serialconsole-ddb,\"从串行线进入 DDB 调试器\"] 中关于启用 `选项DDB` 和设置串行控制台的建议，或者设置一个转储分区。要在 DDB 中获得一个"
"回溯，使用 `tr`。 当手写回溯时，至少要获得回溯中的最后五行和前五行。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1864
msgid ""
"Then, try to isolate the problem by booting with ACPI disabled.  If that works, isolate the ACPI subsystem by using various values of `debug.acpi."
"disable`.  See man:acpi[4] for some examples."
msgstr ""
"然后，尝试通过禁用 ACPI 启动来隔离问题。如果成功了，通过使用 `debug.acpi.disable` 的不同值来隔离 ACPI 子系统。参见 man:acpi[4] 的命令手册以了解一"
"些例子。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1865
#, no-wrap
msgid "System Powers Up After Suspend or Shutdown"
msgstr "系统在暂停和关机之后启动"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1871
msgid ""
"First, try setting `hw.acpi.disable_on_poweroff=\"0\"` in [.filename]#/boot/loader.conf#.  This keeps ACPI from disabling various events during "
"the shutdown process.  Some systems need this value set to `1` (the default) for the same reason.  This usually fixes the problem of a system "
"powering up spontaneously after a suspend or poweroff."
msgstr ""
"首先，尝试在 [.filename]#/boot/loader.conf# 中设置 `hw.acpi.disable_on_poweroff=\"0\"`。这可以防止 ACPI 在关机过程中禁用各种事件，一些系统出于同样"
"的原因需要将这个值设置为 `1`（默认值）。这通常可以解决系统在挂起或关机后自发开机的问题。"

#. type: Title ====
#: content/zh-cn/books/handbook/config/_index.adoc:1873
#, no-wrap
msgid "BIOS Contains Buggy Bytecode"
msgstr "BIOS 含有带 bug 的字节码"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1877
msgid "Some BIOS vendors provide incorrect or buggy bytecode.  This is usually manifested by kernel console messages like this:"
msgstr "一些 BIOS 供应商提供了不正确或有错误的字节码。这通常表现为像这样的内核控制台信息："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1882
#, no-wrap
msgid ""
"ACPI-1287: *** Error: Method execution failed [\\\\_SB_.PCI0.LPC0.FIGD._STA] \\\\\n"
"(Node 0xc3f6d160), AE_NOT_FOUND\n"
msgstr ""
"ACPI-1287: *** Error: Method execution failed [\\\\_SB_.PCI0.LPC0.FIGD._STA] \\\\\n"
"(Node 0xc3f6d160), AE_NOT_FOUND\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1886
msgid ""
"Often, these problems may be resolved by updating the BIOS to the latest revision.  Most console messages are harmless, but if there are other "
"problems, like the battery status is not working, these messages are a good place to start looking for problems."
msgstr ""
"通常，这些问题可以通过更新 BIOS 到最新版本来解决。大多数控制台信息是无害的，但如果有其他问题，如电池状态不工作，这些信息是开始寻找问题的一个好地"
"方。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1887
#, no-wrap
msgid "Overriding the Default AML"
msgstr "覆盖默认的 AML"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1891
msgid ""
"The BIOS bytecode, known as ACPI Machine Language (AML), is compiled from a source language called ACPI Source Language (ASL).  The AML is found "
"in the table known as the Differentiated System Description Table (DSDT)."
msgstr ""
"被称为 ACPI 机器语言（AML）的 BIOS 字节码是由称为 ACPI 源语言（ASL）的源语言编译而成。AML 可以在被称为差异化系统描述表（DSDT）的表格中找到。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1896
msgid ""
"The goal of FreeBSD is for everyone to have working ACPI without any user intervention.  Workarounds are still being developed for common "
"mistakes made by BIOS vendors.  The Microsoft(R) interpreter ([.filename]#acpi.sys# and [.filename]#acpiec.sys#) does not strictly check for "
"adherence to the standard, and thus many BIOS vendors who only test ACPI under Windows(R) never fix their ASL.  FreeBSD developers continue to "
"identify and document which non-standard behavior is allowed by Microsoft(R)'s interpreter and replicate it so that FreeBSD can work without "
"forcing users to fix the ASL."
msgstr ""
"FreeBSD 的目标是让每个人都有工作的 ACPI，而不需要任何用户干预。对于 BIOS 供应商所犯的常见错误，目前仍在开发解决方法。Microsoft(R) 解释器 "
"([.filename]#acpi.sys# 和 [.filename]#acpiec.sys#) 并没有严格检查是否符合标准，因此许多只在 Windows(R) 下测试 ACPI 的 BIOS 供应商从未修复他们的 "
"ASL。FreeBSD 的开发人员继续识别并记录哪些非标准的行为是 Microsoft(R) 的解释器所允许的，并对其进行复制，这样 FreeBSD 就可以在不强迫用户修正 ASL 的"
"情况下工作。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1899
msgid ""
"To help identify buggy behavior and possibly fix it manually, a copy can be made of the system's ASL.  To copy the system's ASL to a specified "
"file name, use `acpidump` with `-t`, to show the contents of the fixed tables, and `-d`, to disassemble the AML:"
msgstr ""
"为了帮助识别有缺陷的行为，并有可能进行手动修复，可以对系统的 ASL 进行复制。要把系统的 ASL 复制到一个指定的文件名下，使用 `acpidump` 的 `-t`，显示"
"固定表的内容，和 `-d`，来反汇编 AML："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1903
#, no-wrap
msgid "# acpidump -td > my.asl\n"
msgstr "# acpidump -td > my.asl\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1907
msgid ""
"Some AML versions assume the user is running Windows(R).  To override this, set `hw.acpi.osname=_\"Windows 2009\"_` in [.filename]#/boot/loader."
"conf#, using the most recent Windows(R) version listed in the ASL."
msgstr ""
"一些AML版本假设用户运行的是 Windows(R)。要覆盖这一点，在 [.filename]#/boot/loader.conf# 中设置 `hw.acpi.osname=_\"Windows 2009\"_`，使用 ASL 中列"
"出的最新的 Windows(R) 版本。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1911
msgid ""
"Other workarounds may require [.filename]#my.asl# to be customized.  If this file is edited, compile the new ASL using the following command.  "
"Warnings can usually be ignored, but errors are bugs that will usually prevent ACPI from working correctly."
msgstr ""
"其他解决方法可能需要定制 [.filename]#my.asl#。如果这个文件被编辑了，用下面的命令编译新的 ASL。警告通常可以被忽略，但错误是错误，通常会妨碍 ACPI 的"
"正常工作。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1915
#, no-wrap
msgid "# iasl -f my.asl\n"
msgstr "# iasl -f my.asl\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1919
msgid ""
"Including `-f` forces creation of the AML, even if there are errors during compilation.  Some errors, such as missing return statements, are "
"automatically worked around by the FreeBSD interpreter."
msgstr "包括 `-f` 将强制创建 AML，即使在编译过程中出现了错误。一些错误，例如缺少返回语句，会由 FreeBSD 解释器自动解决。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1922
msgid ""
"The default output filename for `iasl` is [.filename]#DSDT.aml#.  Load this file instead of the BIOS's buggy copy, which is still present in "
"flash memory, by editing [.filename]#/boot/loader.conf# as follows:"
msgstr ""
"`iasl` 的默认输出文件名是 [.filename]#DSDT.aml#。通过编辑 [.filename]#/boot/loader.conf# 来加载这个文件，而不是 BIOS 的错误副本，后者仍然存在于闪"
"存中，如下所示："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1927
#, no-wrap
msgid ""
"acpi_dsdt_load=\"YES\"\n"
"acpi_dsdt_name=\"/boot/DSDT.aml\"\n"
msgstr ""
"acpi_dsdt_load=\"YES\"\n"
"acpi_dsdt_name=\"/boot/DSDT.aml\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1931
msgid ""
"Be sure to copy [.filename]#DSDT.aml# to [.filename]#/boot#, then reboot the system.  If this fixes the problem, send a man:diff[1] of the old "
"and new ASL to {freebsd-acpi} so that developers can work around the buggy behavior in [.filename]#acpica#."
msgstr ""
"请确保将 [.filename]#DSDT.aml# 复制到 [.filename]#/boot#，然后重新启动系统。如果这能解决这个问题，请将新旧 ASL 的 man:diff[1] 发送到"
" {freebsd-acpi} 邮件列表，以便开发人员能够解决 [.filename]#acpica# 中的错误行为。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1933
#, no-wrap
msgid "Getting and Submitting Debugging Info"
msgstr "获得并提交调试信息"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1941
msgid ""
"The ACPI driver has a flexible debugging facility. A set of subsystems and the level of verbosity can be specified.  The subsystems to debug are "
"specified as layers and are broken down into components (`ACPI_ALL_COMPONENTS`) and ACPI hardware support (`ACPI_ALL_DRIVERS`).  The verbosity of "
"debugging output is specified as the level and ranges from just report errors (`ACPI_LV_ERROR`) to everything (`ACPI_LV_VERBOSE`).  The level is "
"a bitmask so multiple options can be set at once, separated by spaces.  In practice, a serial console should be used to log the output so it is "
"not lost as the console message buffer flushes.  A full list of the individual layers and levels is found in man:acpi[4]."
msgstr ""
"ACPI 驱动程序有一个灵活的调试工具。可以指定一组子系统和粗略的程度。调试的子系统被指定为层，并被分解为组件（`ACPI_ALL_COMPONENTS`）和 ACPI 硬件支持"
"（`ACPI_ALL_DRIVERS`）。调试输出的粗略程度被指定为级别，范围从仅仅报告错误(` ACPI_LV_ERROR` )到一切(` ACPI_LV_VERBOSE` )。级别是一个位掩码，所以可"
"以同时设置多个选项，用空格隔开。在实践中，应该用一个串行控制台来记录输出，这样它就不会因为控制台消息缓冲区的刷新而丢失。在 man:acpi[4] 中可以找到"
"各个层和级别的完整列表。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1945
msgid ""
"Debugging output is not enabled by default. To enable it, add `options ACPI_DEBUG` to the custom kernel configuration file if ACPI is compiled "
"into the kernel.  Add `ACPI_DEBUG=1` to [.filename]#/etc/make.conf# to enable it globally.  If a module is used instead of a custom kernel, "
"recompile just the [.filename]#acpi.ko# module as follows:"
msgstr ""
"调试输出在默认情况下是不启用的。要启用它，如果 ACPI 被编译到内核中，请在自定义的内核配置文件中添加 `options ACPI_DEBUG`。在 [.filename]#/etc/make.conf# "
"中添加 `ACPI_DEBUG=1` 来全局启用它。如果使用模块而不是自定义内核，只重新编译 [.filename]#acpi.ko# 模块，如下所示："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1949
#, no-wrap
msgid "# cd /sys/modules/acpi/acpi && make clean && make ACPI_DEBUG=1\n"
msgstr "# cd /sys/modules/acpi/acpi && make clean && make ACPI_DEBUG=1\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1953
msgid ""
"Copy the compiled [.filename]#acpi.ko# to [.filename]#/boot/kernel# and add the desired level and layer to [.filename]#/boot/loader.conf#.  The "
"entries in this example enable debug messages for all ACPI components and hardware drivers and output error messages at the least verbose level:"
msgstr ""
"将编译好的 [.filename]#acpi.ko# 复制到 [.filename]#/boot/kernel#，并在 [.filename]#/boot/loader.conf# 中添加所需的级别和层次。本例中的条目启用了所"
"有 ACPI 组件和硬件驱动的调试信息，并以最简洁的级别输出错误信息："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1958
#, no-wrap
msgid ""
"debug.acpi.layer=\"ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS\"\n"
"debug.acpi.level=\"ACPI_LV_ERROR\"\n"
msgstr ""
"debug.acpi.layer=\"ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS\"\n"
"debug.acpi.level=\"ACPI_LV_ERROR\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1963
msgid ""
"If the required information is triggered by a specific event, such as a suspend and then resume, do not modify [.filename]#/boot/loader.conf#.  "
"Instead, use `sysctl` to specify the layer and level after booting and preparing the system for the specific event.  The variables which can be "
"set using `sysctl` are named the same as the tunables in [.filename]#/boot/loader.conf#."
msgstr ""
"如果所需的信息是由特定的事件触发的，比如挂起后再恢复，不要修改 [.filename]#/boot/loader.conf#。相反，在启动并为特定事件准备好系统后，使用 "
"`sysctl` 来指定层和级别。可以使用 `sysctl` 设置的变量与 [.filename]#/boot/loader.conf# 中的 tunables 命名相同。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1965
msgid ""
"Once the debugging information is gathered, it can be sent to {freebsd-acpi} so that it can be used by the FreeBSD ACPI maintainers to identify "
"the root cause of the problem and to develop a solution."
msgstr "如果收集到了调试信息，就可以将其发送到 {freebsd-acpi} 邮件列表中，以便 FreeBSD ACPI 维护者使用这些信息来确定问题的根本原因并制定解决方案。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/config/_index.adoc:1969
msgid ""
"Before submitting debugging information to this mailing list, ensure the latest BIOS version is installed and, if available, the embedded "
"controller firmware version."
msgstr "在向该邮件列表提交调试信息之前，请确保安装了最新版本的 BIOS ，如果有的话，也请更新嵌入式控制器固件版本。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1972
msgid "When submitting a problem report, include the following information:"
msgstr "当提交错误报告时，请包含以下信息："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1974
msgid ""
"Description of the buggy behavior, including system type, model, and anything that causes the bug to appear. Note as accurately as possible when "
"the bug began occurring if it is new."
msgstr "对错误行为的描述，包括系统类型、型号以及导致错误出现的任何东西。如果是新的，尽可能准确地记下该 bug 开始出现的时间。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1975
msgid "The output of `dmesg` after running `boot -v`, including any error messages generated by the bug."
msgstr "运行 `boot -v` 后 `dmesg` 的输出，包括由错误产生的任何错误信息。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1976
msgid "The `dmesg` output from `boot -v` with ACPI disabled, if disabling ACPI helps to fix the problem."
msgstr "如果禁用 ACPI 有助于解决这个问题的话，那么请包含在禁用 ACPI 的情况下，`boot -v` 的 `dmesg` 输出。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1977
msgid "Output from `sysctl hw.acpi`. This lists which features the system offers."
msgstr "`sysctl hw.acpi` 的输出，它列出了系统提供的功能。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1978
msgid ""
"The URL to a pasted version of the system's ASL. Do _not_ send the ASL directly to the list as it can be very large. Generate a copy of the ASL "
"by running this command:"
msgstr "系统 ASL 的粘贴版本的 URL。_不要_ 直接将 ASL 发送到列表中，因为它可能非常大。通过运行这个命令生成一份 ASL 的副本："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/config/_index.adoc:1982
#, no-wrap
msgid "# acpidump -dt > name-system.asl\n"
msgstr "# acpidump -dt > name-system.asl\n"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1986
msgid "Substitute the login name for _name_ and manufacturer/model for _system_.  For example, use [.filename]#njl-FooCo6000.asl#."
msgstr "用登录名代替 _姓名_，用制造商/型号代替 _系统_。例如，使用 [.filename]#njl-FooCo6000.asl#。"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1993
msgid ""
"Most FreeBSD developers watch the {freebsd-current}, but one should submit problems to {freebsd-acpi} to be sure it is seen.  Be patient when "
"waiting for a response.  If the bug is not immediately apparent, submit a bug report.  When entering a PR, include the same information as "
"requested above.  This helps developers to track the problem and resolve it.  Do not send a PR without emailing {freebsd-acpi} first as it is "
"likely that the problem has been reported before."
msgstr ""
"大多数 FreeBSD 开发者会关注 {freebsd-current} 邮件列表，但也应该把问题提交到 FreeBSD {freebsd-acpi} 邮件列表，以确保它被看到。在等待回复时要有耐"
"心。如果问题没有立即显现出来，请提交一份错误报告。当输入 PR 时，请包括与上述要求相同的信息。这有助于开发人员跟踪问题并解决它。不要在没有给 "
"{freebsd-acpi} 邮件列表发邮件的情况下发送 PR，因为这个问题很可能已经被报告过了。"

#. type: Title ===
#: content/zh-cn/books/handbook/config/_index.adoc:1995
#, no-wrap
msgid "References"
msgstr "参考资料"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:1998
msgid "More information about ACPI may be found in the following locations:"
msgstr "你可以在以下地点找到更多关于 ACPI 的信息："

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:2000
msgid ""
"The FreeBSD ACPI Mailing List Archives (https://lists.freebsd.org/pipermail/freebsd-acpi/[https://lists.freebsd.org/pipermail/freebsd-acpi/])"
msgstr "FreeBSD ACPI 邮件列表 (https://lists.freebsd.org/pipermail/freebsd-acpi/[https://lists.freebsd.org/pipermail/freebsd-acpi/])"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:2001
msgid "The ACPI 2.0 Specification (http://acpi.info/spec.htm[http://acpi.info/spec.htm])"
msgstr "ACPI 2.0规范：(http://acpi.info/spec.htm[http://acpi.info/spec.htm])"

#. type: Plain text
#: content/zh-cn/books/handbook/config/_index.adoc:2001
msgid "man:acpi[4], man:acpi_thermal[4], man:acpidump[8], man:iasl[8], and man:acpidb[8]"
msgstr "man:acpi[4]、 man:acpi_thermal[4]、 man:acpidump[8]、 man:iasl[8] 和 man:acpidb[8] 的手册页面"
