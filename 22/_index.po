# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2022-03-11 21:46+0800\n"
"PO-Revision-Date: 2022-04-05 20:05+0800\n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Poedit 3.0.1\n"

#. type: YAML Front Matter: description
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1
#, no-wrap
msgid "Virtualization software allows multiple operating systems to run simultaneously on the same computer"
msgstr "虚拟化软件允许同时在同一台电脑上运行多个操作系统"

#. type: YAML Front Matter: part
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr "第三部分 系统管理"

#. type: YAML Front Matter: title
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1
#, no-wrap
msgid "Chapter 22. Virtualization"
msgstr "第22章 虚拟化"

#. type: Title =
#: content/zh-cn/books/handbook/virtualization/_index.adoc:14
#, no-wrap
msgid "Virtualization"
msgstr "虚拟化"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr "概述"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:56
msgid ""
"Virtualization software allows multiple operating systems to run simultaneously on the same computer.  Such "
"software systems for PCs often involve a host operating system which runs the virtualization software and supports "
"any number of guest operating systems."
msgstr ""
"虚拟化软件允许同时在同一台电脑上运行多个操作系统。这样的软件系统通常需要一台运行虚拟化软件的宿主（host）操作系统，并"
"且可以支持任意数量的客户机（guest）操作系统。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:58
msgid "After reading this chapter, you will know:"
msgstr "读完本章后，你将知道："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:60
msgid "The difference between a host operating system and a guest operating system."
msgstr "宿主操作系统的客户机操作系统的区别。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:61
msgid "How to install FreeBSD on the following virtualization platforms:"
msgstr "如何在如下虚拟化平台中安装 FreeBSD："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:62
msgid "Parallels Desktop(Intel(R)-based Apple(R) macOS(R))"
msgstr "Parallels Desktop（基于 Intel(R) 芯片的 Apple(R) macOS(R)）"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:63
msgid "VMware Fusion(Intel(R)-based Apple(R) macOS(R))"
msgstr "VMware Fusion（基于 Intel(R) 芯片的 Apple(R) macOS(R)）"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:64
msgid "VirtualBox(TM)(Microsoft(R) Windows(R), Intel(R)-based Apple(R) macOS(R), Linux)"
msgstr "VirtualBox(TM)（Microsoft(R) Windows(R), 基于 Intel(R) 芯片的 Apple(R) macOS(R), Linux）"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:65
msgid "bhyve(FreeBSD)"
msgstr "bhyve(FreeBSD)"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:66
msgid "How to tune a FreeBSD system for best performance under virtualization."
msgstr "如何调整 FreeBSD 系统以在虚拟化环境下发挥最佳性能。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:68
msgid "Before reading this chapter, you should:"
msgstr "在你阅读本章之前，你应该："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:70
msgid "Understand the crossref:basics[basics,basics of UNIX(R) and FreeBSD]."
msgstr "理解 crossref:basics[basics,FreeBSD 基础]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:71
msgid "Know how to crossref:bsdinstall[bsdinstall,install FreeBSD]."
msgstr "了解如何 crossref:bsdinstall[bsdinstall,安装 FreeBSD]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:72
msgid "Know how to crossref:advanced-networking[advanced-networking,set up a network connection]."
msgstr "了解如何 crossref:advanced-networking[advanced-networking,设置网络连接]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:73
msgid "Know how to crossref:ports[ports,install additional third-party software]."
msgstr "了解如何 crossref:ports[ports,安装额外的第三方软件]。"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:75
#, no-wrap
msgid "FreeBSD as a Guest on Parallels Desktop for macOS(R)"
msgstr "使用 macOS(R) 上的 Parallels Desktop 安装 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:80
msgid ""
"Parallels Desktop for Mac(R) is a commercial software product available for Intel(R) based Apple(R) Mac(R) "
"computers running macOS(R) 10.4.6 or higher.  FreeBSD is a fully supported guest operating system.  Once Parallels "
"has been installed on macOS(R), the user must configure a virtual machine and then install the desired guest "
"operating system."
msgstr ""
"Parallels Desktop for Mac(R) 是用于基于 Intel(R) 的 Apple(R) Mac(R) 计算机的商用软件，需要运行 macOS(R) 10.4.6 或更高版本。"
"FreeBSD 是得到其完整支持的客户机系统。在 Parallels 被安装在 macOS(R) 上之后，用户需要配置一个虚拟机并安装所需的客户机"
"操作系统。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:82
#, no-wrap
msgid "Installing FreeBSD on Parallels Desktop on Mac(R)"
msgstr "在 Parallels Desktop on Mac(R) 上安装 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:86
msgid ""
"The first step in installing FreeBSD on Parallels is to create a new virtual machine for installing FreeBSD.  "
"Select [.guimenuitem]#FreeBSD# as the menu:Guest OS Type[] when prompted:"
msgstr ""
"在 Parallels 上安装 FreeBSD 的第一步是创建一个新的用于安装的虚拟机。当被提示时，选择 [.guimenuitem]#FreeBSD# 作为 "
"menu:Guest OS Type[]。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:87
#, no-wrap
msgid "parallels-freebsd1.png"
msgstr "parallels-freebsd1.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:91
msgid ""
"Choose a reasonable amount of disk and memory depending on the plans for this virtual FreeBSD instance.  4GB of "
"disk space and 512MB of RAM work well for most uses of FreeBSD under Parallels:"
msgstr "取决于虚拟机的用途，选择适当的磁盘和内存配额。对于大多数用途，4GB 的磁盘空间和 512MB 的内存空间便足矣。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:92
#, no-wrap
msgid "parallels-freebsd2.png"
msgstr "parallels-freebsd2.png"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:94
#, no-wrap
msgid "parallels-freebsd3.png"
msgstr "parallels-freebsd3.png"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:96
#, no-wrap
msgid "parallels-freebsd4.png"
msgstr "parallels-freebsd4.png"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:98
#, no-wrap
msgid "parallels-freebsd5.png"
msgstr "parallels-freebsd5.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:101
msgid "Select the type of networking and a network interface:"
msgstr "选择组网类型和网络介面。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:102
#, no-wrap
msgid "parallels-freebsd6.png"
msgstr "parallels-freebsd6.png"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:104
#, no-wrap
msgid "parallels-freebsd7.png"
msgstr "parallels-freebsd7.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:107
msgid "Save and finish the configuration:"
msgstr "保存并完成配置。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:108
#, no-wrap
msgid "parallels-freebsd8.png"
msgstr "parallels-freebsd8.png"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:110
#, no-wrap
msgid "parallels-freebsd9.png"
msgstr "parallels-freebsd9.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:117
msgid ""
"After the FreeBSD virtual machine has been created, FreeBSD can be installed on it.  This is best done with an "
"official FreeBSD CD/DVD or with an ISO image downloaded from an official FTP site.  Copy the appropriate ISO image "
"to the local Mac(R) filesystem or insert a CD/DVD in the Mac(R)'s CD-ROM drive.  Click on the disc icon in the "
"bottom right corner of the FreeBSD Parallels window.  This will bring up a window that can be used to associate the "
"CD-ROM drive in the virtual machine with the ISO file on disk or with the real CD-ROM drive."
msgstr ""
"在创建 FreeBSD 虚拟机之后，你就可以在其中安装 FreeBSD 了。最佳方法是使用官方的 FreeBSD CD/DVD 或是从官方 FTP 站点下"
"载 ISO 镜像。将合适的 ISO 镜像复制到 Mac(R) 的本地文件系统中，或者将 CD/DVD 插入 Mac(R) 的 CD-ROM 光驱。点击 Parallels "
"窗口上的光盘图标，在弹出的窗口中将 ISO 文件或者实体 CD-ROM 光驱关联到虚拟机的 CD-ROM 光驱上。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:118
#, no-wrap
msgid "parallels-freebsd11.png"
msgstr "parallels-freebsd11.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:122
msgid ""
"Once this association with the CD-ROM source has been made, reboot the FreeBSD virtual machine by clicking the "
"reboot icon.  Parallels will reboot with a special BIOS that first checks if there is a CD-ROM."
msgstr "在关联 CD-ROM 来源之后，点击重启图标重启 FreeBSD 虚拟机，Parallels 内建的 BIOS 会扫描虚拟的 CD-ROM 光驱。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:123
#, no-wrap
msgid "parallels-freebsd10.png"
msgstr "parallels-freebsd10.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:127
msgid ""
"In this case it will find the FreeBSD installation media and begin a normal FreeBSD installation.  Perform the "
"installation, but do not attempt to configure Xorg at this time."
msgstr ""
"在这种情况下，FreeBSD 安装媒介会被扫描到，然后开始正常的 FreeBSD 安装流程。执行安装，但是不要在这时候尝试安装 Xorg。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:128
#, no-wrap
msgid "parallels-freebsd12.png"
msgstr "parallels-freebsd12.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:131
msgid "When the installation is finished, reboot into the newly installed FreeBSD virtual machine."
msgstr "安装完成后，重启进入全新安装的 FreeBSD 虚拟机。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:132
#, no-wrap
msgid "parallels-freebsd13.png"
msgstr "parallels-freebsd13.png"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:135
#, no-wrap
msgid "Configuring FreeBSD on Parallels"
msgstr "在 Parallels 上配置 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:138
msgid ""
"After FreeBSD has been successfully installed on macOS(R) X with Parallels, there are a number of configuration "
"steps that can be taken to optimize the system for virtualized operation."
msgstr "在 macOS(R) 的 Parallels 上成功安装 FreeBSD 之后，可以进行如下几个配置来为虚拟化操作对系统进行优化。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:141
#: content/zh-cn/books/handbook/virtualization/_index.adoc:247
msgid "Set Boot Loader Variables"
msgstr "设置启动加载器变量"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:144
msgid ""
"The most important step is to reduce the `kern.hz` tunable to reduce the CPU utilization of FreeBSD under the "
"Parallels environment.  This is accomplished by adding the following line to [.filename]#/boot/loader.conf#:"
msgstr ""
"最重要的一步是调整可调节的 `kern.hz` 来减少 FreeBSD 在 Parallels 环境下的 CPU 使用率。这可通过在 "
"[.filename]#/boot/loader.conf# 中加入如下一行来实现："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:148
#: content/zh-cn/books/handbook/virtualization/_index.adoc:254
#, no-wrap
msgid "kern.hz=100\n"
msgstr "kern.hz=100\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:152
msgid ""
"Without this setting, an idle FreeBSD Parallels guest will use roughly 15% of the CPU of a single processor "
"iMac(R).  After this change the usage will be closer to 5%."
msgstr ""
"在没有此项设置的情况下，Parallels 中运行的 FreeBSD 在闲置状态下会占用大约 15% 的 CPU（在一台搭载单颗处理器的 iMac(R) "
"上）。进行设置后，占用率可以降低到 5% 左右。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:153
#: content/zh-cn/books/handbook/virtualization/_index.adoc:259
msgid "Create a New Kernel Configuration File"
msgstr "创建新的内核配置文件"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:156
msgid ""
"All of the SCSI, FireWire, and USB device drivers can be removed from a custom kernel configuration file.  "
"Parallels provides a virtual network adapter used by the man:ed[4] driver, so all network devices except for man:"
"ed[4] and man:miibus[4] can be removed from the kernel."
msgstr ""
"所有 SCSI，火线和 USB 设备驱动都可以从自定义内核配置文件中移除。Parallels 提供一个虚拟网络适配器并由 man:ed[4] 驱动"
"使用，所以除了 man:ed[4] 和 man:miibus[4] 之外的网络驱动都可以从内核中移除。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:157
#: content/zh-cn/books/handbook/virtualization/_index.adoc:263
msgid "Configure Networking"
msgstr "配置网络"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:161
msgid ""
"The most basic networking setup uses DHCP to connect the virtual machine to the same local area network as the host "
"Mac(R).  This can be accomplished by adding `ifconfig_ed0=\"DHCP\"` to [.filename]#/etc/rc.conf#.  More advanced "
"networking setups are described in crossref:advanced-networking[advanced-networking,Advanced Networking]."
msgstr ""
"最基本的网络配置使用 DHCP 来将虚拟机连接到宿主机 Mac(R) 所在的同一个局域网中。这可以通过向 [.filename]#/etc/rc.conf# "
"中添加 `ifconfig_ed0=\"DHCP\"` 来实现。更高级的网络设置请参见 "
"crossref:advanced-networking[advanced-networking,高级网络配置]。"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:163
#, no-wrap
msgid "FreeBSD as a Guest on VMware Fusion for macOS(R)"
msgstr "使用 macOS(R) 上的 VMware Fusion 安装 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:168
msgid ""
"VMware Fusion for Mac(R) is a commercial software product available for Intel(R) based Apple(R) Mac(R) computers "
"running macOS(R) 10.11 or higher.  FreeBSD is a fully supported guest operating system.  Once VMware Fusion has "
"been installed on macOS(R), the user can configure a virtual machine and then install the desired guest operating "
"system."
msgstr ""
"VMware Fusion for Mac(R) 是用于基于 Intel(R) 的 Apple(R) Mac(R) 计算机的商用软件，需要运行 macOS(R) 10.11 或更高版本。FreeBSD "
"是得到其完整支持的客户机系统。在 VMware Fusion 被安装在 macOS(R) 上之后，用户需要配置一个虚拟机并安装所需的客户机操作"
"系统。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:170
#, no-wrap
msgid "Installing FreeBSD on VMware Fusion"
msgstr "在 VMware Fusion 上安装 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:174
msgid ""
"The first step is to start VMware Fusion which will load the Virtual Machine Library.  Click [.guimenuitem]#+->New# "
"to create the virtual machine:"
msgstr "第一步是启动 VMware Fusion 并加载虚拟机资源库。点击[.guimenuitem]#+->New# 来创建虚拟机："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:175
#, no-wrap
msgid "vmware-freebsd01.png"
msgstr "vmware-freebsd01.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:179
msgid ""
"This will load the New Virtual Machine Assistant.  Choose [.guimenuitem]#Create a custom virtual machine# and click "
"[.guimenuitem]#Continue# to proceed:"
msgstr ""
"接下来会弹出 [.guimenuitem]#Create a custom virtual machine#，选择创建自定虚拟机并点击 [.guimenuitem]#Continue#："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:180
#, no-wrap
msgid "vmware-freebsd02.png"
msgstr "vmware-freebsd02.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:183
msgid ""
"Select [.guimenuitem]#Other# as the [.guimenuitem]#Operating System# and either [.guimenuitem]#FreeBSD X# or [."
"guimenuitem]#FreeBSD X 64-bit#, as the menu:Version[] when prompted:"
msgstr ""
"选择 [.guimenuitem]#Other# 作为 [.guimenuitem]#Operating System#，并选择 [.guimenuitem]#FreeBSD X# 或 "
"[.guimenuitem]#FreeBSD X 64-bit#， 作为 menu:Version[] ，当提示时："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:184
#, no-wrap
msgid "vmware-freebsd03.png"
msgstr "vmware-freebsd03.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:187
msgid "Choose the firmware(UEFI is recommended):"
msgstr "选择指定引导固件（建议选择 UEFI）："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:188
#, no-wrap
msgid "vmware-freebsd04.png"
msgstr "vmware-freebsd04.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:191
msgid "Choose [.guimenuitem]#Create a new virtual disk# and click [.guimenuitem]#Continue#:"
msgstr "选择 [.guimenuitem]#Create a new virtual disk# 然后点击 [.guimenuitem]#Continue#："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:192
#, no-wrap
msgid "vmware-freebsd05.png"
msgstr "vmware-freebsd05.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:195
msgid "Check the configuration and click [.guimenuitem]#Finish#:"
msgstr "检查配置是否正确，然后点击 [.guimenuitem]#Finish#："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:196
#, no-wrap
msgid "vmware-freebsd06.png"
msgstr "vmware-freebsd06.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:199
msgid "Choose the name of the virtual machine and the directory where it should be saved:"
msgstr "为虚拟机命名并选择保存的位置："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:200
#, no-wrap
msgid "vmware-freebsd07.png"
msgstr "vmware-freebsd07.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:203
msgid "Press command+E to open virtual machine settings and click [.guimenuitem]#CD/DVD#:"
msgstr "按 command+E 打开虚拟机配置，然后点击 [.guimenuitem]#CD/DVD#："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:204
#, no-wrap
msgid "vmware-freebsd08.png"
msgstr "vmware-freebsd08.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:207
msgid "Choose FreeBSD ISO image or from a CD/DVD:"
msgstr "选择 FreeBSD 的 ISO 镜像文件，或者关联到实体的 CD/DVD："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:208
#: content/zh-cn/books/handbook/virtualization/_index.adoc:230
#, no-wrap
msgid "vmware-freebsd09.png"
msgstr "vmware-freebsd09.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:211
msgid "Start the virtual machine:"
msgstr "启动虚拟机："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:212
#, no-wrap
msgid "vmware-freebsd10.png"
msgstr "vmware-freebsd10.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:215
msgid "Install FreeBSD as usual:"
msgstr "进行正常的 FreeBSD 安装流程："

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:216
#, no-wrap
msgid "vmware-freebsd11.png"
msgstr "vmware-freebsd11.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:219
msgid ""
"Once the install is complete, the settings of the virtual machine can be modified, such as memory usage and the "
"number of CPUs the virtual machine will have access to:"
msgstr "在安装完成之后，你可以更改虚拟机配置，例如内存大小和分配给虚拟机的 CPU 核心数量："

#. type: delimited block = 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:223
msgid "The System Hardware settings of the virtual machine cannot be modified while the virtual machine is running."
msgstr "虚拟机的系统硬件设置在虚拟机运行期间无法被修改。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:225
#, no-wrap
msgid "vmware-freebsd12.png"
msgstr "vmware-freebsd12.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:229
msgid ""
"The status of the CD-ROM device.  Normally the CD/DVD/ISO is disconnected from the virtual machine when it is no "
"longer needed."
msgstr "在一般情况下，如果不再需要，将 CD/DVD/ISO 从虚拟机断开连接。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:235
msgid ""
"The last thing to change is how the virtual machine will connect to the network.  To allow connections to the "
"virtual machine from other machines besides the host, choose [.guimenuitem]#Connect directly to the physical "
"network (Bridged)#.  Otherwise, [.guimenuitem]#Share the host's internet connection (NAT)# is preferred so that the "
"virtual machine can have access to the Internet, but the network cannot access the virtual machine."
msgstr ""
"最后设置虚拟机连接到网络的方式。若要允许除宿主之外的机器连接到虚拟机，请选择[.guimenuitem]#Connect directly to the physical network (Bridged)#。"
"其他情况下，推荐[.guimenuitem]#Share the host's internet connection (NAT)#，该模式允许"
"虚拟机连接到互联网，但外部网络无法直接访问虚拟机。"

#. type: Target for macro image
#: content/zh-cn/books/handbook/virtualization/_index.adoc:236
#, no-wrap
msgid "vmware-freebsd13.png"
msgstr "vmware-freebsd13.png"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:239
msgid "After modifying the settings, boot the newly installed FreeBSD virtual machine."
msgstr "编辑设置之后，启动进入全新安装的 FreeBSD 虚拟机。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:241
#, no-wrap
msgid "Configuring FreeBSD on VMware Fusion"
msgstr "在 VMware Fusion 上配置 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:244
msgid ""
"After FreeBSD has been successfully installed on macOS(R) X with VMware Fusion, there are a number of configuration "
"steps that can be taken to optimize the system for virtualized operation."
msgstr "在 macOS(R) 的 VMware Fusion 上成功安装 FreeBSD 之后，可以进行如下几个配置来为虚拟化操作对系统进行优化。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:250
msgid ""
"The most important step is to reduce the `kern.hz` tunable to reduce the CPU utilization of FreeBSD under the "
"VMware Fusion environment.  This is accomplished by adding the following line to [.filename]#/boot/loader.conf#:"
msgstr ""
"设置启动加载器变量 最重要的一步是调整可调节的 `kern.hz` 来减少 FreeBSD 在 VMware Fusion 环境下的 CPU 使用率。这可通"
"过在 [.filename]#/boot/loader.conf# 中加入如下一行来实现："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:258
msgid ""
"Without this setting, an idle FreeBSD VMware Fusion guest will use roughly 15% of the CPU of a single processor "
"iMac(R).  After this change, the usage will be closer to 5%."
msgstr ""
"在没有此项设置的情况下，VMware Fusion 中运行的 FreeBSD 在闲置状态下会占用大约 15% 的 CPU（在一台搭载单颗处理器的 "
"iMac(R) 上）。进行设置后，占用率可以降低到 5% 左右。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:262
msgid ""
"All of the FireWire, and USB device drivers can be removed from a custom kernel configuration file.  VMware Fusion "
"provides a virtual network adapter used by the man:em[4] driver, so all network devices except for man:em[4] can be "
"removed from the kernel."
msgstr ""
"创建新的内核配置文件 所有 SCSI，火线和 USB 设备驱动都可以从自定义内核配置文件中移除。VMware Fusion 提供一个虚拟网络"
"适配器并由 man:em[4] 驱动使用，所以除了 man:em[4] 之外的网络驱动都可以从内核中移除。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:267
msgid ""
"The most basic networking setup uses DHCP to connect the virtual machine to the same local area network as the host "
"Mac(R).  This can be accomplished by adding `ifconfig_em0=\"DHCP\"` to [.filename]#/etc/rc.conf#.  More advanced "
"networking setups are described in crossref:advanced-networking[advanced-networking,Advanced Networking]."
msgstr ""
"配置网络 最基本的网络配置使用 DHCP 来将虚拟机连接到宿主机 Mac(R) 所在的同一个局域网中。这可以通过向 [.filename]#/etc/rc.conf# "
"中添加 `ifconfig_em0=\"DHCP\"` 来实现。更高级的网络设置请参见 "
"crossref:advanced-networking[advanced-networking,高级网络配置]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:269
msgid "Install drivers and open-vm-tools"
msgstr "安装驱动和 open-vm-tools "

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:271
msgid "To run FreeBSD smoothly on VMWare, drivers should be installed:"
msgstr "若要在 VMware 上顺畅地运行 FreeBSD，你应该安装驱动："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:275
#, no-wrap
msgid "# pkg install xf86-video-vmware xf86-input-vmmouse open-vm-tools\n"
msgstr "# pkg install xf86-video-vmware xf86-input-vmmouse open-vm-tools\n"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:278
#, no-wrap
msgid "FreeBSD as a Guest on VirtualBox(TM)"
msgstr "使用 VirtualBox(TM) 安装 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:282
msgid ""
"FreeBSD works well as a guest in VirtualBox(TM).  The virtualization software is available for most common "
"operating systems, including FreeBSD itself."
msgstr "FreeBSD 作为客户机操作系统在 VirtualBox(TM) 中工作良好。该虚拟化软件可用于大多数常见操作系统，包括 FreeBSD。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:284
msgid "The VirtualBox(TM) guest additions provide support for:"
msgstr "VirtualBox(TM) 客户机额外提供如下支持："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:286
msgid "Clipboard sharing."
msgstr "同步剪切板。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:287
msgid "Mouse pointer integration."
msgstr "整合鼠标指针。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:288
msgid "Host time synchronization."
msgstr "同步宿主机时间。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:289
msgid "Window scaling."
msgstr "窗口缩放。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:290
msgid "Seamless mode."
msgstr "无缝模式。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:294
msgid "These commands are run in the FreeBSD guest."
msgstr "请在 FreeBSD 客户机中执行下列命令。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:298
msgid ""
"First, install the package:emulators/virtualbox-ose-additions[] package or port in the FreeBSD guest.  This will "
"install the port:"
msgstr ""
"首先，在 FreeBSD 客户机中安装 package:emulators/virtualbox-ose-additions[]。可以通过 package 或者 port 安装。以 "
"port 为例："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:302
#, no-wrap
msgid "# cd /usr/ports/emulators/virtualbox-ose-additions && make install clean\n"
msgstr "# cd /usr/ports/emulators/virtualbox-ose-additions && make install clean\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:305
msgid "Add these lines to [.filename]#/etc/rc.conf#:"
msgstr "然后在 [.filename]#/etc/rc.conf# 中添加如下内容："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:310
#, no-wrap
msgid ""
"vboxguest_enable=\"YES\"\n"
"vboxservice_enable=\"YES\"\n"
msgstr ""
"vboxguest_enable=\"YES\"\n"
"vboxservice_enable=\"YES\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:313
msgid "If man:ntpd[8] or man:ntpdate[8] is used, disable host time synchronization:"
msgstr "如果使用了 man:ntpd[8] 或 man:ntpdate[8]，禁用宿主机时间同步："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:317
#, no-wrap
msgid "vboxservice_flags=\"--disable-timesync\"\n"
msgstr "vboxservice_flags=\"--disable-timesync\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:321
msgid ""
"Xorg will automatically recognize the `vboxvideo` driver.  It can also be manually entered in [.filename]#/etc/X11/"
"xorg.conf#:"
msgstr "Xorg 会自动识别 `vboxvideo` 驱动。也可以在 [.filename]#/etc/X11/xorg.conf# 中手动输入："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:330
#, no-wrap
msgid ""
"Section \"Device\"\n"
"\tIdentifier \"Card0\"\n"
"\tDriver \"vboxvideo\"\n"
"\tVendorName \"InnoTek Systemberatung GmbH\"\n"
"\tBoardName \"VirtualBox Graphics Adapter\"\n"
"EndSection\n"
msgstr ""
"Section \"Device\"\n"
"\tIdentifier \"Card0\"\n"
"\tDriver \"vboxvideo\"\n"
"\tVendorName \"InnoTek Systemberatung GmbH\"\n"
"\tBoardName \"VirtualBox Graphics Adapter\"\n"
"EndSection\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:333
msgid "To use the `vboxmouse` driver, adjust the mouse section in [.filename]#/etc/X11/xorg.conf#:"
msgstr "若要使用 `vboxmouse` 驱动，请在 [.filename]#/etc/X11/xorg.conf# 中修改鼠标部分配置："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:340
#, no-wrap
msgid ""
"Section \"InputDevice\"\n"
"\tIdentifier \"Mouse0\"\n"
"\tDriver \"vboxmouse\"\n"
"EndSection\n"
msgstr ""
"Section \"InputDevice\"\n"
"\tIdentifier \"Mouse0\"\n"
"\tDriver \"vboxmouse\"\n"
"EndSection\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:343
msgid ""
"HAL users should create the following [.filename]#/usr/local/etc/hal/fdi/policy/90-vboxguest.fdi# or copy it from [."
"filename]#/usr/local/share/hal/fdi/policy/10osvendor/90-vboxguest.fdi#:"
msgstr ""
"HAL 输入设备用户应该创建如下所示的 [.filename]#/usr/local/etc/hal/fdi/policy/90-vboxguest.fdi#，或者从 "
"[.filename]#/usr/local/share/hal/fdi/policy/10osvendor/90-vboxguest.fdi# 复制文件至上述目录："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:351
#, no-wrap
msgid ""
"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
"<!--\n"
"# Sun VirtualBox\n"
"# Hal driver description for the vboxmouse driver\n"
"# $Id: chapter.xml,v 1.33 2012-03-17 04:53:52 eadler Exp $\n"
msgstr ""
"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
"<!--\n"
"# Sun VirtualBox\n"
"# Hal driver description for the vboxmouse driver\n"
"# $Id: chapter.xml,v 1.33 2012-03-17 04:53:52 eadler Exp $\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:353
#, no-wrap
msgid "\tCopyright (C) 2008-2009 Sun Microsystems, Inc.\n"
msgstr "\tCopyright (C) 2008-2009 Sun Microsystems, Inc.\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:361
#, no-wrap
msgid ""
"\tThis file is part of VirtualBox Open Source Edition (OSE, as\n"
"\tavailable from http://www.virtualbox.org. This file is free software;\n"
"\tyou can redistribute it and/or modify it under the terms of the GNU\n"
"\tGeneral Public License (GPL) as published by the Free Software\n"
"\tFoundation, in version 2 as it comes in the \"COPYING\" file of the\n"
"\tVirtualBox OSE distribution. VirtualBox OSE is distributed in the\n"
"\thope that it will be useful, but WITHOUT ANY WARRANTY of any kind.\n"
msgstr ""
"\tThis file is part of VirtualBox Open Source Edition (OSE, as\n"
"\tavailable from http://www.virtualbox.org. This file is free software;\n"
"\tyou can redistribute it and/or modify it under the terms of the GNU\n"
"\tGeneral Public License (GPL) as published by the Free Software\n"
"\tFoundation, in version 2 as it comes in the \"COPYING\" file of the\n"
"\tVirtualBox OSE distribution. VirtualBox OSE is distributed in the\n"
"\thope that it will be useful, but WITHOUT ANY WARRANTY of any kind.\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:378
#, no-wrap
msgid ""
"\tPlease contact Sun Microsystems, Inc., 4150 Network Circle, Santa\n"
"\tClara, CA 95054 USA or visit http://www.sun.com if you need\n"
"\tadditional information or have any questions.\n"
"-->\n"
"<deviceinfo version=\"0.2\">\n"
"  <device>\n"
"    <match key=\"info.subsystem\" string=\"pci\">\n"
"      <match key=\"info.product\" string=\"VirtualBox guest Service\">\n"
"        <append key=\"info.capabilities\" type=\"strlist\">input</append>\n"
"\t<append key=\"info.capabilities\" type=\"strlist\">input.mouse</append>\n"
"        <merge key=\"input.x11_driver\" type=\"string\">vboxmouse</merge>\n"
"\t<merge key=\"input.device\" type=\"string\">/dev/vboxguest</merge>\n"
"      </match>\n"
"    </match>\n"
"  </device>\n"
"</deviceinfo>\n"
msgstr ""
"\tPlease contact Sun Microsystems, Inc., 4150 Network Circle, Santa\n"
"\tClara, CA 95054 USA or visit http://www.sun.com if you need\n"
"\tadditional information or have any questions.\n"
"-->\n"
"<deviceinfo version=\"0.2\">\n"
"  <device>\n"
"    <match key=\"info.subsystem\" string=\"pci\">\n"
"      <match key=\"info.product\" string=\"VirtualBox guest Service\">\n"
"        <append key=\"info.capabilities\" type=\"strlist\">input</append>\n"
"\t<append key=\"info.capabilities\" type=\"strlist\">input.mouse</append>\n"
"        <merge key=\"input.x11_driver\" type=\"string\">vboxmouse</merge>\n"
"\t<merge key=\"input.device\" type=\"string\">/dev/vboxguest</merge>\n"
"      </match>\n"
"    </match>\n"
"  </device>\n"
"</deviceinfo>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:383
msgid ""
"Shared folders for file transfers between host and VM are accessible by mounting them using `mount_vboxvfs`.  A "
"shared folder can be created on the host using the VirtualBox GUI or via `vboxmanage`.  For example, to create a "
"shared folder called _myshare_ under [.filename]#/mnt/bsdboxshare# for the VM named _BSDBox_, run:"
msgstr ""
"使用 `mount_vboxvfs` 来挂在用于在宿主和虚拟机之间传输文件的共享文件夹。共享文件夹可以在宿主机上通过 VirtualBox 图形"
"界面或者 `vboxmanage` 工具创建。例如，要为虚拟机 BSDBox 创建一个名为 _myshare_ 的共享文件夹，位于 "
"[.filename]#/mnt/bsdboxshare#，请运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:387
#, no-wrap
msgid "# vboxmanage sharedfolder add 'BSDBox' --name myshare --hostpath /mnt/bsdboxshare\n"
msgstr "# vboxmanage sharedfolder add 'BSDBox' --name myshare --hostpath /mnt/bsdboxshare\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:391
msgid ""
"Note that the shared folder name must not contain spaces.  Mount the shared folder from within the guest system "
"like this:"
msgstr "请注意共享文件夹名称中不能包含空格。要在客户机中挂载这个共享文件夹，请运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:395
#, no-wrap
msgid "# mount_vboxvfs -w myshare /mnt\n"
msgstr "# mount_vboxvfs -w myshare /mnt\n"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:398
#, no-wrap
msgid "FreeBSD as a Host with VirtualBox(TM)"
msgstr "在 FreeBSD 上安装 VirtualBox(TM)"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:406
msgid ""
"VirtualBox(TM) is an actively developed, complete virtualization package, that is available for most operating "
"systems including Windows(R), macOS(R), Linux(R) and FreeBSD.  It is equally capable of running Windows(R) or "
"UNIX(R)-like guests.  It is released as open source software, but with closed-source components available in a "
"separate extension pack.  These components include support for USB 2.0 devices.  More information may be found on "
"the http://www.virtualbox.org/wiki/Downloads[Downloads page of the VirtualBox(TM) wiki].  Currently, these "
"extensions are not available for FreeBSD."
msgstr ""
"VirtualBox(TM) 是一个正在活跃开发的，完备的虚拟化软件。可运行于大多操作系统，包括 Windows(R)，macOS(R)，Linux(R) 和 FreeBSD。"
"它也同样能够运行 Windows(R) 或者类 UNIX(R) 客户机系统。该软件作为开源软件发行，但是在单独的扩展包中提供闭源组件。这些组"
"件包括对 USB 2.0 设备的支持。更多的信息可以在 http://www.virtualbox.org/wiki/Downloads[Downloads page of the VirtualBox(TM) wiki]"
" 中找到。截至目前为止，这些扩展不支持 FreeBSD。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:408
#, no-wrap
msgid "Installing VirtualBox(TM)"
msgstr "安装 VirtualBox(TM)"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:412
msgid ""
"VirtualBox(TM) is available as a FreeBSD package or port in package:emulators/virtualbox-ose[].  The port can be "
"installed using these commands:"
msgstr ""
"VirtualBox(TM) 在 FreeBSD package 和 port 的 package:emulators/virtualbox-ose[] 中提供。其 port 可以通过如下命令安装："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:417
#, no-wrap
msgid ""
"# cd /usr/ports/emulators/virtualbox-ose\n"
"# make install clean\n"
msgstr ""
"# cd /usr/ports/emulators/virtualbox-ose\n"
"# make install clean\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:422
msgid ""
"One useful option in the port's configuration menu is the `GuestAdditions` suite of programs.  These provide a "
"number of useful features in guest operating systems, like mouse pointer integration (allowing the mouse to be "
"shared between host and guest without the need to press a special keyboard shortcut to switch) and faster video "
"rendering, especially in Windows(R) guests.  The guest additions are available in the menu:Devices[] menu, after "
"the installation of the guest is finished."
msgstr ""
"port 配置菜单中的一个实用选项是 `GuestAdditions` 程序套件。这些程序提供了数个宿主操作系统中有用的功能，如鼠标指针整"
"合（允许鼠标在宿主和客户机之间共享，而不需要按下特定的按键组合来切换）以及更快的视频渲染，特别是在 Windows(R) 客户机当"
"中。在客户机安装完成后，这些附加套件可以在 menu:Devices[] 菜单中找到。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:425
msgid ""
"A few configuration changes are needed before VirtualBox(TM) is started for the first time.  The port installs a "
"kernel module in [.filename]#/boot/modules# which must be loaded into the running kernel:"
msgstr ""
"VirtualBox(TM) 初次启动时需要修改几个配置。该 port 会在 [.filename]#/boot/modules# 安装一个内核模块，它需要被加载到运行"
"中的内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:429
#, no-wrap
msgid "# kldload vboxdrv\n"
msgstr "# kldload vboxdrv\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:432
msgid "To ensure the module is always loaded after a reboot, add this line to [.filename]#/boot/loader.conf#:"
msgstr "为了保证该模块始终能在重启后被加载，请在 [.filename]#/boot/loader.conf# 中添加这样一行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:436
#, no-wrap
msgid "vboxdrv_load=\"YES\"\n"
msgstr "vboxdrv_load=\"YES\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:439
msgid ""
"To use the kernel modules that allow bridged or host-only networking, add this line to [.filename]#/etc/rc.conf# "
"and reboot the computer:"
msgstr "若要使用允许桥接或仅宿主网络的内核模块，请在 [.filename]#/etc/rc.conf# 中添加这样一行，并重启计算机："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:443
#, no-wrap
msgid "vboxnet_enable=\"YES\"\n"
msgstr "vboxnet_enable=\"YES\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:448
msgid ""
"The `vboxusers` group is created during installation of VirtualBox(TM).  All users that need access to "
"VirtualBox(TM) will have to be added as members of this group.  `pw` can be used to add new members:"
msgstr ""
"在 VirtualBox(TM) 安装中会新建 `vboxusers` 组。所有需要访问 VirtualBox(TM) 的用户都需要作为成员被添加到这个组中。你可以使"
"用 `pw` 命令向其中添加成员："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:452
#, no-wrap
msgid "# pw groupmod vboxusers -m yourusername\n"
msgstr "# pw groupmod vboxusers -m yourusername\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:455
msgid ""
"The default permissions for [.filename]#/dev/vboxnetctl# are restrictive and need to be changed for bridged "
"networking:"
msgstr "[.filename]#/dev/vboxnetctl# 的默认权限是受限的，若要使用桥接网络需对其进行修改："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:460
#, no-wrap
msgid ""
"# chown root:vboxusers /dev/vboxnetctl\n"
"# chmod 0660 /dev/vboxnetctl\n"
msgstr ""
"# chown root:vboxusers /dev/vboxnetctl\n"
"# chmod 0660 /dev/vboxnetctl\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:463
msgid "To make this permissions change permanent, add these lines to [.filename]#/etc/devfs.conf#:"
msgstr "为了使该权限永久有效，请在 [.filename]#/etc/devfs.conf# 中添加："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:468
#, no-wrap
msgid ""
"own     vboxnetctl root:vboxusers\n"
"perm    vboxnetctl 0660\n"
msgstr ""
"own     vboxnetctl root:vboxusers\n"
"perm    vboxnetctl 0660\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:471
msgid "To launch VirtualBox(TM), type from an Xorg session:"
msgstr "要启动 VirtualBox(TM)，请在 Xorg 会话中输入："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:475
#, no-wrap
msgid "% VirtualBox\n"
msgstr "% VirtualBox\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:479
msgid ""
"For more information on configuring and using VirtualBox(TM), refer to the http://www.virtualbox.org[official "
"website].  For FreeBSD-specific information and troubleshooting instructions, refer to the http://wiki.FreeBSD.org/"
"VirtualBox[relevant page in the FreeBSD wiki]."
msgstr ""
"若要获取关于配置和使用 VirtualBox(TM) 的更多信息，请参阅 http://www.virtualbox.org[official website]。关于 FreeBSD 特定"
"的信息和疑难解答，请参阅 http://wiki.FreeBSD.org/VirtualBox[relevant page in the FreeBSD wiki]。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:481
#, no-wrap
msgid "VirtualBox(TM) USB Support"
msgstr "VirtualBox(TM) USB 支持"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:485
msgid ""
"VirtualBox(TM) can be configured to pass USB devices through to the guest operating system.  The host controller of "
"the OSE version is limited to emulating USB 1.1 devices until the extension pack supporting USB 2.0 and 3.0 devices "
"becomes available on FreeBSD."
msgstr ""
"VirtualBox(TM) 可被配置为 USB 设备直接连接到客户机操作系统。OSE 版本的主控制器仅限模拟 USB 1.1 设备，除非用以支持 USB "
"2.0 和 3.0 设备的扩展包开始支持 FreeBSD。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:487
msgid ""
"For VirtualBox(TM) to be aware of USB devices attached to the machine, the user needs to be a member of the "
"`operator` group."
msgstr "为了使 VirtualBox(TM) 获知 USB 设备连接到计算机，当前用户需要作为 `operator` 组的成员。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:491
#, no-wrap
msgid "# pw groupmod operator -m yourusername\n"
msgstr "# pw groupmod operator -m yourusername\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:494
msgid "Then, add the following to [.filename]#/etc/devfs.rules#, or create this file if it does not exist yet:"
msgstr "然后，将以下内容添加到 [.filename]#/etc/devfs.rules#，如果文件并不存在请新建该文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:499
#, no-wrap
msgid ""
"[system=10]\n"
"add path 'usb/*' mode 0660 group operator\n"
msgstr ""
"[system=10]\n"
"add path 'usb/*' mode 0660 group operator\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:502
msgid "To load these new rules, add the following to [.filename]#/etc/rc.conf#:"
msgstr "添加以下内容到 [.filename]#/etc/rc.conf# 来加载新建的规则："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:506
#, no-wrap
msgid "devfs_system_ruleset=\"system\"\n"
msgstr "devfs_system_ruleset=\"system\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:509
msgid "Then, restart devfs:"
msgstr "然后重启 devfs 使之生效："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:513
#: content/zh-cn/books/handbook/virtualization/_index.adoc:553
#, no-wrap
msgid "# service devfs restart\n"
msgstr "# service devfs restart\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:516
msgid ""
"Restart the login session and VirtualBox(TM) for these changes to take effect, and create USB filters as necessary."
msgstr "重启登录会话和 VirtualBox(TM) 来使这些更改生效，还可按需要创建 USB 过滤规则。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:518
#, no-wrap
msgid "VirtualBox(TM) Host DVD/CD Access"
msgstr "访问 VirtualBox(TM) 宿主的 DVD/CD"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:526
msgid ""
"Access to the host DVD/CD drives from guests is achieved through the sharing of the physical drives.  Within "
"VirtualBox(TM), this is set up from the Storage window in the Settings of the virtual machine.  If needed, create "
"an empty IDECD/DVD device first.  Then choose the Host Drive from the popup menu for the virtual CD/DVD drive "
"selection.  A checkbox labeled `Passthrough` will appear. This allows the virtual machine to use the hardware "
"directly.  For example, audio CDs or the burner will only function if this option is selected."
msgstr ""
"从客户机访问宿主的 DVD/CD 驱动器是通过共享物理光驱来实现的。在 VirtualBox(TM) 中，从虚拟机设置中的存储视窗进行设置。如"
"果需要，请先创建一个空白的 IDECD/DVD 设备，然后在虚拟 CD/DVD 驱动器的弹出菜单中选择宿主光驱。这里会出现穿透模式复选"
"框，这个模式可以让客户机直接访问宿主光驱硬件。例如，音频 CD 和烧录软件只有在启用该模式时能够正常工作。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:528
msgid ""
"HAL needs to run for VirtualBox(TM)DVD/CD functions to work, so enable it in [.filename]#/etc/rc.conf# and start it "
"if it is not already running:"
msgstr "VirtualBox(TM) DVD/CD 功能需要运行 HAL，所以请在 [.filename]#/etc/rc.conf# 中启用它。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:532
#, no-wrap
msgid "hald_enable=\"YES\"\n"
msgstr "hald_enable=\"YES\"\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:537
#, no-wrap
msgid "# service hald start\n"
msgstr "# service hald start\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:542
msgid ""
"In order for users to be able to use VirtualBox(TM)DVD/CD functions, they need access to [.filename]#/dev/xpt0#, [."
"filename]#/dev/cdN#, and [.filename]#/dev/passN#.  This is usually achieved by making the user a member of "
"`operator`.  Permissions to these devices have to be corrected by adding these lines to [.filename]#/etc/devfs."
"conf#:"
msgstr ""
"为了使用户能够使用 VirtualBox(TM) DVD/CD 功能，用户需要访问 [.filename]#/dev/xpt0#，[.filename]#/dev/cdN# 和 "
"[.filename]#/dev/passN# 的权限。通常来说，将用户加入 `operator` 组即可。请向 [.filename]#/etc/devfs.conf# 添加以下内容"
"来纠正这些设备的权限："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:548
#, no-wrap
msgid ""
"perm cd* 0660\n"
"perm xpt0 0660\n"
"perm pass* 0660\n"
msgstr ""
"perm cd* 0660\n"
"perm xpt0 0660\n"
"perm pass* 0660\n"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:556
#, no-wrap
msgid "FreeBSD as a Host with bhyve"
msgstr "使用 FreeBSD 上的 bhyve 虚拟机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:562
msgid ""
"The bhyve BSD-licensed hypervisor became part of the base system with FreeBSD 10.0-RELEASE.  This hypervisor "
"supports a number of guests, including FreeBSD, OpenBSD, and many Linux(R) distributions.  By default, bhyve "
"provides access to serial console and does not emulate a graphical console.  Virtualization offload features of "
"newer CPUs are used to avoid the legacy methods of translating instructions and manually managing memory mappings."
msgstr ""
"BSD 许可的 bhyve 虚拟机管理器随着 FreeBSD 10.0-RELEASE 已经成为了底层系统的一部分。这个虚拟机管理器支持数种客户机，"
"包括 FreeBSD，OpenBSD 和数个 Linux(R) 发行版。默认情况下，bhyve 提供对串行控制台的访问而不模拟图形化控制台。其利用较新"
"的 CPU 上的 virtualization offload 功能来避免使用过时方法翻译指令和手动管理内存映射。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:570
msgid ""
"The bhyve design requires a processor that supports Intel(R) Extended Page Tables (EPT) or AMD(R) Rapid "
"Virtualization Indexing (RVI) or Nested Page Tables (NPT).  Hosting Linux(R) guests or FreeBSD guests with more "
"than one vCPU requires VMX unrestricted mode support (UG).  Most newer processors, specifically the Intel(R) "
"Core(TM) i3/i5/i7 and Intel(R) Xeon(TM) E3/E5/E7, support these features.  UG support was introduced with Intel's "
"Westmere micro-architecture.  For a complete list of Intel(R) processors that support EPT, refer to https://ark."
"intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&0_ExtendedPageTables=True[].  RVI is "
"found on the third generation and later of the AMD Opteron(TM) (Barcelona) processors.  The easiest way to tell if "
"a processor supports bhyve is to run `dmesg` or look in [.filename]#/var/run/dmesg.boot# for the `POPCNT` processor "
"feature flag on the `Features2` line for AMD(R) processors or `EPT` and `UG` on the `VT-x` line for Intel(R) "
"processors."
msgstr ""
"bhyve 的设计需要支持 Intel(R) Extended Page Tables（EPT）或 AMD(R) Rapid Virtualization Indexing（RVI）或 Nested Page "
"Tables（NPT）的 CPU。以超过一枚 vCPU 运行 Linux 或者 FreeBSD 客户机需要 VMX unrestricted 模式支持（UG）。大多数新的"
"处理器，特别是 Intel(R) Core(TM) i3/i5/i7 和 Intel(R) Xeon(TM) E3/E5/E7 都支持这些功能。对 UG 的支持是从 Intel(R) 的 Westmere 微"
"架构引入的。若要查阅一份完整的支持 EPT 的 Intel(R) 处理器列表，请参见 https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&0_ExtendedPageTables=True[]"
"。RVI 在第三代以及之后的 AMD "
"Opteron(TM)（Barcelona）处理器中应用。判断处理器是否支持 bhyve 的方法是运行 demsg，或者在 [.filename]#/var/run/dmesg.boot# "
"中的 `Feature2` 一行查找 `POPCNT` 处理器功能标识（针对 AMD(R) 处理器）；或者在 `VT-x` 一行查找 `EPT` 和 `UG` 处"
"理器功能标识（针对 Intel(R) 处理器）。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:572
#, no-wrap
msgid "Preparing the Host"
msgstr "准备宿主机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:576
msgid ""
"The first step to creating a virtual machine in bhyve is configuring the host system.  First, load the bhyve kernel "
"module:"
msgstr "在 bhyve 中创建虚拟机的第一步是配置宿主操作系统。首先，加载 bhyve 内核模块："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:580
#, no-wrap
msgid "# kldload vmm\n"
msgstr "# kldload vmm\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:585
msgid ""
"Then, create a [.filename]#tap# interface for the network device in the virtual machine to attach to.  In order for "
"the network device to participate in the network, also create a bridge interface containing the [.filename]#tap# "
"interface and the physical interface as members.  In this example, the physical interface is _igb0_:"
msgstr ""
"然后，创建 [.filename]#tap# 介面以供虚拟机中的网络设备进行连接。为了让该网络设备加入网络，另外创建一个桥接介面，其中"
"包含 [.filename]#tap# 介面和物理网络介面作为成员。在下面的例子中，物理网络介面为 _igb0_："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:594
#, no-wrap
msgid ""
"# ifconfig tap0 create\n"
"# sysctl net.link.tap.up_on_open=1\n"
"net.link.tap.up_on_open: 0 -> 1\n"
"# ifconfig bridge0 create\n"
"# ifconfig bridge0 addm igb0 addm tap0\n"
"# ifconfig bridge0 up\n"
msgstr ""
"# ifconfig tap0 create\n"
"# sysctl net.link.tap.up_on_open=1\n"
"net.link.tap.up_on_open: 0 -> 1\n"
"# ifconfig bridge0 create\n"
"# ifconfig bridge0 addm igb0 addm tap0\n"
"# ifconfig bridge0 up\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:597
#, no-wrap
msgid "Creating a FreeBSD Guest"
msgstr "创建一个 FreeBSD 客户机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:601
msgid ""
"Create a file to use as the virtual disk for the guest machine.  Specify the size and name of the virtual disk:"
msgstr "创建一个文件用作客户机的虚拟磁盘。指定这个虚拟磁盘的大小和名称："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:605
#, no-wrap
msgid "# truncate -s 16G guest.img\n"
msgstr "# truncate -s 16G guest.img\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:608
msgid "Download an installation image of FreeBSD to install:"
msgstr "下载 FreeBSD 的安装镜像："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:613
#, no-wrap
msgid ""
"# fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/12.2/FreeBSD-12.2-RELEASE-amd64-bootonly.iso\n"
"FreeBSD-12.2-RELEASE-amd64-bootonly.iso       100% of  230 MB  570 kBps 06m17s\n"
msgstr ""
"# fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/12.2/FreeBSD-12.2-RELEASE-amd64-bootonly.iso\n"
"FreeBSD-12.2-RELEASE-amd64-bootonly.iso       100% of  230 MB  570 kBps 06m17s\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:620
msgid ""
"FreeBSD comes with an example script for running a virtual machine in bhyve.  The script will start the virtual "
"machine and run it in a loop, so it will automatically restart if it crashes.  The script takes a number of options "
"to control the configuration of the machine: `-c` controls the number of virtual CPUs, `-m` limits the amount of "
"memory available to the guest, `-t` defines which [.filename]#tap# device to use, `-d` indicates which disk image "
"to use, `-i` tells bhyve to boot from the CD image instead of the disk, and `-I` defines which CD image to use.  "
"The last parameter is the name of the virtual machine, used to track the running machines.  This example starts the "
"virtual machine in installation mode:"
msgstr ""
"FreeBSD 附带了一个在 bhyve 中运行虚拟机的示例脚本。这个脚本将会启动虚拟机并循环执行，所以将在其崩溃时自动重新启动。"
"这个脚本可接受数个选项来配置虚拟机：`-c` 控制虚拟 CPU 的数量，`-m` 限制客户机的可用内存，`-t` 定义使用的 tap 设备，"
"`-d` 指定其使用的磁盘镜像，`-I` 控制 bhyve 从 CD 镜像引导，而非从磁盘引导，`-I` 指定要使用的 CD 镜像。最后一个参数是"
"虚拟机的名称，该名称将被用来追踪运行中的虚拟机。这个例子将在安装模式下启动虚拟机："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:624
#, no-wrap
msgid "# sh /usr/share/examples/bhyve/vmrun.sh -c 1 -m 1024M -t tap0 -d guest.img -i -I FreeBSD-12.2-RELEASE-amd64-bootonly.iso guestname\n"
msgstr "# sh /usr/share/examples/bhyve/vmrun.sh -c 1 -m 1024M -t tap0 -d guest.img -i -I FreeBSD-12.2-RELEASE-amd64-bootonly.iso guestname\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:628
msgid ""
"The virtual machine will boot and start the installer.  After installing a system in the virtual machine, when the "
"system asks about dropping in to a shell at the end of the installation, choose btn:[Yes]."
msgstr ""
"这个虚拟机将会引导并启动安装器。在虚拟机中完成系统安装并进入最后阶段，当系统提示是否进入 shell 时，选择 btn:[Yes]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:633
msgid ""
"Reboot the virtual machine.  While rebooting the virtual machine causes bhyve to exit, the [.filename]#vmrun.sh# "
"script runs `bhyve` in a loop and will automatically restart it.  When this happens, choose the reboot option from "
"the boot loader menu in order to escape the loop.  Now the guest can be started from the virtual disk:"
msgstr ""
"重新启动虚拟机。重启会导致 bhyve 退出，这时循环执行 `bhyve` 的 [.filename]#vmrun.sh# 脚本会自动重启虚拟机。这时请从"
"引导器菜单中选择重启来跳出循环。之后，客户机就可以从虚拟磁盘中启动了："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:637
#, no-wrap
msgid "# sh /usr/share/examples/bhyve/vmrun.sh -c 4 -m 1024M -t tap0 -d guest.img guestname\n"
msgstr "# sh /usr/share/examples/bhyve/vmrun.sh -c 4 -m 1024M -t tap0 -d guest.img guestname\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:640
#, no-wrap
msgid "Creating a Linux(R) Guest"
msgstr "创建一个 Linux(R) 客户机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:643
msgid ""
"In order to boot operating systems other than FreeBSD, the package:sysutils/grub2-bhyve[] port must be first "
"installed."
msgstr "要引导进入 FreeBSD 以外的系统，必须先安装 package:sysutils/grub2-bhyve[]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:645
msgid "Next, create a file to use as the virtual disk for the guest machine:"
msgstr "接下来，创建一个文件用作客户机的虚拟磁盘："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:649
#, no-wrap
msgid "# truncate -s 16G linux.img\n"
msgstr "# truncate -s 16G linux.img\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:655
msgid ""
"Starting a virtual machine with bhyve is a two step process.  First a kernel must be loaded, then the guest can be "
"started.  The Linux(R) kernel is loaded with package:sysutils/grub2-bhyve[].  Create a [.filename]#device.map# that "
"grub will use to map the virtual devices to the files on the host system:"
msgstr ""
"使用 bhyve 启动虚拟机分为两个步骤。首先要加载一个内核，然后启动客户机。Linux(R) 内核通过 package:sysutils/grub2-bhyve[]"
" 加载。创建 [.filename]#device.map# 令 grub 将虚拟设备映射到宿主机上的镜像文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:660
#, no-wrap
msgid ""
"(hd0) ./linux.img\n"
"(cd0) ./somelinux.iso\n"
msgstr ""
"(hd0) ./linux.img\n"
"(cd0) ./somelinux.iso\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:663
msgid "Use package:sysutils/grub2-bhyve[] to load the Linux(R) kernel from the ISO image:"
msgstr "使用 package:sysutils/grub2-bhyve[] 将 Linux(R) 内核从 ISO 文件中加载："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:667
#, no-wrap
msgid "# grub-bhyve -m device.map -r cd0 -M 1024M linuxguest\n"
msgstr "# grub-bhyve -m device.map -r cd0 -M 1024M linuxguest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:672
msgid ""
"This will start grub.  If the installation CD contains a [.filename]#grub.cfg#, a menu will be displayed.  If not, "
"the `vmlinuz` and `initrd` files must be located and loaded manually:"
msgstr ""
"这将启动 grub。如果安装 CD 中包含 [.filename]#grub.cfg#，将会显示一个菜单；否则你需要手动指明并加载 `vmlinuz` 和 "
"`initrd` 文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:683
#, no-wrap
msgid ""
"grub> ls\n"
"(hd0) (cd0) (cd0,msdos1) (host)\n"
"grub> ls (cd0)/isolinux\n"
"boot.cat boot.msg grub.conf initrd.img isolinux.bin isolinux.cfg memtest\n"
"splash.jpg TRANS.TBL vesamenu.c32 vmlinuz\n"
"grub> linux (cd0)/isolinux/vmlinuz\n"
"grub> initrd (cd0)/isolinux/initrd.img\n"
"grub> boot\n"
msgstr ""
"grub> ls\n"
"(hd0) (cd0) (cd0,msdos1) (host)\n"
"grub> ls (cd0)/isolinux\n"
"boot.cat boot.msg grub.conf initrd.img isolinux.bin isolinux.cfg memtest\n"
"splash.jpg TRANS.TBL vesamenu.c32 vmlinuz\n"
"grub> linux (cd0)/isolinux/vmlinuz\n"
"grub> initrd (cd0)/isolinux/initrd.img\n"
"grub> boot\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:686
msgid "Now that the Linux(R) kernel is loaded, the guest can be started:"
msgstr "现在 Linux(R) 内核就加载完毕了，可以启动客户机："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:691
#, no-wrap
msgid ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \\\n"
"    -s 4:0,ahci-cd,./somelinux.iso -l com1,stdio -c 4 -m 1024M linuxguest\n"
msgstr ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \\\n"
"    -s 4:0,ahci-cd,./somelinux.iso -l com1,stdio -c 4 -m 1024M linuxguest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:697
msgid ""
"The system will boot and start the installer.  After installing a system in the virtual machine, reboot the virtual "
"machine.  This will cause bhyve to exit.  The instance of the virtual machine needs to be destroyed before it can "
"be started again:"
msgstr ""
"系统将会引导进入并启动安装器。在虚拟机中完成系统安装之后，重新启动虚拟机。bhyve 会在这时退出。请先销毁这个虚拟机实"
"例，然后重新启动："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:701
#: content/zh-cn/books/handbook/virtualization/_index.adoc:737
#, no-wrap
msgid "# bhyvectl --destroy --vm=linuxguest\n"
msgstr "# bhyvectl --destroy --vm=linuxguest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:705
msgid "Now the guest can be started directly from the virtual disk.  Load the kernel:"
msgstr "现在客户机可以直接从磁盘镜像中启动了。首先加载内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:719
#, no-wrap
msgid ""
"# grub-bhyve -m device.map -r hd0,msdos1 -M 1024M linuxguest\n"
"grub> ls\n"
"(hd0) (hd0,msdos2) (hd0,msdos1) (cd0) (cd0,msdos1) (host)\n"
"(lvm/VolGroup-lv_swap) (lvm/VolGroup-lv_root)\n"
"grub> ls (hd0,msdos1)/\n"
"lost+found/ grub/ efi/ System.map-2.6.32-431.el6.x86_64 config-2.6.32-431.el6.x\n"
"86_64 symvers-2.6.32-431.el6.x86_64.gz vmlinuz-2.6.32-431.el6.x86_64\n"
"initramfs-2.6.32-431.el6.x86_64.img\n"
"grub> linux (hd0,msdos1)/vmlinuz-2.6.32-431.el6.x86_64 root=/dev/mapper/VolGroup-lv_root\n"
"grub> initrd (hd0,msdos1)/initramfs-2.6.32-431.el6.x86_64.img\n"
"grub> boot\n"
msgstr ""
"# grub-bhyve -m device.map -r hd0,msdos1 -M 1024M linuxguest\n"
"grub> ls\n"
"(hd0) (hd0,msdos2) (hd0,msdos1) (cd0) (cd0,msdos1) (host)\n"
"(lvm/VolGroup-lv_swap) (lvm/VolGroup-lv_root)\n"
"grub> ls (hd0,msdos1)/\n"
"lost+found/ grub/ efi/ System.map-2.6.32-431.el6.x86_64 config-2.6.32-431.el6.x\n"
"86_64 symvers-2.6.32-431.el6.x86_64.gz vmlinuz-2.6.32-431.el6.x86_64\n"
"initramfs-2.6.32-431.el6.x86_64.img\n"
"grub> linux (hd0,msdos1)/vmlinuz-2.6.32-431.el6.x86_64 root=/dev/mapper/VolGroup-lv_root\n"
"grub> initrd (hd0,msdos1)/initramfs-2.6.32-431.el6.x86_64.img\n"
"grub> boot\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:722
msgid "Boot the virtual machine:"
msgstr "引导进入虚拟机："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:727
#, no-wrap
msgid ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 \\\n"
"    -s 3:0,virtio-blk,./linux.img -l com1,stdio -c 4 -m 1024M linuxguest\n"
msgstr ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 \\\n"
"    -s 3:0,virtio-blk,./linux.img -l com1,stdio -c 4 -m 1024M linuxguest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:733
msgid ""
"Linux(R) will now boot in the virtual machine and eventually present you with the login prompt.  Login and use the "
"virtual machine.  When you are finished, reboot the virtual machine to exit bhyve.  Destroy the virtual machine "
"instance:"
msgstr "虚拟机中的 Linux(R) 将会启动并提示你登录。当你不再使用虚拟机时，重新启动虚拟机来退出 bhyve，并销毁虚拟机实例："

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:740
#, no-wrap
msgid "Booting bhyve Virtual Machines with UEFI Firmware"
msgstr "使用 UEFI 固件引导 bhyve 虚拟机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:744
msgid ""
"In addition to bhyveload and grub-bhyve, the bhyve hypervisor can also boot virtual machines using the UEFI "
"userspace firmware.  This option may support guest operating systems that are not supported by the other loaders."
msgstr ""
"除了 bhyveload 和 grub-bhyve，bhyve 虚拟机管理器还可使用 UEFI 用户态固件来引导虚拟机。这可能兼容其他引导器不支持的客"
"户机操作系统。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:747
msgid ""
"In order to make use of the UEFI support in bhyve, first obtain the UEFI firmware images.  This can be done by "
"installing package:sysutils/bhyve-firmware[] port or package."
msgstr ""
"要利用 bhyve 的 UEFI 支持，首先要生成 UEFI 固件镜像。你可以通过 package:sysutils/bhyve-firmware[] port 或 package 来"
"实现。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:750
msgid ""
"With the firmware in place, add the flags `-l bootrom,_/path/to/firmware_` to your bhyve command line.  The actual "
"bhyve command may look like this:"
msgstr "准备好固件之后，向 bhyve 命令添加标识 `-l bootrom,/path/to/firmware`，例如："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:758
#, no-wrap
msgid ""
"# bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \\\n"
"guest\n"
msgstr ""
"# bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \\\n"
"guest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:761
msgid ""
"package:sysutils/bhyve-firmware[] also contains a CSM-enabled firmware, to boot guests with no UEFI support in "
"legacy BIOS mode:"
msgstr ""
"package:sysutils/bhyve-firmware[] 还包含了启用 CSM 的固件，若要在 legacy BIOS 模式中启动不支持 UEFI 的客户机，请这样"
"运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:769
#, no-wrap
msgid ""
"# bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI_CSM.fd \\\n"
"guest\n"
msgstr ""
"# bhyve -AHP -s 0:0,hostbridge -s 1:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI_CSM.fd \\\n"
"guest\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:772
#, no-wrap
msgid "Graphical UEFI Framebuffer for bhyve Guests"
msgstr "为客户机设置图形化 UEFI Framebuffer"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:775
msgid ""
"The UEFI firmware support is particularly useful with predominantly graphical guest operating systems such as "
"Microsoft Windows(R)."
msgstr "UEFI 固件支持对主要使用图形化界面的客户机操作系统格外有用，例如 Microsoft Windows(R)。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:780
msgid ""
"Support for the UEFI-GOP framebuffer may also be enabled with the `-s 29,fbuf,tcp=_0.0.0.0:5900_` flags.  The "
"framebuffer resolution may be configured with `w=_800_` and `h=_600_`, and bhyve can be instructed to wait for a "
"VNC connection before booting the guest by adding `wait`.  The framebuffer may be accessed from the host or over "
"the network via the VNC protocol.  Additionally, `-s 30,xhci,tablet` can be added to achieve precise mouse cursor "
"synchronization with the host."
msgstr ""
"对 UEFI-GOP framebuffer 的支持也可以用标识 `-s 29,fbuf,tcp=_0.0.0.0:5900_` 来启用。framebuffer 的分辨率可以通过如 "
"`w=_800_` `h=_600_` 来设置。bhyve 也可以通过添加 `wait` 来等待 VNC 连接，之后再引导进入客户机。framebuffer 可以从宿"
"主机或者 VNC 协议的网络连接访问。此外，可以添加 `-s 30,xhci,tablet` 来实现与宿主机之间精确的鼠标同步。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:782
msgid "The resulting bhyve command would look like this:"
msgstr "最后的 bhyve 命令可能类似这样："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:792
#, no-wrap
msgid ""
"# bhyve -AHP -s 0:0,hostbridge -s 31:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-s 29,fbuf,tcp=0.0.0.0:5900,w=800,h=600,wait \\\n"
"-s 30,xhci,tablet \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \\\n"
"guest\n"
msgstr ""
"# bhyve -AHP -s 0:0,hostbridge -s 31:0,lpc \\\n"
"-s 2:0,virtio-net,tap1 -s 3:0,virtio-blk,./disk.img \\\n"
"-s 4:0,ahci-cd,./install.iso -c 4 -m 1024M \\\n"
"-s 29,fbuf,tcp=0.0.0.0:5900,w=800,h=600,wait \\\n"
"-s 30,xhci,tablet \\\n"
"-l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \\\n"
"guest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:795
msgid ""
"Note, in BIOS emulation mode, the framebuffer will cease receiving updates once control is passed from firmware to "
"guest operating system."
msgstr "在模拟 BIOS 模式下，当控制从固件移交到宿主机操作系统后，framebuffer 会停止接收更新。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:797
#, no-wrap
msgid "Using ZFS with bhyve Guests"
msgstr "在 bhyve 客户机中使用 ZFS"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:801
msgid ""
"If ZFS is available on the host machine, using ZFS volumes instead of disk image files can provide significant "
"performance benefits for the guest VMs.  A ZFS volume can be created by:"
msgstr "如果在宿主机上可以使用 ZFS，在客户机上使用 ZFS 卷取代磁盘镜像可以显著提高性能。你可以这样新建一个 ZFS 卷："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:805
#, no-wrap
msgid "# zfs create -V16G -o volmode=dev zroot/linuxdisk0\n"
msgstr "# zfs create -V16G -o volmode=dev zroot/linuxdisk0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:808
msgid "When starting the VM, specify the ZFS volume as the disk drive:"
msgstr "启动虚拟机时，指定 ZFS 卷作为磁盘驱动器："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:813
#, no-wrap
msgid ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s3:0,virtio-blk,/dev/zvol/zroot/linuxdisk0 \\\n"
"    -l com1,stdio -c 4 -m 1024M linuxguest\n"
msgstr ""
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s3:0,virtio-blk,/dev/zvol/zroot/linuxdisk0 \\\n"
"    -l com1,stdio -c 4 -m 1024M linuxguest\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:816
#, no-wrap
msgid "Virtual Machine Consoles"
msgstr "虚拟机控制台"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:823
msgid ""
"It is advantageous to wrap the bhyve console in a session management tool such as package:sysutils/tmux[] or "
"package:sysutils/screen[] in order to detach and reattach to the console.  It is also possible to have the console "
"of bhyve be a null modem device that can be accessed with `cu`.  To do this, load the [.filename]#nmdm# kernel "
"module and replace `-l com1,stdio` with `-l com1,/dev/nmdm0A`.  The [.filename]#/dev/nmdm# devices are created "
"automatically as needed, where each is a pair, corresponding to the two ends of the null modem cable ([.filename]#/"
"dev/nmdm0A# and [.filename]#/dev/nmdm0B#).  See man:nmdm[4] for more information."
msgstr ""
"你可以使用类似于 package:sysutils/tmux[] 或者 package:sysutils/screen[] 这样的管理工具将 bhyve 控制台封装在一个会话"
"中用来连接和断开控制台，这将带来一些好处。你还可以将一个空的调制解调器作为 bhyve 的控制台，然后使用 `cu` 来访问。若"
"要这样做，请加载 [.filename]#nmdm# 内核模块，然后将 `-l com1,stdio` 替换为 `-l com1,/dev/nmdm0A`。"
"设备 [.filename]#/dev/nmdm# 会自动按需创建并组成一对，对应着空的调制解调器的两端（[.filename]#/dev/nmdm0A# 和 "
"[.filename]#/dev/nmdm0B#）。查阅 man:nmdm[4] 获取更多信息。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:831
#, no-wrap
msgid ""
"# kldload nmdm\n"
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \\\n"
"    -l com1,/dev/nmdm0A -c 4 -m 1024M linuxguest\n"
"# cu -l /dev/nmdm0B\n"
"Connected\n"
msgstr ""
"# kldload nmdm\n"
"# bhyve -A -H -P -s 0:0,hostbridge -s 1:0,lpc -s 2:0,virtio-net,tap0 -s 3:0,virtio-blk,./linux.img \\\n"
"    -l com1,/dev/nmdm0A -c 4 -m 1024M linuxguest\n"
"# cu -l /dev/nmdm0B\n"
"Connected\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:833
#, no-wrap
msgid "Ubuntu 13.10 handbook ttyS0\n"
msgstr "Ubuntu 13.10 handbook ttyS0\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:835
#, no-wrap
msgid "handbook login:\n"
msgstr "handbook login:\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:838
#, no-wrap
msgid "Managing Virtual Machines"
msgstr "管理虚拟机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:842
msgid ""
"A device node is created in [.filename]#/dev/vmm# for each virtual machine.  This allows the administrator to "
"easily see a list of the running virtual machines:"
msgstr ""
"对于每个虚拟机，在 [.filename]#/dev/vmm# 下都会创建一个设备节点。这使得管理员很容易就能看到运行中的虚拟机列表："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:852
#, no-wrap
msgid ""
"# ls -al /dev/vmm\n"
"total 1\n"
"dr-xr-xr-x   2 root  wheel    512 Mar 17 12:19 ./\n"
"dr-xr-xr-x  14 root  wheel    512 Mar 17 06:38 ../\n"
"crw-------   1 root  wheel  0x1a2 Mar 17 12:20 guestname\n"
"crw-------   1 root  wheel  0x19f Mar 17 12:19 linuxguest\n"
"crw-------   1 root  wheel  0x1a1 Mar 17 12:19 otherguest\n"
msgstr ""
"# ls -al /dev/vmm\n"
"total 1\n"
"dr-xr-xr-x   2 root  wheel    512 Mar 17 12:19 ./\n"
"dr-xr-xr-x  14 root  wheel    512 Mar 17 06:38 ../\n"
"crw-------   1 root  wheel  0x1a2 Mar 17 12:20 guestname\n"
"crw-------   1 root  wheel  0x19f Mar 17 12:19 linuxguest\n"
"crw-------   1 root  wheel  0x1a1 Mar 17 12:19 otherguest\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:855
msgid "A specified virtual machine can be destroyed using `bhyvectl`:"
msgstr "通过 `bhyvectl` 可以销毁指定的虚拟机："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:859
#, no-wrap
msgid "# bhyvectl --destroy --vm=guestname\n"
msgstr "# bhyvectl --destroy --vm=guestname\n"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:862
#, no-wrap
msgid "Persistent Configuration"
msgstr "持久化配置"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:865
msgid ""
"In order to configure the system to start bhyve guests at boot time, the following configurations must be made in "
"the specified files:"
msgstr "要配置系统在启动时运行 bhyve 虚拟机，请进行如下配置："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:868
msgid "[.filename]#/etc/sysctl.conf#"
msgstr "[.filename]#/etc/sysctl.conf#"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:872
#, no-wrap
msgid "net.link.tap.up_on_open=1\n"
msgstr "net.link.tap.up_on_open=1\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:875
msgid "[.filename]#/etc/rc.conf#"
msgstr "[.filename]#/etc/rc.conf#"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:881
#, no-wrap
msgid ""
"cloned_interfaces=\"bridge0 tap0\"\n"
"ifconfig_bridge0=\"addm igb0 addm tap0\"\n"
"kld_list=\"nmdm vmm\"\n"
msgstr ""
"cloned_interfaces=\"bridge0 tap0\"\n"
"ifconfig_bridge0=\"addm igb0 addm tap0\"\n"
"kld_list=\"nmdm vmm\"\n"

#. type: Title ==
#: content/zh-cn/books/handbook/virtualization/_index.adoc:884
#, no-wrap
msgid "FreeBSD as a Xen(TM)-Host"
msgstr "使用 FreeBSD 上的 Xen(TM) 虚拟机"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:889
msgid ""
"Xen is a GPLv2-licensed https://en.wikipedia.org/wiki/Hypervisor#Classification[type 1 hypervisor] for Intel(R) and "
"ARM(R) architectures.  FreeBSD has included i386(TM) and AMD(R) 64-Bit https://wiki.xenproject.org/wiki/DomU[DomU] "
"and https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud[Amazon EC2] unprivileged domain (virtual machine) "
"support since FreeBSD 8.0 and includes Dom0 control domain (host) support in FreeBSD 11.0.  Support for para-"
"virtualized (PV) domains has been removed from FreeBSD 11 in favor of hardware virtualized (HVM) domains, which "
"provides better performance."
msgstr ""
"Xen 是一个 GPLv2 许可 https://en.wikipedia.org/wiki/Hypervisor#Classification[type 1 hypervisor]，适用于 Intel(R) 和 "
"ARM(R) 架构。FreeBSD 从 FreeBSD 8.0 开始就包含了对 i386(TM)，AMD(R) 64-Bit https://wiki.xenproject.org/wiki/DomU[DomU] 和 "
"https://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud[Amazon EC2] 非特权域（虚拟机）的支持，并在 FreeBSD 11.0 "
"中包含了对 Dom0 控制域（宿主机）的支持。在 FreeBSD 11 中，取消了对准虚拟化（PV）域的支持，转而支持硬件虚拟化（HVM）"
"域，这提供了更好的性能。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:897
msgid ""
"Xen(TM) is a bare-metal hypervisor, which means that it is the first program loaded after the BIOS.  A special "
"privileged guest called the Domain-0 (`Dom0` for short) is then started.  The Dom0 uses its special privileges to "
"directly access the underlying physical hardware, making it a high-performance solution.  It is able to access the "
"disk controllers and network adapters directly.  The Xen(TM) management tools to manage and control the Xen(TM) "
"hypervisor are also used by the Dom0 to create, list, and destroy VMs.  Dom0 provides virtual disks and networking "
"for unprivileged domains, often called `DomU`.  Xen(TM) Dom0 can be compared to the service console of other "
"hypervisor solutions, while the DomU is where individual guest VMs are run."
msgstr ""
"Xen(TM) 是一个裸机虚拟机管理器，这意味着它是在 BIOS 之后加载的第一个程序。然后会启动一个称为 Domain-0（简称 `Dom0`）的"
"特殊权限客户机。Dom0 利用其特殊权限直接访问底层物理硬件，使其成为一个高性能的解决方案。它能够直接访问磁盘控制器和网"
"络适配器。用于管理和控制 Xen(TM) 虚拟机管理器的 Xen(TM) 管理工具也被 Dom0 用来创建、列出和销毁虚拟机。Dom0 为非特权域提供"
"虚拟磁盘和网络，通常称为 `DomU`。Xen(TM) Dom0 可以比作其他虚拟机管理器解决方案的服务控制台，而 DomU 是运行单个客户虚拟"
"机的地方。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:904
msgid ""
"Xen(TM) can migrate VMs between different Xen(TM) servers.  When the two xen hosts share the same underlying "
"storage, the migration can be done without having to shut the VM down first.  Instead, the migration is performed "
"live while the DomU is running and there is no need to restart it or plan a downtime.  This is useful in "
"maintenance scenarios or upgrade windows to ensure that the services provided by the DomU are still provided.  Many "
"more features of Xen(TM) are listed on the https://wiki.xenproject.org/wiki/Category:Overview[Xen Wiki Overview "
"page].  Note that not all features are supported on FreeBSD yet."
msgstr ""
"Xen(TM) 可以在不同的 Xen(TM) 服务器之间迁移虚拟机。当两台 xen 主机共享相同的底层存储时，迁移过程可以不必先关闭虚拟机。取而"
"代之的是，迁移是在 DomU 运行过程中实时进行的，不需要重新启动或计划停机。这在维护场景或升级窗口中非常有用，可以确保 "
"DomU 提供的服务持续在线。Xen(TM) 的许多其他功能都罗列在 https://wiki.xenproject.org/wiki/Category:Overview[Xen Wiki Overview page]"
" 上。请注意，FreeBSD 还不支持其全部功能。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:906
#, no-wrap
msgid "Hardware Requirements for Xen(TM) Dom0"
msgstr "Xen(TM) Dom0 的硬件要求"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:910
msgid ""
"To run the Xen(TM) hypervisor on a host, certain hardware functionality is required.  Hardware virtualized domains "
"require Extended Page Table (http://en.wikipedia.org/wiki/Extended_Page_Table[EPT]) and Input/Output Memory "
"Management Unit (http://en.wikipedia.org/wiki/List_of_IOMMU-supporting_hardware[IOMMU]) support in the host "
"processor."
msgstr ""
"要在宿主机上运行 Xen(TM) hypervisor，需要特定的硬件功能。硬件虚拟化域需要宿主机的处理器支持 http://en.wikipedia.org/wiki/Extended_Page_Table[EPT]"
" 和输入输出内存管理单元"
"（http://en.wikipedia.org/wiki/List_of_IOMMU-supporting_hardware[IOMMU]）。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:914
msgid "In order to run a FreeBSD Xen(TM) Dom0 the box must be booted using legacy boot (BIOS)."
msgstr "要运行 FreeBSD Xen(TM) Dom0，这个容器必须使用 legacy boot（BIOS）引导。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:917
#, no-wrap
msgid "Xen(TM) Dom0 Control Domain Setup"
msgstr "设置 Xen(TM) Dom0 控制域"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:920
msgid ""
"Users of FreeBSD 11 should install the package:emulators/xen-kernel47[] and package:sysutils/xen-tools47[] packages "
"that are based on Xen version 4.7. Systems running on FreeBSD-12.0 or newer can use Xen 4.11 provided by package:"
"emulators/xen-kernel411[] and package:sysutils/xen-tools411[], respectively."
msgstr ""
"FreeBSD 11 用户应该安装基于 Xen 4.7 的 package:emulators/xen-kernel47[] 和 package:sysutils/xen-tools47[] 软件包。"
"FreeBSD-12.0 或更新版本的用户可以使用基于 Xen 4.11 的 package:emulators/xen-kernel411[] 和 "
"package:sysutils/xen-tools411[]。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:924
msgid ""
"Configuration files must be edited to prepare the host for the Dom0 integration after the Xen packages are "
"installed.  An entry to [.filename]#/etc/sysctl.conf# disables the limit on how many pages of memory are allowed to "
"be wired.  Otherwise, DomU VMs with higher memory requirements will not run."
msgstr ""
"在安装 Xen 软件包后，必须编辑配置文件来为宿主机整合 Dom0 做准备。在 [.filename]#/etc/sysctl.conf# 中加入一个条目，禁"
"用对 wired 内存页数的限制。否则，对内存要求较高的 DomU 虚拟机将无法运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:928
#, no-wrap
msgid "# echo 'vm.max_wired=-1' >> /etc/sysctl.conf\n"
msgstr "# echo 'vm.max_wired=-1' >> /etc/sysctl.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:934
msgid ""
"Another memory-related setting involves changing [.filename]#/etc/login.conf#, setting the `memorylocked` option to "
"`unlimited`.  Otherwise, creating DomU domains may fail with `Cannot allocate memory` errors.  After making the "
"change to [.filename]#/etc/login.conf#, run `cap_mkdb` to update the capability database.  See crossref:"
"security[security-resourcelimits,\"Resource Limits\"] for details."
msgstr ""
"另一个内存相关的设置需要修改 [.filename]#/etc/login.conf#，将 `memorylocked` 选项设置为 `unlimited`。否则，创建 "
"DomU 时可能遇到错误 `Cannot allocate memory` 而失败。在修改 [.filename]#/etc/login.conf# 后，运行 `cap_mkdb` 来更新"
"功能数据库。参阅 crossref:security[security-resourcelimits,资源限制] 获得更多信息。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:939
#, no-wrap
msgid ""
"# sed -i '' -e 's/memorylocked=64K/memorylocked=unlimited/' /etc/login.conf\n"
"# cap_mkdb /etc/login.conf\n"
msgstr ""
"# sed -i '' -e 's/memorylocked=64K/memorylocked=unlimited/' /etc/login.conf\n"
"# cap_mkdb /etc/login.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:942
msgid "Add an entry for the Xen(TM) console to [.filename]#/etc/ttys#:"
msgstr "为 Xen(TM) 控制台在 [.filename]#/etc/ttys# 添加一个条目："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:946
#, no-wrap
msgid "# echo 'xc0     \"/usr/libexec/getty Pc\"         xterm   onifconsole  secure' >> /etc/ttys\n"
msgstr "# echo 'xc0     \"/usr/libexec/getty Pc\"         xterm   onifconsole  secure' >> /etc/ttys\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:953
msgid ""
"Selecting a Xen(TM) kernel in [.filename]#/boot/loader.conf# activates the Dom0.  Xen(TM) also requires resources "
"like CPU and memory from the host machine for itself and other DomU domains.  How much CPU and memory depends on "
"the individual requirements and hardware capabilities.  In this example, 8 GB of memory and 4 virtual CPUs are made "
"available for the Dom0.  The serial console is also activated and logging options are defined."
msgstr ""
"在 [.filename]#/boot/loader.conf# 中选择一个 Xen(TM) 内核会启用 Dom0。Xen(TM) 还需要宿主机上的 CPU 和 内存等资源以供自身和"
"其他 DomU 域使用。分配多少 CPU 和内存取决于个人需求和硬件性能。在这个例子中，我们为 Dom0 分配 8 GB 的内存和 4 颗虚"
"拟 CPU，同时启用串行控制台，并定义日志设置。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:955
msgid "The following command is used for Xen 4.7 packages:"
msgstr "如下命令用于 Xen 4.7："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:962
#, no-wrap
msgid ""
"# echo 'hw.pci.mcfg=0' >> /boot/loader.conf\n"
"# echo 'if_tap_load=\"YES\"' >> /boot/loader.conf\n"
"# echo 'xen_kernel=\"/boot/xen\"' >> /boot/loader.conf\n"
"# echo 'xen_cmdline=\"dom0_mem=8192M dom0_max_vcpus=4 dom0pvh=1 console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all\"' >> /boot/loader.conf\n"
msgstr ""
"# echo 'hw.pci.mcfg=0' >> /boot/loader.conf\n"
"# echo 'if_tap_load=\"YES\"' >> /boot/loader.conf\n"
"# echo 'xen_kernel=\"/boot/xen\"' >> /boot/loader.conf\n"
"# echo 'xen_cmdline=\"dom0_mem=8192M dom0_max_vcpus=4 dom0pvh=1 console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all\"' >> /boot/loader.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:965
msgid "For Xen versions 4.11 and higher, the following command should be used instead:"
msgstr "而在 Xen 4.11 或更高版本中，应使用："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:971
#, no-wrap
msgid ""
"# echo 'if_tap_load=\"YES\"' >> /boot/loader.conf\n"
"# echo 'xen_kernel=\"/boot/xen\"' >> /boot/loader.conf\n"
"# echo 'xen_cmdline=\"dom0_mem=8192M dom0_max_vcpus=4 dom0=pvh console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all\"' >> /boot/loader.conf\n"
msgstr ""
"# echo 'if_tap_load=\"YES\"' >> /boot/loader.conf\n"
"# echo 'xen_kernel=\"/boot/xen\"' >> /boot/loader.conf\n"
"# echo 'xen_cmdline=\"dom0_mem=8192M dom0_max_vcpus=4 dom0=pvh console=com1,vga com1=115200,8n1 guest_loglvl=all loglvl=all\"' >> /boot/loader.conf\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:978
msgid ""
"Log files that Xen(TM) creates for the DomU VMs are stored in [.filename]#/var/log/xen#.  Please be sure to check "
"the contents of that directory if experiencing issues."
msgstr "Xen(TM) 为 DomU 虚拟机创建的日志存储在 [.filename]#/var/log/xen#。如果遇到问题，请记得查看该目录中的内容。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:981
msgid "Activate the xencommons service during system startup:"
msgstr "在系统启动时启用 xencommons 服务："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:985
#, no-wrap
msgid "# sysrc xencommons_enable=yes\n"
msgstr "# sysrc xencommons_enable=yes\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:991
msgid ""
"These settings are enough to start a Dom0-enabled system.  However, it lacks network functionality for the DomU "
"machines.  To fix that, define a bridged interface with the main NIC of the system which the DomU VMs can use to "
"connect to the network.  Replace _em0_ with the host network interface name."
msgstr ""
"进行这些设置便可以启动 Dom-0 系统了，然而我们还没有为 DomU 虚拟机提供网络功能。为了修复这一点，请在系统的主网络介面"
"控制器定义一个桥接网络介面，以供 DomU 虚拟机连接到网络。请用你的主网络介面名称替换 _em0_ ："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:997
#, no-wrap
msgid ""
"# sysrc cloned_interfaces=\"bridge0\"\n"
"# sysrc ifconfig_bridge0=\"addm em0 SYNCDHCP\"\n"
"# sysrc ifconfig_em0=\"up\"\n"
msgstr ""
"# sysrc cloned_interfaces=\"bridge0\"\n"
"# sysrc ifconfig_bridge0=\"addm em0 SYNCDHCP\"\n"
"# sysrc ifconfig_em0=\"up\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1000
msgid "Restart the host to load the Xen(TM) kernel and start the Dom0."
msgstr "重启宿主机以加载 Xen(TM) 内核并启动 Dom0："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1004
#, no-wrap
msgid "# reboot\n"
msgstr "# reboot\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1007
msgid ""
"After successfully booting the Xen(TM) kernel and logging into the system again, the Xen(TM) management tool `xl` "
"is used to show information about the domains."
msgstr "成功引导 Xen(TM) 内核并再次登录进入系统后，使用 Xen(TM) 管理工具 xl 显示域的信息："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1013
#, no-wrap
msgid ""
"# xl list\n"
"Name                                        ID   Mem VCPUs      State   Time(s)\n"
"Domain-0                                     0  8192     4     r-----     962.0\n"
msgstr ""
"# xl list\n"
"Name                                        ID   Mem VCPUs      State   Time(s)\n"
"Domain-0                                     0  8192     4     r-----     962.0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1019
msgid ""
"The output confirms that the Dom0 (called `Domain-0`) has the ID `0` and is running.  It also has the memory and "
"virtual CPUs that were defined in [.filename]#/boot/loader.conf# earlier.  More information can be found in the "
"https://www.xenproject.org/help/documentation.html[Xen(TM) Documentation].  DomU guest VMs can now be created."
msgstr ""
"该输出结果确认了 Dom0（显示为 `Domain-0`）具有 ID `0` 并且正在运行。它也拥有先前在 [.filename]#/boot/loader.conf# 中"
"定义的内存和虚拟 CPU。更多信息可以在 https://www.xenproject.org/help/documentation.html[Xen(TM) Documentation] 中找"
"到。现在就可以创建 DomU 客户虚拟机了。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1021
#, no-wrap
msgid "Xen(TM) DomU Guest VM Configuration"
msgstr "Xen(TM) DomU 客户虚拟机配置"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1028
msgid ""
"Unprivileged domains consist of a configuration file and virtual or physical hard disks.  Virtual disk storage for "
"the DomU can be files created by man:truncate[1] or ZFS volumes as described in crossref:zfs[zfs-zfs-"
"volume,“Creating and Destroying Volumes”].  In this example, a 20 GB volume is used.  A VM is created with the ZFS "
"volume, a FreeBSD ISO image, 1 GB of RAM and two virtual CPUs.  The ISO installation file is retrieved with man:"
"fetch[1] and saved locally in a file called [.filename]#freebsd.iso#."
msgstr ""
"非特权域由一个配置文件和虚拟或物理磁盘组成。如 crossref:zfs[zfs-zfs-volume,创建和销毁卷] 所述，DomU 的虚拟磁盘可以是"
"由 man:truncate[1] 创建的文件或者 ZFS 卷。在这个例子中，我们使用一个 20 GB 的卷。该虚拟机由这个 ZFS 卷、FreeBSD ISO "
"镜像、1GB 内存和两颗虚拟 CPU 组成。ISO 安装文件使用 man:fetch[1] 获取，文件在本地储存为 [.filename]#freebsd.iso# ："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1032
#, no-wrap
msgid "# fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/12.0/FreeBSD-12.0-RELEASE-amd64-bootonly.iso -o freebsd.iso\n"
msgstr "# fetch ftp://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/12.0/FreeBSD-12.0-RELEASE-amd64-bootonly.iso -o freebsd.iso\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1035
msgid "A ZFS volume of 20 GB called [.filename]#xendisk0# is created to serve as the disk space for the VM."
msgstr "创建一个名为 [.filename]#xendisk0# 的 20 GB ZFS 卷用作虚拟机的磁盘空间。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1039
#, no-wrap
msgid "# zfs create -V20G -o volmode=dev zroot/xendisk0\n"
msgstr "# zfs create -V20G -o volmode=dev zroot/xendisk0\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1044
msgid ""
"The new DomU guest VM is defined in a file.  Some specific definitions like name, keymap, and VNC connection "
"details are also defined.  The following [.filename]#freebsd.cfg# contains a minimum DomU configuration for this "
"example:"
msgstr ""
"这个 DomU 客户虚拟机定义在一个文件中。诸如名称、键位和 VNC 连接的细节定义也在其中。如下的例子中，"
"[.filename]#freebsd.cfg# 包含一个最小化的 DomU 配置："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1061
#, no-wrap
msgid ""
"# cat freebsd.cfg\n"
"builder = \"hvm\" <.>\n"
"name = \"freebsd\" <.>\n"
"memory = 1024 <.>\n"
"vcpus = 2 <.>\n"
"vif = [ 'mac=00:16:3E:74:34:32,bridge=bridge0' ] <.>\n"
"disk = [\n"
"'/dev/zvol/tank/xendisk0,raw,hda,rw', <.>\n"
"'/root/freebsd.iso,raw,hdc:cdrom,r' <.>\n"
"  ]\n"
"vnc = 1 <.>\n"
"vnclisten = \"0.0.0.0\"\n"
"serial = \"pty\"\n"
"usbdevice = \"tablet\"\n"
msgstr ""
"# cat freebsd.cfg\n"
"builder = \"hvm\" <.>\n"
"name = \"freebsd\" <.>\n"
"memory = 1024 <.>\n"
"vcpus = 2 <.>\n"
"vif = [ 'mac=00:16:3E:74:34:32,bridge=bridge0' ] <.>\n"
"disk = [\n"
"'/dev/zvol/tank/xendisk0,raw,hda,rw', <.>\n"
"'/root/freebsd.iso,raw,hdc:cdrom,r' <.>\n"
"  ]\n"
"vnc = 1 <.>\n"
"vnclisten = \"0.0.0.0\"\n"
"serial = \"pty\"\n"
"usbdevice = \"tablet\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1064
msgid "These lines are explained in more detail:"
msgstr "这些命令的详细解释："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1066
msgid ""
"This defines what kind of virtualization to use. `hvm` refers to hardware-assisted virtualization or hardware "
"virtual machine. Guest operating systems can run unmodified on CPUs with virtualization extensions, providing "
"nearly the same performance as running on physical hardware. `generic` is the default value and creates a PV domain."
msgstr ""
"定义使用的虚拟化类型。`hvm` 表示硬件辅助的虚拟化或者硬件虚拟机。客户机操作系统可以通过虚拟化插件运行在未经修改的 "
"CPU 上，提供近乎在物理硬件上运行的性能。而 `generic` 是默认值，将会创建一个 PV 域。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1067
msgid "Name of this virtual machine to distinguish it from others running on the same Dom0. Required."
msgstr "指定虚拟机名称，以便和其他同样运行在 Dom0 的虚拟机区分开来。这是必需项："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1068
msgid ""
"Quantity of RAM in megabytes to make available to the VM. This amount is subtracted from the hypervisor's total "
"available memory, not the memory of the Dom0."
msgstr "分配给虚拟机的内存容量（用 MB 表示）。这个容量是从虚拟机管理器的总可用内存中分配的，而不是 Dom0 的内存："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1069
msgid ""
"Number of virtual CPUs available to the guest VM. For best performance, do not create guests with more virtual CPUs "
"than the number of physical CPUs on the host."
msgstr "分配给虚拟机的虚拟 CPU 数量。为了实现最佳性能，请不要为创建的虚拟机分配多于宿主机物理 CPU 数量的虚拟 CPU："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1070
msgid ""
"Virtual network adapter. This is the bridge connected to the network interface of the host. The `mac` parameter is "
"the MAC address set on the virtual network interface. This parameter is optional, if no MAC is provided Xen(TM) "
"will generate a random one."
msgstr ""
"设定虚拟网络适配器。这个网桥将网络适配器连接到宿主机上的网络介面。`mac` 参数是为虚拟网络介面设定的 MAC 地址，为可选"
"项；如果没有提供，Xen(TM) 将会随机生成一个："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1071
msgid ""
"Full path to the disk, file, or ZFS volume of the disk storage for this VM. Options and multiple disk definitions "
"are separated by commas."
msgstr "用作虚拟机磁盘空间的磁盘、文件或 ZFS 卷的完整路径。选项和多个磁盘定义之间用逗号隔开："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1072
msgid ""
"Defines the Boot medium from which the initial operating system is installed. In this example, it is the ISO image "
"downloaded earlier. Consult the Xen(TM) documentation for other kinds of devices and options to set."
msgstr ""
"定义初始化系统安装的启动媒介。在这个例子中为先前下载的 ISO 镜像。关于其他类型的设备和选项设置请参阅 Xen(TM) 文档："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1073
msgid ""
"Options controlling VNC connectivity to the serial console of the DomU. In order, these are: active VNC support, "
"define IP address on which to listen, device node for the serial console, and the input method for precise "
"positioning of the mouse and other input methods. `keymap` defines which keymap to use, and is `english` by default."
msgstr ""
"设定 DomU 控制台连接 VNC。按照顺序为：激活 VNC 支持，定义监听的 IP 地址，串行控制台的设备节点，精确鼠标指针定位和其"
"他输入设备的输入方式。keymap 定义使用何种键位，默认为 `English`。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1075
msgid ""
"After the file has been created with all the necessary options, the DomU is created by passing it to `xl create` as "
"a parameter."
msgstr "设定所有这些必要参数并创建文件之后，将它作为参数输入 `xl create` 来创建 DomU："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1079
#, no-wrap
msgid "# xl create freebsd.cfg\n"
msgstr "# xl create freebsd.cfg\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1088
msgid ""
"Each time the Dom0 is restarted, the configuration file must be passed to `xl create` again to re-create the DomU.  "
"By default, only the Dom0 is created after a reboot, not the individual VMs.  The VMs can continue where they left "
"off as they stored the operating system on the virtual disk.  The virtual machine configuration can change over "
"time (for example, when adding more memory).  The virtual machine configuration files must be properly backed up "
"and kept available to be able to re-create the guest VM when needed."
msgstr ""
"每次 Dom0 重启后，必须将这个配置文件再次传递到 `xl create` 来重新创建 DomU。默认状态下，重启后只会创建 Dom0 而不会创"
"建虚拟机。这些虚拟机可以从在虚拟磁盘中存储的操作系统中恢复之前的状态。你可以修改虚拟机配置文件（比如增加内存）。虚拟"
"机配置文件应该得到妥当备份，并在需要重新创建虚拟机时保证可用。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1091
msgid "The output of `xl list` confirms that the DomU has been created."
msgstr "xl list 的输出结果确认 DomU 已被创建："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1098
#, no-wrap
msgid ""
"# xl list\n"
"Name                                        ID   Mem VCPUs      State   Time(s)\n"
"Domain-0                                     0  8192     4     r-----  1653.4\n"
"freebsd                                      1  1024     1     -b----   663.9\n"
msgstr ""
"# xl list\n"
"Name                                        ID   Mem VCPUs      State   Time(s)\n"
"Domain-0                                     0  8192     4     r-----  1653.4\n"
"freebsd                                      1  1024     1     -b----   663.9\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1105
msgid ""
"To begin the installation of the base operating system, start the VNC client, directing it to the main network "
"address of the host or to the IP address defined on the `vnclisten` line of [.filename]#freebsd.cfg#.  After the "
"operating system has been installed, shut down the DomU and disconnect the VNC viewer.  Edit [.filename]#freebsd."
"cfg#, removing the line with the `cdrom` definition or commenting it out by inserting a `#` character at the "
"beginning of the line.  To load this new configuration, it is necessary to remove the old DomU with `xl destroy`, "
"passing either the name or the id as the parameter.  Afterwards, recreate it using the modified [.filename]*freebsd."
"cfg*."
msgstr ""
"开始安装基本操作系统，启动 VNC 客户端，将其指向主机的主网络地址或 [.filename]#freebsd.cfg# 中 `vnclisten` 一行定义"
"的 IP 地址。操作系统安装完毕后，关闭 DomU 并断开与 VNC 查看器的连接。编辑 [.filename]#freebsd.cfg#，删除带有 "
"`cdrom` 定义的一行，或者在该行的开头插入一个 `#` 字符，将其注释出来。要加载这个新的配置，必须将其名称或 id 作为参"
"数，用 `xl destroy` 删除旧的 DomU。然后用修改过的 [.filename]*freebsd.cfg* 重新创建它："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1110
#, no-wrap
msgid ""
"# xl destroy freebsd\n"
"# xl create freebsd.cfg\n"
msgstr ""
"# xl destroy freebsd\n"
"# xl create freebsd.cfg\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1114
msgid ""
"The machine can then be accessed again using the VNC viewer.  This time, it will boot from the virtual disk where "
"the operating system has been installed and can be used as a virtual machine."
msgstr ""
"之后，这个虚拟机可以通过 VNC 查看器再次访问。这次，它会从安装操作系统的虚拟磁盘中引导，并可以作为虚拟机使用了。"

#. type: Title ===
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1116
#, no-wrap
msgid "Troubleshooting"
msgstr "疑难解答"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1119
msgid ""
"This section contains basic information in order to help troubleshoot issues found when using FreeBSD as a Xen(TM) "
"host or guest."
msgstr "这一节包含一些基础信息，帮助你解决使用 FreeBSD 作为 Xen(TM) 的宿主机或客户机时遇到的问题。"

#. type: Title ====
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1121
#, no-wrap
msgid "Host Boot Troubleshooting"
msgstr "宿主机引导疑难解答"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1125
msgid ""
"Please note that the following troubleshooting tips are intended for Xen(TM) 4.11 or newer.  If you are still using "
"Xen(TM) 4.7 and having issues consider migrating to a newer version of Xen(TM)."
msgstr ""
"请注意，接下来的疑难解答适用于 Xen(TM) 4.11 或更新版本。如果你还在使用 Xen(TM) 4.7 并遇到问题，请考虑迁移到更新版本的 "
"Xen(TM)。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1129
msgid ""
"In order to troubleshoot host boot issues you will likely need a serial cable, or a debug USB cable.  Verbose "
"Xen(TM) boot output can be obtained by adding options to the `xen_cmdline` option found in [.filename]#loader."
"conf#.  A couple of relevant debug options are:"
msgstr ""
"为了排查主机启动问题，你可能需要一根串口线，或一根 USB 调试线。通过在 [.filename]#loader.conf# 中添加 `xen_cmdline` "
"选项，可以获得详细的 Xen(TM) 启动输出。几个相关的调试选项是："

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1131
msgid "`iommu=debug`: can be used to print additional diagnostic information about the iommu."
msgstr "`iommu=debug`:可用于输出关于 IOMMU 的额外诊断信息。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1132
msgid "`dom0=verbose`: can be used to print additional diagnostic information about the dom0 build process."
msgstr "`dom0=verbose`:可用于输出关于 Dom0 构建过程的额外诊断信息。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1133
msgid ""
"`sync_console`: flag to force synchronous console output. Useful for debugging to avoid losing messages due to rate "
"limiting. Never use this option in production environments since it can allow malicious guests to perform DoS "
"attacks against Xen(TM) using the console."
msgstr ""
"`sync_console`:强制同步控制台输出。有助于在调试过程中避免由于更新频率限制导致丢失消息。请不要在生产环境中使用这个选"
"项，因为它可能允许恶意客户机使用控制台对 Xen(TM) 进行 DoS 攻击。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1136
msgid ""
"FreeBSD should also be booted in verbose mode in order to identify any issues.  To activate verbose booting, run "
"this command:"
msgstr "为了识别任何可能存在的问题，FreeBSD 也应该在详细输出模式中启动。要激活详细输出启动，请运行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1140
#, no-wrap
msgid "# echo 'boot_verbose=\"YES\"' >> /boot/loader.conf\n"
msgstr "# echo 'boot_verbose=\"YES\"' >> /boot/loader.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1143
msgid ""
"If none of these options help solving the problem, please send the serial boot log to mailto:freebsd-xen@FreeBSD."
"org[freebsd-xen@FreeBSD.org] and mailto:xen-devel@lists.xenproject.org[xen-devel@lists.xenproject.org] for further "
"analysis."
msgstr ""
"如果上述的选项都没有帮助你解决问题，请将串口启动日志发送到 mailto:freebsd-xen@FreeBSD.org[freebsd-xen@FreeBSD.org] "
"和 mailto:xen-devel@lists.xenproject.org[xen-devel@lists.xenproject.org] 以供进一步分析。"

#. type: Title ====
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1145
#, no-wrap
msgid "Guest Creation Troubleshooting"
msgstr "客户机创建疑难解答"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1148
msgid ""
"Issues can also arise when creating guests, the following attempts to provide some help for those trying to "
"diagnose guest creation issues."
msgstr "在创建客户机时也可能出现问题，下面将尝试为那些试图诊断客户机创建问题的人提供一些帮助。"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1151
msgid ""
"The most common cause of guest creation failures is the `xl` command spitting some error and exiting with a return "
"code different than 0.  If the error provided is not enough to help identify the issue, more verbose output can "
"also be obtained from `xl` by using the `v` option repeatedly."
msgstr ""
"导致客户机创建失败的最常见原因是 `xl` 命令提示一些错误，并以非 0 的返回结果退出。如果提示的错误不足以帮助你识别问"
"题，也可以通过重复使用 `v` 选项来从 `xl` 获得更详细的输出。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1167
#, no-wrap
msgid ""
"# xl -vvv create freebsd.cfg\n"
"Parsing config from freebsd.cfg\n"
"libxl: debug: libxl_create.c:1693:do_domain_create: Domain 0:ao 0x800d750a0: create: how=0x0 callback=0x0 poller=0x800d6f0f0\n"
"libxl: debug: libxl_device.c:397:libxl__device_disk_set_backend: Disk vdev=xvda spec.backend=unknown\n"
"libxl: debug: libxl_device.c:432:libxl__device_disk_set_backend: Disk vdev=xvda, using backend phy\n"
"libxl: debug: libxl_create.c:1018:initiate_domain_create: Domain 1:running bootloader\n"
"libxl: debug: libxl_bootloader.c:328:libxl__bootloader_run: Domain 1:not a PV/PVH domain, skipping bootloader\n"
"libxl: debug: libxl_event.c:689:libxl__ev_xswatch_deregister: watch w=0x800d96b98: deregister unregistered\n"
"domainbuilder: detail: xc_dom_allocate: cmdline=\"\", features=\"\"\n"
"domainbuilder: detail: xc_dom_kernel_file: filename=\"/usr/local/lib/xen/boot/hvmloader\"\n"
"domainbuilder: detail: xc_dom_malloc_filemap    : 326 kB\n"
"libxl: debug: libxl_dom.c:988:libxl__load_hvm_firmware_module: Loading BIOS: /usr/local/share/seabios/bios.bin\n"
"...\n"
msgstr ""
"# xl -vvv create freebsd.cfg\n"
"Parsing config from freebsd.cfg\n"
"libxl: debug: libxl_create.c:1693:do_domain_create: Domain 0:ao 0x800d750a0: create: how=0x0 callback=0x0 poller=0x800d6f0f0\n"
"libxl: debug: libxl_device.c:397:libxl__device_disk_set_backend: Disk vdev=xvda spec.backend=unknown\n"
"libxl: debug: libxl_device.c:432:libxl__device_disk_set_backend: Disk vdev=xvda, using backend phy\n"
"libxl: debug: libxl_create.c:1018:initiate_domain_create: Domain 1:running bootloader\n"
"libxl: debug: libxl_bootloader.c:328:libxl__bootloader_run: Domain 1:not a PV/PVH domain, skipping bootloader\n"
"libxl: debug: libxl_event.c:689:libxl__ev_xswatch_deregister: watch w=0x800d96b98: deregister unregistered\n"
"domainbuilder: detail: xc_dom_allocate: cmdline=\"\", features=\"\"\n"
"domainbuilder: detail: xc_dom_kernel_file: filename=\"/usr/local/lib/xen/boot/hvmloader\"\n"
"domainbuilder: detail: xc_dom_malloc_filemap    : 326 kB\n"
"libxl: debug: libxl_dom.c:988:libxl__load_hvm_firmware_module: Loading BIOS: /usr/local/share/seabios/bios.bin\n"
"...\n"

#. type: Plain text
#: content/zh-cn/books/handbook/virtualization/_index.adoc:1172
msgid ""
"If the verbose output does not help diagnose the issue there are also QEMU and Xen(TM) toolstack logs in [."
"filename]#/var/log/xen#.  Note that the name of the domain is appended to the log name, so if the domain is named "
"`freebsd` you should find a [.filename]#/var/log/xen/xl-freebsd.log# and likely a [.filename]#/var/log/xen/qemu-dm-"
"freebsd.log#.  Both log files can contain useful information for debugging.  If none of this helps solve the issue, "
"please send the description of the issue you are facing and as much information as possible to mailto:freebsd-"
"xen@FreeBSD.org[freebsd-xen@FreeBSD.org] and mailto:xen-devel@lists.xenproject.org[xen-devel@lists.xenproject.org] "
"in order to get help."
msgstr ""
"如果这些详细的输出不能帮助你诊断问题，在 [.filename]#/var/log/xen# 中还有 QEMU 和 Xen(TM) toolstack 日志。请注意，域的"
"名称会被附加到日志名称中，所以如果域名为 `FreeBSD`，你应该找到 [.filename]#/var/log/xen/xl-freebsd.log#，并可能找到 "
"[.filename]#/var/log/xen/qemu-dm-freebsd.log#。这两个日志文件都可能包含用于调试的有用信息。如果这些都不能帮助你解决"
"问题，请将你所面临的问题的描述和尽可能多的信息发送到 mailto:freebsd-xen@FreeBSD.org[freebsd-xen@FreeBSD.org] 和 "
"mailto:xen-devel@lists.xenproject.org[xen-devel@lists.xenproject.org]，以便获得帮助。"
