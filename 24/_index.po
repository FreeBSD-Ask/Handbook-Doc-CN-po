# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2022-03-11 21:51+0800\n"
"PO-Revision-Date: 2022-04-06 21:08+0800\n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Poedit 3.0.1\n"

#. type: YAML Front Matter: description
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1
#, no-wrap
msgid "Information about how to keep a FreeBSD system up-to-date with freebsd-update or Git, how to rebuild and reinstall the entire base system, etc"
msgstr "关于如何使用 freebsd-update 或 Git 来保持一个 FreeBSD 系统的更新，如何重建和重新安装整个基础系统，等等"

#. type: YAML Front Matter: part
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr "第三部分 系统管理"

#. type: YAML Front Matter: title
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1
#, no-wrap
msgid "Chapter 24. Updating and Upgrading FreeBSD"
msgstr "第24章 更新与升级 FreeBSD"

#. type: Title =
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:14
#, no-wrap
msgid "Updating and Upgrading FreeBSD"
msgstr "更新与升级 FreeBSD"

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr "概述"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:59
msgid ""
"FreeBSD is under constant development between releases.  Some people prefer to use the officially released versions, while others prefer to keep in "
"sync with the latest developments.  However, even official releases are often updated with security and other critical fixes.  Regardless of the "
"version used, FreeBSD provides all the necessary tools to keep the system updated, and allows for easy upgrades between versions.  This chapter "
"describes how to track the development system and the basic tools for keeping a FreeBSD system up-to-date."
msgstr ""
"FreeBSD 在发行大版本之间始终是持续开发的。一些人喜欢使用官方发行的版本，另一些喜欢与最新的开发保持同步。然而，即使是官方的发行版本也常常需要安全补丁"
"和重大修正方面的更新。不论你使用了何种版本，FreeBSD 都提供了所有更新系统所需的工具，让你轻松的在不同版本间进行升级。这一章节将帮助你决定是跟踪开发系"
"统还是坚持使用某个发行的版本。同时还列出了一些保持系统更新所需的基本工具。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:61
msgid "After reading this chapter, you will know:"
msgstr "读了本章后，你将知道："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:63
msgid "How to keep a FreeBSD system up-to-date with freebsd-update or Git."
msgstr "如何使用 freebsd-update 或 Git 来维持 FreeBSD 系统为最新版。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:64
msgid "How to compare the state of an installed system against a known pristine copy."
msgstr "如何比对已安装系统与已知原始复本间的状态。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:65
msgid "How to keep the installed documentation up-to-date with Git or documentation ports."
msgstr "如何使用 Git 或者文档 ports 来更新本地的文档。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:66
msgid "The difference between the two development branches: FreeBSD-STABLE and FreeBSD-CURRENT."
msgstr "两个开发分支 FreeBSD-STABLE 和 FreeBSD-CURRENT 的区别。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:67
msgid "How to rebuild and reinstall the entire base system."
msgstr "如何重新编译及重新安装整个基础系统 (Base system)。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:69
msgid "Before reading this chapter, you should:"
msgstr "在读本章这前，你应该了解："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:71
msgid "Properly set up the network connection (crossref:advanced-networking[advanced-networking,Advanced Networking])."
msgstr "正确设置网络连接 (crossref:advanced-networking[advanced-networking,高级网络])。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:72
msgid "Know how to install additional third-party software (crossref:ports[ports,Installing Applications: Packages and Ports])."
msgstr "怎样安装第三方软件(crossref:ports[ports,安装应用程序 Package 和 Port])。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:77
msgid "Throughout this chapter, `git` is used to obtain and update FreeBSD sources.  Optionally, the package:devel/git[] port or package may be used."
msgstr "在这一章中，将使用 'git' 来获取和更新 FreeBSD 的源代码。也可以选择使用 package:devel/git[] port 或 package 。"

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:80
#, no-wrap
msgid "FreeBSD Update"
msgstr "FreeBSD 更新"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:84
msgid ""
"Applying security patches in a timely manner and upgrading to a newer release of an operating system are important aspects of ongoing system "
"administration.  FreeBSD includes a utility called `freebsd-update` which can be used to perform both these tasks."
msgstr "及时应用安全补丁和升级到最新版本的操作系统是维护计算机软件的重要任务。在 FreeBSD 引入了 'freebsd-update' 工具之后这便不再是问题了。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:88
msgid ""
"This utility supports binary security and errata updates to FreeBSD, without the need to manually compile and install the patch or a new kernel.  "
"Binary updates are available for all architectures and releases currently supported by the security team.  The list of supported releases and their "
"estimated end-of-life dates are listed at https://www.FreeBSD.org/security/[https://www.FreeBSD.org/security/]."
msgstr ""
"支持 FreeBSD 的二进制安全和勘误更新，而不需要手动编译和安装补丁或新内核。二进制更新适用于目前安全团队所支持的所有架构和版本。支持的版本列表和它们的"
"预计终结日期列在 https://www.FreeBSD.org/security/[https://www.FreeBSD.org/security/]。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:92
msgid ""
"This utility also supports operating system upgrades to minor point releases as well as upgrades to another release branch.  Before upgrading to a "
"new release, review its release announcement as it contains important information pertinent to the release.  Release announcements are available "
"from https://www.FreeBSD.org/releases/[https://www.FreeBSD.org/releases/]."
msgstr ""
"这个工具可以把二进制的安全和勘误更新直接应用于 FreeBSD 的基本系统，而不需要重新编译和安装修补或新内核。目前由安全性团队提供支持的二进制更新可用于所"
"有的架构和发行版。支持的版本列表和它们的预计结束日期列在 https://www.FreeBSD.org/releases/[https://www.FreeBSD.org/releases/] 。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:96
msgid "If a `crontab` utilizing the features of man:freebsd-update[8] exists, it must be disabled before upgrading the operating system."
msgstr "如果有使用 `crontab` 来执行 man:freebsd-update[8]，则必须在升级操作系统前先关闭它。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:99
msgid ""
"This section describes the configuration file used by `freebsd-update`, demonstrates how to apply a security patch and how to upgrade to a minor or "
"major operating system release, and discusses some of the considerations when upgrading the operating system."
msgstr ""
"本节描述了 `freebsd-update` 使用的配置文件，演示了如何应用安全补丁以及如何升级到一个次要或主要的操作系统版本，并讨论了升级操作系统时的一些注意事项。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:101
#, no-wrap
msgid "The Configuration File"
msgstr "配置文件"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:106
msgid ""
"The default configuration file for `freebsd-update` works as-is.  Some users may wish to tweak the default configuration in [.filename]#/etc/"
"freebsd-update.conf#, allowing better control of the process.  The comments in this file explain the available options, but the following may "
"require a bit more explanation:"
msgstr ""
"使用 `freebsd-update` 的默认配置文件就能正常更新，有些用户可能希望通过调整配置文件 [.filename]#/etc/freebsd-update.conf# 中的默认配置来更好地控制升"
"级的过程。可用的参数在文档中介绍的很详细，但下面的这些可能需要进一步的解释："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:111
#, no-wrap
msgid ""
"# Components of the base system which should be kept updated.\n"
"Components world kernel\n"
msgstr ""
"# Components of the base system which should be kept updated.\n"
"Components world kernel\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:118
msgid ""
"This parameter controls which parts of FreeBSD will be kept up-to-date.  The default is to update the entire base system and the kernel.  "
"Individual components can instead be specified, such as `src/base` or `src/sys`.  However, the best option is to leave this at the default as "
"changing it to include specific items requires every needed item to be listed.  Over time, this could have disastrous consequences as source code "
"and binaries may become out of sync."
msgstr ""
"这个参数是控制 FreeBSD 的哪一部分将被保持更新。默认的是更新整个基础系统和内核。也可以指定个别组件，例如 `src/base` 或 `src/sys` 。然而最好的选择是把"
"这个选项保留为默认值，因为如果要修改它去包含一些指定的选项，就需要用户列出每一个想要更新的项目。这可能会引起可怕的后果，因为部分的源代码和二进制程序"
"得不到同步。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:124
#, no-wrap
msgid ""
"# Paths which start with anything matching an entry in an IgnorePaths\n"
"# statement will be ignored.\n"
"IgnorePaths /boot/kernel/linker.hints\n"
msgstr ""
"# Paths which start with anything matching an entry in an IgnorePaths\n"
"# statement will be ignored.\n"
"IgnorePaths /boot/kernel/linker.hints\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:128
msgid ""
"To leave specified directories, such as [.filename]#/bin# or [.filename]#/sbin#, untouched during the update process, add their paths to this "
"statement.  This option may be used to prevent `freebsd-update` from overwriting local modifications."
msgstr ""
"要想在更新过程中不改动指定的目录，例如 [.filename]#/bin# 或 [.filename]#/sbin# ，可以在该语句中添加它们的路径。这个选项可以用来防止 "
"`freebsd-update` 覆盖本地的修改。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:135
#, no-wrap
msgid ""
"# Paths which start with anything matching an entry in an UpdateIfUnmodified\n"
"# statement will only be updated if the contents of the file have not been\n"
"# modified by the user (unless changes are merged; see below).\n"
"UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile\n"
msgstr ""
"# Paths which start with anything matching an entry in an UpdateIfUnmodified\n"
"# statement will only be updated if the contents of the file have not been\n"
"# modified by the user (unless changes are merged; see below).\n"
"UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:140
msgid ""
"This option will only update unmodified configuration files in the specified directories.  Any changes made by the user will prevent the automatic "
"updating of these files.  There is another option, `KeepModifiedMetadata`, which will instruct `freebsd-update` to save the changes during the "
"merge."
msgstr ""
"这个选项将只更新指定目录中未修改的配置文件。用户所做的任何修改都会阻止这些文件的自动更新。还有一个选项，`KeepModifiedMetadata` ，"
"它将指示 `freebsd-update` 在合并过程中保存更改。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:146
#, no-wrap
msgid ""
"# When upgrading to a new FreeBSD release, files which match MergeChanges\n"
"# will have any local changes merged into the version from the new release.\n"
"MergeChanges /etc/ /var/named/etc/ /boot/device.hints\n"
msgstr ""
"# When upgrading to a new FreeBSD release, files which match MergeChanges\n"
"# will have any local changes merged into the version from the new release.\n"
"MergeChanges /etc/ /var/named/etc/ /boot/device.hints\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:153
msgid ""
"List of directories with configuration files that `freebsd-update` should attempt to merge.  The file merge process is a series of man:diff[1] "
"patches similar to man:mergemaster[8], but with fewer options.  Merges are either accepted, open an editor, or cause `freebsd-update` to abort.  "
"When in doubt, backup [.filename]#/etc# and just accept the merges.  See man:mergemaster[8] for more information about `mergemaster`."
msgstr ""
"带有配置文件的目录列表，`freebsd-update` 应该尝试合并这些文件。文件合并过程是一系列类似于 man:mergemaster[8] 的 man:diff[1] 补丁，但选项较少。合并后"
"要么接受、打开一个编辑器，要么导致 freebsd-update 中止。如果有疑问，可以备份 [.filename]#/etc# 并接受合并。关于 `mergemaster` 的更多信息，"
"参见 man:mergemaster[8] 。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:159
#, no-wrap
msgid ""
"# Directory in which to store downloaded updates and temporary\n"
"# files used by FreeBSD Update.\n"
"# WorkDir /var/db/freebsd-update\n"
msgstr ""
"# Directory in which to store downloaded updates and temporary\n"
"# files used by FreeBSD Update.\n"
"# WorkDir /var/db/freebsd-update\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:163
msgid ""
"This directory is where all patches and temporary files are placed.  In cases where the user is doing a version upgrade, this location should have "
"at least a gigabyte of disk space available."
msgstr "这个目录是放置所有补丁和临时文件的。用户做一个版本升级的话，请确认此处至少有 1 GB 的可用磁盘空间。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:171
#, no-wrap
msgid ""
"# When upgrading between releases, should the list of Components be\n"
"# read strictly (StrictComponents yes) or merely as a list of components\n"
"# which *might* be installed of which FreeBSD Update should figure out\n"
"# which actually are installed and upgrade those (StrictComponents no)?\n"
"# StrictComponents no\n"
msgstr ""
"# When upgrading between releases, should the list of Components be\n"
"# read strictly (StrictComponents yes) or merely as a list of components\n"
"# which *might* be installed of which FreeBSD Update should figure out\n"
"# which actually are installed and upgrade those (StrictComponents no)?\n"
"# StrictComponents no\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:175
msgid ""
"When this option is set to `yes`, `freebsd-update` will assume that the `Components` list is complete and will not attempt to make changes outside "
"of the list.  Effectively, `freebsd-update` will attempt to update every file which belongs to the `Components` list."
msgstr ""
"当设置成 `yes` 时，`freebsd-update` 将假设这个 `Components` 列表时完整的，并且对此列表以外的项目不会修改。实际上就是 `freebsd-update` 会尝试更新 "
"`Componets` 列表里的每一个文件。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:177
#, no-wrap
msgid "Applying Security Patches"
msgstr "安全补丁"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:181
msgid ""
"The process of applying FreeBSD security patches has been simplified, allowing an administrator to keep a system fully patched using `freebsd-"
"update`.  More information about FreeBSD security advisories can be found in crossref:security[security-advisories,\"FreeBSD Security Advisories\"]."
msgstr ""
"应用 FreeBSD 安全补丁的过程被简化了，管理员能够使用 `freebsd-update` 来保持系统的完整补丁。更多有关 FreeBSD 安全报告的资讯可以参考 "
"crossref:security[security-advisories,FreeBSD 安全报告] 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:185
msgid ""
"FreeBSD security patches may be downloaded and installed using the following commands.  The first command will determine if any outstanding patches "
"are available, and if so, will list the files that will be modifed if the patches are applied.  The second command will apply the patches."
msgstr ""
"可以通过下列命令来下载和安装 FreeBSD 的安全补丁。第一条命令将确定是否有任何未完成的补丁，如果有的话，将列出在安装补丁时将被修改的文件。第二条命令将"
"安装这些补丁。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:190
#, no-wrap
msgid ""
"# freebsd-update fetch\n"
"# freebsd-update install\n"
msgstr ""
"# freebsd-update fetch\n"
"# freebsd-update install\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:194
msgid ""
"If the update applies any kernel patches, the system will need a reboot in order to boot into the patched kernel.  If the patch was applied to any "
"running binaries, the affected applications should be restarted so that the patched version of the binary is used."
msgstr ""
"如果更新安装了任何内核补丁，系统都将需要重启，以便启动到打了补丁的内核。如果该补丁安装于任何正在运行的二进制文件，受影响的应用程序应重新启动，以便使"
"用二进制文件的补丁版本。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:199
msgid ""
"Usually, the user needs to be prepared to reboot the system.  To know if a reboot is required by a kernel update, execute the commands `freebsd-"
"version -k` and `uname -r` and if it differs a reboot is required."
msgstr "通常情况下，用户需要准备好重启系统。要知道内核更新是否需要重启，可以执行 `freebsd-version -k` 和 `uname -r` 命令，如果不同，则需要重启。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:202
msgid "The system can be configured to automatically check for updates once every day by adding this entry to [.filename]#/etc/crontab#:"
msgstr "可以通过在 [.filename]#/etc/crontab# 中添加这个语句，将系统配置为每天自动检查一次更新："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:206
#, no-wrap
msgid "@daily                                  root    freebsd-update cron\n"
msgstr "@daily                                  root    freebsd-update cron\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:210
msgid ""
"If patches exist, they will automatically be downloaded but will not be applied.  The `root` user will be sent an email so that the patches may be "
"reviewed and manually installed with `freebsd-update install`."
msgstr "如果存在补丁，它们将被自动下载，但不会被应用。`root` 用户将被发送一封电子邮件，这样就可以通过 `freebsd-update install` 来查看和手动安装补丁。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:212
msgid "If anything goes wrong, `freebsd-update` has the ability to roll back the last set of changes with the following command:"
msgstr "如果出现了错误，可以使用下面的 `freebsd-update` 命令回退到上一次的修改："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:217
#, no-wrap
msgid ""
"# freebsd-update rollback\n"
"Uninstalling updates... done.\n"
msgstr ""
"# freebsd-update rollback\n"
"Uninstalling updates... done.\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:220
msgid "Again, the system should be restarted if the kernel or any kernel modules were modified and any affected binaries should be restarted."
msgstr "同样，如果内核或任何内核模块被修改，系统应该被重新启动，任何受影响的二进制文件也应该被重新启动。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:225
msgid ""
"Only the [.filename]#GENERIC# kernel can be automatically updated by `freebsd-update`.  If a custom kernel is installed, it will have to be rebuilt "
"and reinstalled after `freebsd-update` finishes installing the updates.  The default kernel name is _GENERIC_.  The man:uname[1] command may be "
"used to verify its installation."
msgstr ""
"只有 [.filename]#GENERIC# 内核可以被 `freebsd-update` 自动更新。如果安装的是自定义内核，那么在 `freebsd-update` 完成安装更新后，必须重新编译并安装。"
"默认的内核名称是 _GENERIC_ 。man:uname[1] 命令可以用来验证它的安装。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:231
msgid ""
"Always keep a copy of the [.filename]#GENERIC# kernel in [.filename]#/boot/GENERIC#.  It will be helpful in diagnosing a variety of problems and in "
"performing version upgrades.  Refer to <<freebsd-update-custom-kernel-9x>> for instructions on how to get a copy of the [.filename]#GENERIC# kernel."
msgstr ""
"在 [.filename]#/boot/GENERIC# 中始终保留一份 [.filename]#GENERIC# 内核的备份。它在诊断各种问题和进行版本升级时都会有帮助。请参阅 FreeBSD 9.X 及更高"
"版本的自定义内核 ，以了解如何获得 [.filename]#GENERIC# 内核的副本。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:236
msgid ""
"Unless the default configuration in [.filename]#/etc/freebsd-update.conf# has been changed, `freebsd-update` will install the updated kernel "
"sources along with the rest of the updates.  Rebuilding and reinstalling a new custom kernel can then be performed in the usual way."
msgstr ""
"除非 [.filename]#/etc/freebsd-update.conf# 中的默认配置已更改，否则 `freebsd-update` 将安装更新的内核源代码以及其余更新。重新编译安装一个新的自定义"
"内核可以按照常规方法进行。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:243
msgid ""
"The updates distributed by `freebsd-update` do not always involve the kernel.  It is not necessary to rebuild a custom kernel if the kernel sources "
"have not been modified by `freebsd-update install`.  However, `freebsd-update` will always update [.filename]#/usr/src/sys/conf/newvers.sh#.  The "
"current patch level, as indicated by the `-p` number reported by `uname -r`, is obtained from this file.  Rebuilding a custom kernel, even if "
"nothing else changed, allows `uname` to accurately report the current patch level of the system.  This is particularly helpful when maintaining "
"multiple systems, as it allows for a quick assessment of the updates installed in each one."
msgstr ""
"通过 `freebsd-update` 发布的更新有时并不会涉及内核。如果在执行 `freebsd-update install` 的过程中内核代码没有进行变动，就没有必要重新编译内核了。不"
"过，由于 `freebsd-update` 每次都会更新 [.filename]#/usr/src/sys/conf/newvers.sh# 文件，而修订版本 ( `uname -r` 报告的 `-p` 数字) 来自这个文件，因"
"此，即使内核没有发生变化，重新编译内核也可以让 `uname` 报告准确的修订版本。在维护许多系统时这样做会比较有帮助，因为这一信息可以迅速反映机器上安装的"
"软件更新情况。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:245
#, no-wrap
msgid "Performing Major and Minor Version Upgrades"
msgstr "重大和次要的更新"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:250
msgid ""
"Upgrades from one minor version of FreeBSD to another, like from FreeBSD 9.0 to FreeBSD 9.1, are called _minor version_ upgrades.  _Major version_ "
"upgrades occur when FreeBSD is upgraded from one major version to another, like from FreeBSD 9.X to FreeBSD 10.X.  Both types of upgrades can be "
"performed by providing `freebsd-update` with a release version target."
msgstr ""
"从 FreeBSD 的一个次要版本升级到另一个版本，比如从 FreeBSD 9.0 升级到 FreeBSD 9.1 ，被称为次要版本（Minor version）升级。当 FreeBSD 从一个主要版本"
"（Major version）升级到另一个主要版本时（重大更新），例如从 FreeBSD 9.X 到 FreeBSD 10.X ，这两种类型的升级都可以通过提供 `freebsd-update` 的发布版本"
"目标来完成。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:255
msgid ""
"If the system is running a custom kernel, make sure that a copy of the [.filename]#GENERIC# kernel exists in [.filename]#/boot/GENERIC# before "
"starting the upgrade.  Refer to <<freebsd-update-custom-kernel-9x>> for instructions on how to get a copy of the [.filename]#GENERIC# kernel."
msgstr ""
"如果系统正在运行一个自定义的内核，在开始升级之前，请确保在 /boot/GENERIC 中有一份 [.filename]#/boot/GENERIC# 内核的备份。请参考 FreeBSD 9.X 及以后版"
"本的自定义内核 ，以了解如何获得 [.filename]#GENERIC# 内核的备份。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:258
msgid "The following command, when run on a FreeBSD 9.0 system, will upgrade it to FreeBSD 9.1:"
msgstr "下面的命令在 FreeBSD 9.0 系统上运行时，会将其升级到 FreeBSD 9.1："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:262
#, no-wrap
msgid "# freebsd-update -r 9.1-RELEASE upgrade\n"
msgstr "# freebsd-update -r 9.1-RELEASE upgrade\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:267
msgid ""
"After the command has been received, `freebsd-update` will evaluate the configuration file and current system in an attempt to gather the "
"information necessary to perform the upgrade.  A screen listing will display which components have and have not been detected.  For example:"
msgstr "在收到命令后，`freebsd-update` 将评估配置文件和当前系统，试图收集必要的信息来执行升级。屏幕上将显示哪些组件已经被检测到，哪些没有。比如说："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:274
#, no-wrap
msgid ""
"Looking up update.FreeBSD.org mirrors... 1 mirrors found.\n"
"Fetching metadata signature for 9.0-RELEASE from update1.FreeBSD.org... done.\n"
"Fetching metadata index... done.\n"
"Inspecting system... done.\n"
msgstr ""
"Looking up update.FreeBSD.org mirrors... 1 mirrors found.\n"
"Fetching metadata signature for 9.0-RELEASE from update1.FreeBSD.org... done.\n"
"Fetching metadata index... done.\n"
"Inspecting system... done.\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:280
#, no-wrap
msgid ""
"The following components of FreeBSD seem to be installed:\n"
"kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games\n"
"src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue\n"
"src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin\n"
"world/base world/info world/lib32 world/manpages\n"
msgstr ""
"The following components of FreeBSD seem to be installed:\n"
"kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games\n"
"src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue\n"
"src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin\n"
"world/base world/info world/lib32 world/manpages\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:284
#, no-wrap
msgid ""
"The following components of FreeBSD do not seem to be installed:\n"
"kernel/generic world/catpages world/dict world/doc world/games\n"
"world/proflibs\n"
msgstr ""
"The following components of FreeBSD do not seem to be installed:\n"
"kernel/generic world/catpages world/dict world/doc world/games\n"
"world/proflibs\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:286
#, no-wrap
msgid "Does this look reasonable (y/n)? y\n"
msgstr "Does this look reasonable (y/n)? y\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:290
msgid ""
"At this point, `freebsd-update` will attempt to download all files required for the upgrade.  In some cases, the user may be prompted with "
"questions regarding what to install or how to proceed."
msgstr "此时，`freebsd-update` 将尝试下载所有升级所需的文件。在某些情况下，用户可能会被提示关于要安装什么或如何继续的问题。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:292
msgid "When using a custom kernel, the above step will produce a warning similar to the following:"
msgstr "若使用自定义内核，上述的步骤将会产生如下的警告："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:299
#, no-wrap
msgid ""
"WARNING: This system is running a \"MYKERNEL\" kernel, which is not a\n"
"kernel configuration distributed as part of FreeBSD 9.0-RELEASE.\n"
"This kernel will not be updated: you MUST update the kernel manually\n"
"before running \"/usr/sbin/freebsd-update install\"\n"
msgstr ""
"WARNING: This system is running a \"MYKERNEL\" kernel, which is not a\n"
"kernel configuration distributed as part of FreeBSD 9.0-RELEASE.\n"
"This kernel will not be updated: you MUST update the kernel manually\n"
"before running \"/usr/sbin/freebsd-update install\"\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:303
msgid ""
"This warning may be safely ignored at this point.  The updated [.filename]#GENERIC# kernel will be used as an intermediate step in the upgrade "
"process."
msgstr "此时可以安全地忽略此警告。更新后的 GENERIC 内核将用作升级过程的中间步骤。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:312
msgid ""
"Once all the patches have been downloaded to the local system, they will be applied.  This process may take a while, depending on the speed and "
"workload of the machine.  Configuration files will then be merged.  The merging process requires some user intervention as a file may be merged or "
"an editor may appear on screen for a manual merge.  The results of every successful merge will be shown to the user as the process continues.  A "
"failed or ignored merge will cause the process to abort.  Users may wish to make a backup of [.filename]#/etc# and manually merge important files, "
"such as [.filename]#master.passwd# or [.filename]#group# at a later time."
msgstr ""
"所有的补丁下载到本地后，会开始安装。这个过程可能需要一些时间，取决于机器的速度和工作量。然后，配置文件将被合并。合并过程需要一些用户干预，因为文件可"
"能会被合并，或者屏幕上会出现一个编辑器进行手动合并。在这个过程中，每次成功的合并结果都会显示给用户。合并失败或被忽略将导致进程中止。用户可能希望对 "
"[.filename]#/etc# 做一个备份，并在以后手动合并重要的文件，如 [.filename]#master.passwd# 或 [.filename]#group# 。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:319
msgid ""
"The system is not being altered yet as all patching and merging is happening in another directory.  Once all patches have been applied "
"successfully, all configuration files have been merged and it seems the process will go smoothly, the changes can be committed to disk by the user "
"using the following command:"
msgstr ""
"所有的补丁和合并都在另一个目录中进行，并不会直接修改。所有的补丁都被成功安装之后，所有的配置文件都被合并，之后，用户就可以用下面的命令将这些更改提交"
"到磁盘上。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:323 content/zh-cn/books/handbook/cutting-edge/_index.adoc:359
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:435
#, no-wrap
msgid "# freebsd-update install\n"
msgstr "# freebsd-update install\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:330
msgid ""
"The kernel and kernel modules will be patched first.  If the system is running with a custom kernel, use man:nextboot[8] to set the kernel for the "
"next boot to the updated [.filename]#/boot/GENERIC#:"
msgstr ""
"内核和内核模块将首先被打上补丁。如果系统运行的是一个自定义的内核，使用 man:nextboot[8] 来设置下一次启动的内核为更新的 [.filename]#/boot/GENERIC# ："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:334
#, no-wrap
msgid "# nextboot -k GENERIC\n"
msgstr "# nextboot -k GENERIC\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:343
msgid ""
"Before rebooting with the [.filename]#GENERIC# kernel, make sure it contains all the drivers required for the system to boot properly and connect "
"to the network, if the machine being updated is accessed remotely.  In particular, if the running custom kernel contains built-in functionality "
"usually provided by kernel modules, make sure to temporarily load these modules into the [.filename]#GENERIC# kernel using the [.filename]#/boot/"
"loader.conf# facility.  It is recommended to disable non-essential services as well as any disk and network mounts until the upgrade process is "
"complete."
msgstr ""
"若机器在远程进行更新，请在使用 [.filename]#GENERIC# 内核重新开机前，请确定该内核含有所有系统所需的驱动程序以正常开机并连线至网络。特别是在运行的自定"
"义内核有使用到由核心模组提供的内建功能，请确保使用 [.filename]#/boot/loader.conf# 工具将这些模块临时加载到 [.filename]#GENERIC# 内核中。建议禁用非必"
"要的服务，以及任何磁盘和网络挂载，直到升级过程完成。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:346
msgid "The machine should now be restarted with the updated kernel:"
msgstr "现在可以用更新后的内核引导系统了："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:350 content/zh-cn/books/handbook/cutting-edge/_index.adoc:1040
#, no-wrap
msgid "# shutdown -r now\n"
msgstr "# shutdown -r now\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:355
msgid ""
"Once the system has come back online, restart `freebsd-update` using the following command.  Since the state of the process has been saved, "
"`freebsd-update` will not start from the beginning, but will instead move on to the next phase and remove all old shared libraries and object files."
msgstr ""
"在系统重新上线后，需要再次运行 `freebsd-update`。升级的状态被保存着，这样 `freebsd-update` 就无需重头开始，但是会删除所有旧的共享库和目标文件。执行"
"如下命令继续这个阶段的升级："

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:364
msgid "Depending upon whether any library version numbers were bumped, there may only be two install phases instead of three."
msgstr "取决与是否有库的版本更新，通常只有 2 个而不是 3 个安装阶段。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:368
msgid ""
"The upgrade is now complete.  If this was a major version upgrade, reinstall all ports and packages as described in <<freebsdupdate-portsrebuild>>."
msgstr "升级程序现在完成了。如果所做的是主要的版本升级，则需跟据主要版号升级后的套件升级说明重新安装所有的 Port 和 Packages 。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:370
#, no-wrap
msgid "Custom Kernels with FreeBSD 9.X and Later"
msgstr "在 FreeBSD 9.X 及之后版本自定义内核"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:375
msgid ""
"Before using `freebsd-update`, ensure that a copy of the [.filename]#GENERIC# kernel exists in [.filename]#/boot/GENERIC#.  If a custom kernel has "
"only been built once, the kernel in [.filename]#/boot/kernel.old# is the `GENERIC` kernel.  Simply rename this directory to [.filename]#/boot/"
"GENERIC#."
msgstr ""
"在使用 `freebsd-update` 前，请确定在 [.filename]#/boot/GENERIC# 已有 [.filename]#GENERIC# 内核的备份。如果只编译过一次自定义内核，"
"那么 [.filename]#/boot/kernel.old# 就是 `GENERIC` 内核，只需要将该目录重新命名为 [.filename]#/boot/GENERIC#。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:379
msgid ""
"If a custom kernel has been built more than once or if it is unknown how many times the custom kernel has been built, obtain a copy of the "
"`GENERIC` kernel that matches the current version of the operating system.  If physical access to the system is available, a copy of the `GENERIC` "
"kernel can be installed from the installation media:"
msgstr ""
"如果编译自定义内核过超过一次，或已经不晓得编译过的次数，则需取得与目前操作系统版本相符的 `GENERIC` 内核版本。若可直接操作实体系统，则可以从安装媒体"
"取得 `GENERIC` 内核备份："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:385
#, no-wrap
msgid ""
"# mount /cdrom\n"
"# cd /cdrom/usr/freebsd-dist\n"
"# tar -C/ -xvf kernel.txz boot/kernel/kernel\n"
msgstr ""
"# mount /cdrom\n"
"# cd /cdrom/usr/freebsd-dist\n"
"# tar -C/ -xvf kernel.txz boot/kernel/kernel\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:388
msgid "Alternately, the `GENERIC` kernel may be rebuilt and installed from source:"
msgstr "或者，可以从源代码重新编译 `GENERIC` 内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:393
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null\n"
msgstr ""
"# cd /usr/src\n"
"# make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:398
msgid ""
"For this kernel to be identified as the `GENERIC` kernel by `freebsd-update`, the [.filename]#GENERIC# configuration file must not have been "
"modified in any way.  It is also suggested that the kernel is built without any other special options."
msgstr ""
"这个内核要被 `freebsd-update` 识别为 `GENERIC` 内核，[.filename]#GENERIC# 配置文件必须不能做任何修改，也建议在编译内核时不要使用其他特殊选项。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:400
msgid "Rebooting into the [.filename]#GENERIC# kernel is not required as `freebsd-update` only needs [.filename]#/boot/GENERIC# to exist."
msgstr "`freebsd-update` 仅需要 [.filename]#/boot/GENERIC# 存在便可，因此不须重新开机进入 [.filename]#/GENERIC#。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:402
#, no-wrap
msgid "Upgrading Packages After a Major Version Upgrade"
msgstr "主要版号升级后的套件升级"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:409
msgid ""
"Generally, installed applications will continue to work without problems after minor version upgrades.  Major versions use different Application "
"Binary Interfaces (ABIs), which will break most third-party applications.  After a major version upgrade, all installed packages and ports need to "
"be upgraded.  Packages can be upgraded using `pkg upgrade`.  To upgrade installed ports, use a utility such as package:ports-mgmt/portmaster[]."
msgstr ""
"一般来说，已安装的应用程序在次要版本升级后仍可正常运行。但主要版本升级会采用不同的应用程序二进制接口(Application Binary Interfaces, ABIs)，会导致大"
"部份第三方应用程序无法正常运行。因此在主要版本升级后，需要升及所有已安装的 Package 和 Port，Package 可以使用 `pkg upgrade` 来升级，而 Port 则需使用 "
"package:ports-mgmt/portmaster[] 工具。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:413
msgid ""
"A forced upgrade of all installed packages will replace the packages with fresh versions from the repository even if the version number has not "
"increased.  This is required because of the ABI version change when upgrading between major versions of FreeBSD.  The forced upgrade can be "
"accomplished by performing:"
msgstr ""
"对所有已安装的软件包进行强制升级时，即使版本号没有增加，也会用软件库中的新版本替换这些软件包。这是因为在 FreeBSD 的主要版本之间进行升级时，ABI 版本"
"会发生变化。强制升级可以通过执行以下操作来完成："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:417
#, no-wrap
msgid "# pkg-static upgrade -f\n"
msgstr "# pkg-static upgrade -f\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:420
msgid "A rebuild of all installed applications can be accomplished with this command:"
msgstr "重新编译所有已安装的应用程序可以执行以下指令来完成："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:424
#, no-wrap
msgid "# portmaster -af\n"
msgstr "# portmaster -af\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:428
msgid ""
"This command will display the configuration screens for each application that has configurable options and wait for the user to interact with those "
"screens.  To prevent this behavior, and use only the default options, include `-G` in the above command."
msgstr ""
"这个命令将显示每个有可配置选项的应用程序的配置在屏幕上，并等待用户进行选择。若想避免这种情况并使用预设的配置选项，可在上述指令加上 `-G` 参数。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:431
msgid ""
"Once the software upgrades are complete, finish the upgrade process with a final call to `freebsd-update` in order to tie up all the loose ends in "
"the upgrade process:"
msgstr "完成软件升级后，需执行一次 `freebsd-update` 来完成最后的升级过程："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:439
msgid ""
"If the [.filename]#GENERIC# kernel was temporarily used, this is the time to build and install a new custom kernel using the instructions in "
"crossref:kernelconfig[kernelconfig,Configuring the FreeBSD Kernel]."
msgstr ""
"如果临时使用了 [.filename]#GENERIC# 内核，这时就需要按照 crossref:kernelconfig[kernelconfig,配置 FreeBSD 内核] 的说明编译并安装一个新的自定义内核。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:442
msgid "Reboot the machine into the new FreeBSD version.  The upgrade process is now complete."
msgstr "重启进入新的 FreeBSD 版本，升级过程便正式完成。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:444
#, no-wrap
msgid "System State Comparison"
msgstr "系统状态对照"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:448
msgid ""
"The state of the installed FreeBSD version against a known good copy can be tested using `freebsd-update IDS`.  This command evaluates the current "
"version of system utilities, libraries, and configuration files and can be used as a built-in Intrusion Detection System (IDS)."
msgstr ""
"已安装的 FreeBSD 版本状态可以使用 `freebsd-update IDS` 与另一个已知良好的备份来做比对测试。这个指令会评估目前版本的系统工具，库和配置文件，并可以作"
"为一个内置的入侵检测系统 (Intrusion Detection System, IDS) 。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:456
msgid ""
"This command is not a replacement for a real IDS such as package:security/snort[].  As `freebsd-update` stores data on disk, the possibility of "
"tampering is evident.  While this possibility may be reduced using `kern.securelevel` and by storing the `freebsd-update` data on a read-only file "
"system when not in use, a better solution would be to compare the system against a secure disk, such as a DVD or securely stored external USB disk "
"device.  An alternative method for providing IDS functionality using a built-in utility is described in crossref:security[security-ids,\"Binary "
"Verification\"]"
msgstr ""
"这个指令并非用来取代真正的 IDS，如 package:security/snort[] 。由于 `freebsd-update` 储存在磁盘上，存在被窜改的可能性，虽然这个可能性会因使用 "
"`kern.securelevel` 以及将 `freebsd-update` 在不使用时以只读储存而降低，但是最好的解决方案是系统能够与安全磁盘 （如 DVD 或外部 USB 设备） 进行比较。替代的"
"方式是使用内置工具的 IDS 功能，在 crossref:security[security-ids,二进制验证] 中有详细说明。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:459
msgid "To begin the comparison, specify the output file to save the results to:"
msgstr "这里开始比较，需指定输出文件用来保存结果："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:463
#, no-wrap
msgid "# freebsd-update IDS >> outfile.ids\n"
msgstr "# freebsd-update IDS >> outfile.ids\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:466
msgid ""
"The system will now be inspected and a lengthy listing of files, along with the SHA256 hash values for both the known value in the release and the "
"current installation, will be sent to the specified output file."
msgstr "现在开始系统会被检查，并生成一份包含了文件和它们的 SHA256 哈希值的清单。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:469
msgid ""
"The entries in the listing are extremely long, but the output format may be easily parsed.  For instance, to obtain a list of all files which "
"differ from those in the release, issue the following command:"
msgstr "这个文件中有非常长的行，但输出的格式很容易分析。举例来说，要获得一份与发行版中不同哈希值的文件列表，可以使用如下的命令："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:477
#, no-wrap
msgid ""
"# cat outfile.ids | awk '{ print $1 }' | more\n"
"/etc/master.passwd\n"
"/etc/motd\n"
"/etc/passwd\n"
"/etc/pf.conf\n"
msgstr ""
"# cat outfile.ids | awk '{ print $1 }' | more\n"
"/etc/master.passwd\n"
"/etc/motd\n"
"/etc/passwd\n"
"/etc/pf.conf\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:484
msgid ""
"This sample output has been truncated as many more files exist.  Some files have natural modifications.  For example, [.filename]#/etc/passwd# will "
"be modified if users have been added to the system.  Kernel modules may differ as `freebsd-update` may have updated them.  To exclude specific "
"files or directories, add them to the `IDSIgnorePaths` option in [.filename]#/etc/freebsd-update.conf#."
msgstr ""
"这份输出是删节缩短后的，其实有更多的文件。其中有些文件并非由人为修改造成，比如 [.filename]#/etc/passwd# 被修改是因为添加了用户进系统。在某些情况下，"
"还有另外的一些文件，诸如内核模块与 `freebsd-update` 的不同是因为它们被更新过了。为了把指定的文件或目录排除在外，把它们加到 "
"[.filename]#/etc/freebsd-update.conf# 的 `IDSIgnorePaths` 选项中即可。"

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:486
#, no-wrap
msgid "Updating the Documentation Set"
msgstr "更新文档集"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:490
msgid ""
"Documentation is an integral part of the FreeBSD operating system.  While an up-to-date version of the FreeBSD documentation is always available on "
"the FreeBSD web site (link:https://docs.FreeBSD.org[Documentation Portal]), it can be handy to have an up-to-date, local copy of the FreeBSD "
"website, handbooks, FAQ, and articles."
msgstr ""
"文档是 FreeBSD 操作系统不可或缺的一部份。虽然 FreeBSD 文档的最新版本总是可以在 FreeBSD 网站 (link:https://docs.FreeBSD.org[Documentation Portal]) 上"
"找到，但如果有一份最新的 FreeBSD 网站、手册、FAQ 和文章的本地备份，也会很方便。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:492
msgid "This section describes how to use either source or the FreeBSD Ports Collection to keep a local copy of the FreeBSD documentation up-to-date."
msgstr "本节将说明如何使用原源代码或 FreeBSD Port 套件集来取得最新版本 FreeBSD 文档本地备份。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:495
msgid ""
"For information on editing and submitting corrections to the documentation, refer to the FreeBSD Documentation Project Primer for New Contributors "
"(extref:{fdp-primer}[FreeBSD Documentation Project Primer for New Contributors])."
msgstr ""
"关于编辑和提交修改文档的信息，请参考 FreeBSD 文档项目新贡献者入门书 "
"( extref:{fdp-primer}[FreeBSD Documentation Project Primer for New Contributors])。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:497
#, no-wrap
msgid "Updating Documentation from Source"
msgstr "从源代码更新文档"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:501
msgid ""
"Rebuilding the FreeBSD documentation from source requires a collection of tools which are not part of the FreeBSD base system.  The required tools "
"can be installed following extref:{fdp-primer}[these steps, overview-quick-start] from the FreeBSD Documentation Project Primer."
msgstr ""
"从原始码重新编译 FreeBSD 文档需要一些不属于 FreeBSD 基础系统的工具。所需的工具可以按照 FreeBSD 文档项目入门的 extref:{fdp-primer}[这些步骤] 来安装。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:503
msgid "Once installed, use `git` to fetch a clean copy of the documentation source:"
msgstr "安装完毕后，使用 `git` 获取一份干净的文档源代码："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:507
#, no-wrap
msgid "# git clone https://git.FreeBSD.org/doc.git /usr/doc\n"
msgstr "# git clone https://git.FreeBSD.org/doc.git /usr/doc\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:511
msgid "The initial download of the documentation sources may take a while.  Let it run until it completes."
msgstr "第一次下载文件源代码需要一些时间，请耐心等候执行完毕。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:513
msgid "Future updates of the documentation sources may be fetched by running:"
msgstr "往后更新文档源代码可执行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:517
#, no-wrap
msgid "# git pull\n"
msgstr "# git pull\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:521
msgid ""
"Once an up-to-date snapshot of the documentation sources has been fetched to [.filename]#/usr/doc#, everything is ready for an update of the "
"installed documentation."
msgstr "下载最新的文档源代码到 [.filename]#/usr/doc# 之后，便完成了要更新已安装文档的准备工作。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:523
msgid "A full update may be performed by typing:"
msgstr "完整更新所有可用的语言可以执行："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:528
#, no-wrap
msgid ""
"# cd /usr/doc\n"
"# make\n"
msgstr ""
"# cd /usr/doc\n"
"# make\n"

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:531
#, no-wrap
msgid "Tracking a Development Branch"
msgstr "追踪开发分支"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:534
msgid "FreeBSD has two development branches: FreeBSD-CURRENT and FreeBSD-STABLE."
msgstr "FreeBSD 有两个开发分支：FreeBSD-CURRENT 及 FreeBSD-STABLE 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:536
msgid ""
"This section provides an explanation of each branch and its intended audience, as well as how to keep a system up-to-date with each respective "
"branch."
msgstr "本节将说明每个分支及其的特定使用者，也会说明如何在各个分支维护系统为最新版本。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:538
#, no-wrap
msgid "Using FreeBSD-CURRENT"
msgstr "使用 FreeBSD-CURRENT"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:542
msgid ""
"FreeBSD-CURRENT is the \"bleeding edge\" of FreeBSD development and FreeBSD-CURRENT users are expected to have a high degree of technical skill.  "
"Less technical users who wish to track a development branch should track FreeBSD-STABLE instead."
msgstr ""
"FreeBSD-CURRENT 是 FreeBSD 开发的“最前线”，FreeBSD-CURRENT 的使用者需具备较强的技术能力。技术能力较弱的使用者应该追踪 FreeBSD-STABLE 开发分支。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:546
msgid ""
"FreeBSD-CURRENT is the very latest source code for FreeBSD and includes works in progress, experimental changes, and transitional mechanisms that "
"might or might not be present in the next official release.  While many FreeBSD developers compile the FreeBSD-CURRENT source code daily, there are "
"short periods of time when the source may not be buildable.  These problems are resolved as quickly as possible, but whether or not FreeBSD-CURRENT "
"brings disaster or new functionality can be a matter of when the source code was synced."
msgstr ""
"FreeBSD-CURRENT 是 FreeBSD 最新的源代码，其中包括正在进行的开发工作、实验性的变更以及不一定会在下一个官方发行版出现的过渡机制。虽然 FreeBSD 开发者每"
"天编译 FreeBSD-CURRENT 源代码，但仍可能有短暂时间源代码是无法编译的。虽然会尽快解决这些问题，但是无论 FreeBSD-CURRENT 带来灾难或是新功能，同步源代码"
"时要考虑这个问题。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:548
msgid "FreeBSD-CURRENT is made available for three primary interest groups:"
msgstr "FreeBSD-CURRENT 适合以下三种人群："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:550
msgid "Members of the FreeBSD community who are actively working on some part of the source tree."
msgstr "致力于开发某一部份原代码树的 FreeBSD 社群成员。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:551
msgid ""
"Members of the FreeBSD community who are active testers. They are willing to spend time solving problems, making topical suggestions on changes and "
"the general direction of FreeBSD, and submitting patches."
msgstr "FreeBSD 社群成员中活跃的测试人员。他们愿意花时间解决问题，对 FreeBSD 的变更及大方向提出专业建议并提交修补。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:552
msgid "Users who wish to keep an eye on things, use the current source for reference purposes, or make the occasional comment or code contribution."
msgstr "随时关注动态的使用者，使用目前原代码做为参考用途，或是偶尔提供意见或贡献原代码。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:556
msgid ""
"FreeBSD-CURRENT should _not_ be considered a fast-track to getting new features before the next release as pre-release features are not yet fully "
"tested and most likely contain bugs.  It is not a quick way of getting bug fixes as any given commit is just as likely to introduce new bugs as to "
"fix existing ones.  FreeBSD-CURRENT is not in any way \"officially supported\"."
msgstr ""
"不应将 FreeBSD-CURRENT 当做下一个发行版前取得新功能的快速途径，因为尚未发行的功能并未被完整测试，很可能有问题。这也不是一个快速取得问题修正的方式，"
"因为任何已知的问题修正有可能产生新的问题。使用 FreeBSD-CURRENT 不在“官方支援”的范围内。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:558
msgid "To track FreeBSD-CURRENT:"
msgstr "若要追踪 FreeBSD-CURRENT："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:560
msgid ""
"Join the {freebsd-current} and the {dev-commits-src-main} lists. This is _essential_ in order to see the comments that people are making about the "
"current state of the system and to receive important bulletins about the current state of FreeBSD-CURRENT."
msgstr ""
"订阅 {freebsd-current} 以及 {dev-commits-src-main} 信息。这是为了要了解目前人们对于系统目前状态的评论，并接收有关 FreeBSD-CURRENT 目前状态的重要公"
"告。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:562
msgid ""
"The {dev-commits-src-main} list records the commit log entry for each change as it is made, along with any pertinent information on possible side "
"effects."
msgstr "{dev-commits-src-main} 会记录每一次修改的提交项目，以及可能产生的副作用的相关资讯。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:565
msgid ""
"To join these lists, go to {mailing-lists}, click on the list to subscribe to, and follow the instructions.  In order to track changes to the whole "
"source tree, not just the changes to FreeBSD-CURRENT, subscribe to the {dev-commits-src-all}."
msgstr ""
"要订阅这些列表，请到 FreeBSD {mailing-lists}，点击要订阅的列表，并按照说明操作。为了追踪整个源代码树的变化，而不仅仅是 FreeBSD-CURRENT 的变化，请订"
"阅 {dev-commits-src-all}。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:566
msgid ""
"Synchronize with the FreeBSD-CURRENT sources. Typically, `git` is used to check out the -CURRENT code from the `main` branch of the FreeBSD Git "
"repository (see crossref:mirrors[git,“Using Git”] for details)."
msgstr "同步 FreeBSD-CURRENT 源代码。使用 `git` 从 FreeBSD Git 仓库的 `main` 分支检出 -CURRENT 代码（详见crossref:mirrors[git,使用 Git]）。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:567
msgid ""
"Due to the size of the repository, some users choose to only synchronize the sections of source that interest them or which they are contributing "
"patches to. However, users that plan to compile the operating system from source must download _all_ of FreeBSD-CURRENT, not just selected portions."
msgstr ""
"考虑到版本库的大小，一些用户选择只同步他们感兴趣的部分或他们正在贡献补丁的部分的源代码。然而，计划从源代码编译操作系统的用户必须下载全部的 FreeBSD-"
"CURRENT，而不是只选择部分。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:570
msgid ""
"Before compiling FreeBSD-CURRENT, read [.filename]#/usr/src/Makefile# very carefully and follow the instructions in <<makeworld>>.  Read the "
"{freebsd-current} and [.filename]#/usr/src/UPDATING# to stay up-to-date on other bootstrapping procedures that sometimes become necessary on the "
"road to the next release."
msgstr ""
"编译 FreeBSD-CURRENT 前，请仔细地阅读 [.filename]#/usr/src/Makefile# 并依照从原代码更新 FreeBSD 的说明操作。阅读 {freebsd-current} 邮件列表和 "
"[.filename]#/usr/src/UPDATING# 来了解其他引导程序的最新情况，这些程序在更新下一个版本的过程中有时是必须的。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:571
msgid ""
"Be active! FreeBSD-CURRENT users are encouraged to submit their suggestions for enhancements or bug fixes. Suggestions with accompanying code are "
"always welcome."
msgstr "活跃起来！我们鼓励 FreeBSD-CURRENT 用户提交他们的改进或错误修正建议。如果你在建议时能附上相关程序代码的话最好不过。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:573
#, no-wrap
msgid "Using FreeBSD-STABLE"
msgstr "使用 FreeBSD-STABLE"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:580
msgid ""
"FreeBSD-STABLE is the development branch from which major releases are made.  Changes go into this branch at a slower pace and with the general "
"assumption that they have first been tested in FreeBSD-CURRENT.  This is _still_ a development branch and, at any given time, the sources for "
"FreeBSD-STABLE may or may not be suitable for general use.  It is simply another engineering development track, not a resource for end-users.  "
"Users who do not have the resources to perform testing should instead run the most recent release of FreeBSD."
msgstr ""
"FreeBSD-STABLE 是开发分支，主要的版本都是从它开始的。这个分支的迭代速度较慢，而且通常认为这些修改已经在 FreeBSD-CURRENT 中进行了测试。但是这仍然是一"
"个开发分支，在任何时间点，FreeBSD-STABLE 中的原代码不能保证能供正常使用，它只是另一个开发分支，并不是供给用户最佳的版本。若没有任何资源可以做测试的"
"用户应改使用最新版本的 FreeBSD 发布版。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:582
msgid ""
"Those interested in tracking or contributing to the FreeBSD development process, especially as it relates to the next release of FreeBSD, should "
"consider following FreeBSD-STABLE."
msgstr "对于那些有兴趣追踪或为 FreeBSD 开发流程提供一些贡献的人，特别是与 FreeBSD 的下一个版本有关的，应该考虑关注 FreeBSD-STABLE 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:587
msgid ""
"While the FreeBSD-STABLE branch should compile and run at all times, this cannot be guaranteed.  Since more people run FreeBSD-STABLE than FreeBSD-"
"CURRENT, it is inevitable that bugs and corner cases will sometimes be found in FreeBSD-STABLE that were not apparent in FreeBSD-CURRENT.  For this "
"reason, one should not blindly track FreeBSD-STABLE.  It is particularly important _not_ to update any production servers to FreeBSD-STABLE without "
"thoroughly testing the code in a development or testing environment."
msgstr ""
"虽然 FreeBSD-STABLE 分支应该已经做过编译并执行过，但这仍然无法保证不会出任何问题。由于使用 FreeBSD-STABLE 的人比 FreeBSD-CURRENT 更多，因此不可避免"
"的，有时仍会在 FreeBSD-STABLE 中发现未在 FreeBSD-CURRENT 中出现的问题与特殊 bug 。基于这个原因，任何人都不应盲目的追踪 FreeBSD-STABLE，特别注意的"
"是，在没有在开发或测试环境中彻底测试代码之前，不要把任何生产服务器更新到 FreeBSD-STABLE 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:589
msgid "To track FreeBSD-STABLE:"
msgstr "若要追踪 FreeBSD-STABLE："

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:591
msgid ""
"Join the {freebsd-stable} in order to stay informed of build dependencies that may appear in FreeBSD-STABLE or any other issues requiring special "
"attention. Developers will also make announcements in this mailing list when they are contemplating some controversial fix or update, giving the "
"users a chance to respond if they have any issues to raise concerning the proposed change."
msgstr ""
"订阅 {freebsd-stable} 的邮件，以便随时了解 FreeBSD-STABLE 可能需要的编译依赖项目或任何需要特别注意的问题，当有一些有争议的修复或更新时，开发人员也会"
"在这个邮件列表中发布公告，如果有用户对提议的更改有任何的问题，可以给他们一个回应的机会。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:595
msgid ""
"Join the relevant git list for the branch being tracked.  For example, users tracking the {betarel-current-major}-STABLE branch should join the "
"{dev-commits-src-branches}.  This list records the commit log entry for each change as it is made, along with any pertinent information on possible "
"side effects."
msgstr ""
"还可以关注被追踪的分支的 Commit 信息。例如，追踪 {betarel-current-major}-STABLE 分支的用户应该关注 {dev-commits-src-branches} 的提交信息。这个列表记"
"录了每个改动的提交日志条目，以及任何可能出现副作用的相关信息。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:598
msgid ""
"To join these lists, go to {mailing-lists}, click on the list to subscribe to, and follow the instructions.  In order to track changes for the "
"whole source tree, subscribe to {dev-commits-src-all}."
msgstr ""
"要关注这些信息，请到 FreeBSD {mailing-lists}，点击要订阅的信息，并按照说明操作。为了跟踪整个源代码树的变化，请订阅 {dev-commits-src-all} 信息 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:599
msgid ""
"To install a new FreeBSD-STABLE system, install the most recent FreeBSD-STABLE release from the crossref:mirrors[mirrors,FreeBSD mirror sites] or "
"use a monthly snapshot built from FreeBSD-STABLE. Refer to link:https://www.FreeBSD.org/snapshots/[www.freebsd.org/snapshots] for more information "
"about snapshots."
msgstr ""
"要安装最新的 FreeBSD-STABLE 系统，可安装在 crossref:mirrors[mirrors,FreeBSD 镜像站] 中最近的 FreeBSD-STABLE 发布版或使用每月编译的快照 (Snapshot)，"
"请参考 link:https://www.FreeBSD.org/snapshots/[www.freebsd.org/snapshots] 取得更多有关快照的资讯。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:602
msgid ""
"To compile or upgrade to an existing FreeBSD system to FreeBSD-STABLE, use `git` to check out the source for the desired branch.  Branch names, "
"such as `stable/9`, are listed at link:https://www.FreeBSD.org/releng/[www.freebsd.org/releng]."
msgstr ""
"要编译或升级已有的 FreeBSD 系统到 FreeBSD-STABLE 可使用 `git` 来拉取要升级的分支源代码，可用分支的名称如：`stable/9` 会列在 "
"link:https://www.FreeBSD.org/releng/[www.freebsd.org/releng] 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:603
msgid ""
"Before compiling or upgrading to FreeBSD-STABLE , read [.filename]#/usr/src/Makefile# carefully and follow the instructions in <<makeworld>>. Read "
"the {freebsd-stable} and [.filename]#/usr/src/UPDATING# to keep up-to-date on other bootstrapping procedures that sometimes become necessary on the "
"road to the next release."
msgstr ""
"编译 FreeBSD-STABLE 前，请仔细地阅读 [.filename]#/usr/src/Makefile# 并依照从原代码更新 FreeBSD 的说明操作。阅读 {freebsd-stable} 邮递列表以及 "
"[.filename]#/usr/src/UPDATING# 来了解升级的相关资讯，有时会含有升级下一个发行版的必要资讯。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:605
#, no-wrap
msgid "The N-number"
msgstr "N-number"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:609
msgid ""
"When tracking down bugs it is important to know which versions of the source code have been used to create the system exhibiting an issue.  FreeBSD "
"provides version information compiled into the kernel.  man:uname[1] retrieves this information, for example:"
msgstr ""
"当追踪 bug 时，知道哪些版本的源代码被用来创建出现问题的系统是很重要的。FreeBSD 提供了编译在内核中的版本信息，例如 man:uname[1] 可以检索到这些信息。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:613
#, no-wrap
msgid ""
"% uname -a\n"
"FreeBSD 14.0-CURRENT #112 main-n247514-031260d64c18: Tue Jun 22 20:43:19 MDT 2021     fred@machine:/usr/home/fred/obj/usr/home/fred/git/head/amd64.amd64/sys/FRED\n"
msgstr ""
"% uname -a\n"
"FreeBSD 14.0-CURRENT #112 main-n247514-031260d64c18: Tue Jun 22 20:43:19 MDT 2021     fred@machine:/usr/home/fred/obj/usr/home/fred/git/head/amd64.amd64/sys/FRED\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:615
msgid "Looking at the 4th field, it is made up of several parts:"
msgstr "来看第 4 个字段，它由这几个部分组成："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:618
#, no-wrap
msgid "main-n247514-031260d64c18\n"
msgstr "main-n247514-031260d64c18\n"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:623
#, no-wrap
msgid ""
"main\t\t<.>\n"
"n247514\t\t<.>\n"
"031260d64c18\t<.>\n"
"\t\t<.>\n"
msgstr ""
"main\t\t<.>\n"
"n247514\t\t<.>\n"
"031260d64c18\t<.>\n"
"\t\t<.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:627
msgid ""
"Git branch name.  Note: comparisons of n-numbers are only valid on branches published by the project (`main`, `stable/XX` and `releng/XX`).  Local "
"branches will have n-numbers that will overlap commits of their parent branch."
msgstr ""
"Git 分支名称。注意：n-numbers 的比较只对项目发布的分支有效（`main`, `stable/XX` 和 `releng/XX`）。本地分支的 n-numbers 会与父分支的提交内容重叠。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:628
msgid "The n-number is a linear count of commits back to the start of the Git repository starting with the Git hash included in the line."
msgstr "n-number 是指从该行包含的Git散列开始，回溯到Git仓库开始的提交的线性计数。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:629
msgid "Git hash of the checked out tree"
msgstr "签出树的 Git 哈希值。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:631
msgid ""
"Sometimes a suffix of `-dirty` is present when the kernel was built in a tree with uncommitted changes.  It is absent in this example because the "
"FRED kernel was built from a pristine checkout."
msgstr "有时，当内核是在一个有未提交修改的树中构建时，会出现后缀 `-dirty` 。在这个例子中没有这个后缀，因为 FRED 的内核是在原始的检查中建立的。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:634
msgid "The `git rev-list` command is used to find the n-number corresponding to a Git hash.  For example:"
msgstr "`git rev-list` 命令用于查找与 Git 哈希值对应的 n-number 。比如说："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:638
#, no-wrap
msgid ""
"% git rev-list --first-parent --count 031260d64c18 <.>\n"
"247514 <.>\n"
msgstr ""
"% git rev-list --first-parent --count 031260d64c18 <.>\n"
"247514 <.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:640
msgid "git hash to translate (the hash from the above example is reused)"
msgstr "要查找的 git 哈希值（上面例子中的哈希值被重复使用）。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:641
msgid "The n-number."
msgstr "N-number。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:647
msgid ""
"Usually this number is not all that important.  However, when bug fixes are committed, this number makes it easy to quickly determine whether the "
"fix is present in the currently running system.  Developers will often refer to the hash of the commit (or provide a URL which has that hash), but "
"not the n-number since the hash is the easily visible identifier for a change while the n-number is not.  Security advisories and errata notices "
"will also note an n-number, which can be directly compared against your system.  When you need to use shallow Git clones, you cannot compare n-"
"numbers reliably as the `git rev-list` command counts all the revisions in the repository which a shallow clone omits."
msgstr ""
"通常情况下，这个数字并不那么重要。然而，当错误修复被提交时，这个数字可以让我们很容易地确定该修复是否存在于当前运行的系统中。开发者通常会提到提交的哈"
"希值（或提供一个有该哈希值的 URL），但不会提到 n-number，因为哈希值是一个变化的可见标识，而 n-number 则不是。安全公告和错误公告也会注明 n-number ，"
"可以直接与你的系统进行比较。当你需要使用浅层 Git 克隆时，你不能可靠地比较 n-number，因为 `git rev-list` 命令会计算仓库中的所有修订，而浅层克隆会省略"
"这些修订。"

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:649
#, no-wrap
msgid "Updating FreeBSD from Source"
msgstr "从源代码更新 FreeBSD"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:655
msgid ""
"Updating FreeBSD by compiling from source offers several advantages over binary updates.  Code can be built with options to take advantage of "
"specific hardware.  Parts of the base system can be built with non-default settings, or left out entirely where they are not needed or desired.  "
"The build process takes longer to update a system than just installing binary updates, but allows complete customization to produce a tailored "
"version of FreeBSD."
msgstr ""
"通过从源代码编译来更新 FreeBSD 与二进制更新相比有几个优点。可以使用选项构建代码，便于利用特定的硬件。基本系统的某些部分可以使用非默认设置构建，或者"
"在不需要它们的地方完全省略。更新系统的编译构建过程比安装二进制更新需要更长的时间，但允许完全定制便于生成定制版本的 FreeBSD。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:657
#, no-wrap
msgid "Quick Start"
msgstr "快速开始"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:661
msgid ""
"This is a quick reference for the typical steps used to update FreeBSD by building from source.  Later sections describe the process in more detail."
msgstr "这是从原始码编译来更新 FreeBSD 的标准步骤快速的参考，稍后的章节会更详细的说明这个程序。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:665
msgid "Update and Build"
msgstr "编译并更新"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:679
#, no-wrap
msgid ""
"# git pull /usr/src  <.>\n"
"check /usr/src/UPDATING  <.>\n"
"# cd /usr/src          <.>\n"
"# make -j4 buildworld  <.>\n"
"# make -j4 kernel      <.>\n"
"# shutdown -r now      <.>\n"
"# etcupdate -p         <.>\n"
"# cd /usr/src          <.>\n"
"# make installworld    <.>\n"
"# etcupdate -B         <.>\n"
"# shutdown -r now      <.>\n"
msgstr ""
"# git pull /usr/src  <.>\n"
"check /usr/src/UPDATING  <.>\n"
"# cd /usr/src          <.>\n"
"# make -j4 buildworld  <.>\n"
"# make -j4 kernel      <.>\n"
"# shutdown -r now      <.>\n"
"# etcupdate -p         <.>\n"
"# cd /usr/src          <.>\n"
"# make installworld    <.>\n"
"# etcupdate -B         <.>\n"
"# shutdown -r now      <.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:682
msgid "Get the latest version of the source. See <<updating-src-obtaining-src>> for more information on obtaining and updating source."
msgstr "获取最新版本的源代码。关于获取和更新源代码的更多信息，请参见更新源代码。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:684
msgid "Check [.filename]#/usr/src/UPDATING# for any manual steps required before or after building from source."
msgstr "检查 /usr/src/UPDATING，了解从源码构建之前或之后需要的任何手动步骤。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:686 content/zh-cn/books/handbook/cutting-edge/_index.adoc:696
msgid "Go to the source directory."
msgstr "转到源码目录。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:688
msgid "Compile the world, everything except the kernel."
msgstr "编译基本系统（World），除了内核（Kernel）以外的一切。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:690
msgid "Compile and install the kernel. This is equivalent to `make buildkernel installkernel`."
msgstr "编译并安装内核。这等同于 `make buildkernel installkernel` 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:692
msgid "Reboot the system to the new kernel."
msgstr "重新启动系统到新的内核。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:694
msgid "Update and merge configuration files in [.filename]#/etc/# required before installworld."
msgstr "更新并合并安装基本系统之前需要的 /etc/ 配置文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:698
msgid "Install the world."
msgstr "安装基本系统。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:700
msgid "Update and merge configuration files in [.filename]#/etc/#."
msgstr "更新并合并 [.filename]#/etc/# 中的配置文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:702
msgid "Restart the system to use the newly-built world and kernel."
msgstr "重新启动系统，使用新建立的基本系统和内核。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:705
#, no-wrap
msgid "Preparing for a Source Update"
msgstr "准备源代码更新"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:708
msgid "Read [.filename]#/usr/src/UPDATING#. Any manual steps that must be performed before or after an update are described in this file."
msgstr "阅读 [.filename]#/usr/src/UPDATING# ，从原代码编译之前与之后任何需要手动操作步骤会在此文件中说明。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:710
#, no-wrap
msgid "Updating the Source"
msgstr "更新源代码"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:715
msgid ""
"FreeBSD source code is located in [.filename]#/usr/src/#.  The preferred method of updating this source is through the Git version control system.  "
"Verify that the source code is under version control:"
msgstr "FreeBSD 的源代码位于 [.filename]#/usr/src/# 。更新这个源代码的首选方法是通过 Git 版本控制系统。验证源代码是否在版本控制之下："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:722
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# git remote --v\n"
"origin  https://git.freebsd.org/src.git (fetch)\n"
"origin  https://git.freebsd.org/src.git (push)\n"
msgstr ""
"# cd /usr/src\n"
"# git remote --v\n"
"origin  https://git.freebsd.org/src.git (fetch)\n"
"origin  https://git.freebsd.org/src.git (push)\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:725
msgid "This indicates that [.filename]#/usr/src/# is under version control and can be updated with man:git[1]:"
msgstr "这表明 [.filename]#/usr/src/# 处于 Git 版本控制之下，可以用 man:git[1] 更新："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:730
#, no-wrap
msgid "# git pull /usr/src\n"
msgstr "# git pull /usr/src\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:734
msgid ""
"The update process can take some time if the directory has not been updated recently.  After it finishes, the source code is up to date and the "
"build process described in the next section can begin."
msgstr "若该目录最近没有更新过，可能会需要一些时间来完成更新动作。在更新完成之后，原代码便为最新版本，并可开始依下一节的说明来编译程序。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:738
#, no-wrap
msgid "*Obtaining the Source:* +\n"
msgstr "*获取源代码:* +\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:741
msgid ""
"If the output says `fatal: not a git repository`, the files there are missing or were installed with a different method.  A new checkout of the "
"source is required."
msgstr "如果输出显示 `fatal: not a git repository`，说明那里的文件缺失或用不同的方法安装。需要重新签出 (checkout) 该源。"

#. type: Block title
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:743
#, no-wrap
msgid "FreeBSD Versions and Repository Branchs"
msgstr "FreeBSD 版本和存储库分支"

#. type: Table
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:765
#, no-wrap
msgid ""
"| uname -r Output\n"
"| Repository Path\n"
"| Description\n"
"\n"
"|`_X.Y_-RELEASE`\n"
"|`releng/_X.Y_`\n"
"|The Release version plus only critical security and bug fix patches. This branch is recommended for most users.\n"
"\n"
"|`_X.Y_-STABLE`\n"
"|`stable/_X_`\n"
"|\n"
"\n"
"The Release version plus all additional development on that branch. _STABLE_ refers to the Applications Binary Interface (ABI) not changing, so software compiled for earlier versions still runs. For example, software compiled to run on FreeBSD 10.1 will still run on FreeBSD 10-STABLE compiled later.\n"
"\n"
"STABLE branches occasionally have bugs or incompatibilities which might affect users, although these are typically fixed quickly.\n"
"\n"
"|`_X_-CURRENT`\n"
"|`main`\n"
"|The latest unreleased development version of FreeBSD. The CURRENT branch can have major bugs or incompatibilities and is recommended only for advanced users.\n"
msgstr ""
"| uname -r 的输出结果\n"
"| 存储库路径\n"
"| 描述\n"
"\n"
"|`_X.Y_-RELEASE`\n"
"|`releng/_X.Y_`\n"
"|发布版本加上关键的安全性与错误修正，较建议大多数使用者使用这个分支。\n"
"\n"
"|`_X.Y_-STABLE`\n"
"|`stable/_X_`\n"
"|\n"
"\n"
"发布版本加上所有在该分支上开发中的程序，STABLE 指的是应用程序二进制接口 (ABI) 没有改变，因此为早期版本编译的软件仍然可以运行。例如，在FreeBSD 10.1 上编译的软件仍然可以在后来编译的 FreeBSD 10-STABLE 上运行。\n"
"\n"
"STABLE 分支偶尔会有可能影响用户的错误或不兼容，但是这些问题通常会很快被修复。\n"
"\n"
"|`_X_-CURRENT`\n"
"|`main`\n"
"|最新的未发布的 FreeBSD 开发版本。CURRENT 分支可能会有重大的错误或不兼容，因此只推荐给高阶用户。\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:768
msgid "Determine which version of FreeBSD is being used with man:uname[1]:"
msgstr "查看 FreeBSD 目前使用的版本可使用 man:uname[1]："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:773
#, no-wrap
msgid ""
"# uname -r\n"
"10.3-RELEASE\n"
msgstr ""
"# uname -r\n"
"10.3-RELEASE\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:776
msgid ""
"Based on <<updating-src-obtaining-src-repopath>>, the source used to update `10.3-RELEASE` has a repository path of `releng/10.3`. That path is "
"used when checking out the source:"
msgstr "根据 FreeBSD 版本和版本库分支，用于更新 `10.3-RELEASE` 的源代码的版本库路径是 `releng/10.3` 。这个路径在签出源代码时被使用："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:781
#, no-wrap
msgid ""
"# mv /usr/src /usr/src.bak <.>\n"
"# git clone --branch releng/10.3 https://git.FreeBSD.org/src.git /usr/src <.>\n"
msgstr ""
"# mv /usr/src /usr/src.bak <.>\n"
"# git clone --branch releng/10.3 https://git.FreeBSD.org/src.git /usr/src <.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:784
msgid "Move the old directory out of the way. If there are no local modifications in this directory, it can be deleted."
msgstr "移除旧的目录。如果这个目录中没有本地的修改，就可以删除它。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:786
msgid ""
"The path from <<updating-src-obtaining-src-repopath>> is added to the repository URL. The third parameter is the destination directory for the "
"source code on the local system."
msgstr "FreeBSD 版本和存储库分支的路径会被添加到版本库的 URL 中。第三个参数是本地系统上源代码的目标目录。"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:789
#, no-wrap
msgid "Building from Source"
msgstr "从源码编译"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:794
msgid ""
"The _world_, or all of the operating system except the kernel, is compiled.  This is done first to provide up-to-date tools to build the kernel.  "
"Then the kernel itself is built:"
msgstr "编译世界（world），或者说编译除了内核（Kernel）以外的所有操作系统。这样做首先是为了提供最新的工具来构建内核。接着便可编译内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:800
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make buildworld\n"
"# make buildkernel\n"
msgstr ""
"# cd /usr/src\n"
"# make buildworld\n"
"# make buildkernel\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:803
msgid "The compiled code is written to [.filename]#/usr/obj#."
msgstr "编译后的代码被写到 [.filename]#/usr/obj# 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:806
msgid "These are the basic steps.  Additional options to control the build are described below."
msgstr "以上这些均为基本的步骤，用来控制编译的其他选项在以下章节会说明。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:808
#, no-wrap
msgid "Performing a Clean Build"
msgstr "执行清除编译"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:813
msgid ""
"Some versions of the FreeBSD build system leave previously-compiled code in the temporary object directory, [.filename]#/usr/obj#.  This can speed "
"up later builds by avoiding recompiling code that has not changed.  To force a clean rebuild of everything, use `cleanworld` before starting a "
"build:"
msgstr ""
"某些版本的 FreeBSD 编译系统会将先前编译的代码留在临时对象目录 [.filename]#/usr/obj# 中。这可以通过避免重新编译没有变化的代码来加快之后的编译速度。若"
"要强制重新编译所有东西可在开始编译前使用 `cleanworld`："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:817
#, no-wrap
msgid "# make cleanworld\n"
msgstr "# make cleanworld\n"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:820
#, no-wrap
msgid "Setting the Number of Jobs"
msgstr "设置工作核心数量"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:827
msgid ""
"Increasing the number of build jobs on multi-core processors can improve build speed.  Determine the number of cores with `sysctl hw.ncpu`.  "
"Processors vary, as do the build systems used with different versions of FreeBSD, so testing is the only sure method to tell how a different number "
"of jobs affects the build speed.  For a starting point, consider values between half and double the number of cores.  The number of jobs is "
"specified with `-j`."
msgstr ""
"在多核处理器上增加编译工作核心的数量可增加编译速度，可使用 `sysctl hw.ncpu` 来查看有多少核心，不同处理器使用不同版本的 FreeBSD 编译系统，所以唯一能"
"了解不同工作数量对编译速度影响的方式便是测试。在一开始可考虑选择一个介于 1/2 到 2 倍核心数之间的数值，工作的数量可使用 `-j` 来指定。"

#. type: Block title
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:829
#, no-wrap
msgid "Increasing the Number of Build Jobs"
msgstr "增加编译工作核心数"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:833
msgid "Building the world and kernel with four jobs:"
msgstr "使用四个工作核心来编译世界（world）与核心："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:837
#, no-wrap
msgid "# make -j4 buildworld buildkernel\n"
msgstr "# make -j4 buildworld buildkernel\n"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:842
#, no-wrap
msgid "Building Only the Kernel"
msgstr "只编译内核"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:847
msgid ""
"A `buildworld` must be completed if the source code has changed.  After that, a `buildkernel` to build a kernel can be run at any time.  To build "
"just the kernel:"
msgstr "如果源代码有变化，必须完成 `buildworld`。之后，可以在任何时候运行 `buildkernel` 来编译内核。要想只编译内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:852
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make buildkernel\n"
msgstr ""
"# cd /usr/src\n"
"# make buildkernel\n"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:855
#, no-wrap
msgid "Building a Custom Kernel"
msgstr "编译自定义内核"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:860
msgid ""
"The standard FreeBSD kernel is based on a _kernel config file_ called [.filename]#GENERIC#.  The [.filename]#GENERIC# kernel includes the most "
"commonly-needed device drivers and options.  Sometimes it is useful or necessary to build a custom kernel, adding or removing device drivers or "
"options to fit a specific need."
msgstr ""
"标准的 FreeBSD 内核是以一个名为 [.filename]#GENERIC# 的内核配置文件 (Kernel config file) 为基础，[.filename]#GENERIC# 内核中内含了所有最常用的设备驱"
"动程序与选项，有时这个文件对编译自定义内核也非常有用，可根据其来加入或移除设备驱动程序或选项来满足特定需求。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:862
msgid ""
"For example, someone developing a small embedded computer with severely limited RAM could remove unneeded device drivers or options to make the "
"kernel slightly smaller."
msgstr "例如，要开发一个 RAM 受到严重限制的小型嵌入式电脑，便可移除不需要的设备驱动程序或选项来缩小内核。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:865
msgid ""
"Kernel config files are located in [.filename]#/usr/src/sys/arch/conf/#, where _arch_ is the output from `uname -m`.  On most computers, that is "
"`amd64`, giving a config file directory of [.filename]#/usr/src/sys/amd64/conf/#."
msgstr ""
"内核配置文件位于 [.filename]#/usr/src/sys/arch/conf/#，其中 _arch_ 是 `uname -m` 的输出。大多数计算机是 `amd64` 的，因此配置文件的目录是 "
"[.filename]#/usr/src/sys/amd64/conf/# 。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:871
msgid ""
"[.filename]#/usr/src# can be deleted or recreated, so it is preferable to keep custom kernel config files in a separate directory, like [."
"filename]#/root#.  Link the kernel config file into the [.filename]#conf# directory.  If that directory is deleted or overwritten, the kernel "
"config can be re-linked into the new one."
msgstr ""
"[.filename]#/usr/src# 可以被删除或重新创建，所以最好把自定义的内核配置文件放在一个单独的目录下，比如 [.filename]#/root# 。将内核配置文件链接到 "
"[.filename]#conf#目录中。如果该目录被删除或覆盖，内核配置文件可以被重新链接到新目录中。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:875
msgid ""
"A custom config file can be created by copying the [.filename]#GENERIC# config file.  In this example, the new custom kernel is for a storage "
"server, so is named [.filename]#STORAGESERVER#:"
msgstr ""
"通过复制 [.filename]#GENERIC# 配置文件可以创建一个自定义的配置文件。在这个例子中，新的自定义内核是用于存储服务器的，"
"所以被命名为 [.filename]#STORAGESERVER# 。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:881
#, no-wrap
msgid ""
"# cp /usr/src/sys/amd64/conf/GENERIC /root/STORAGESERVER\n"
"# cd /usr/src/sys/amd64/conf\n"
"# ln -s /root/STORAGESERVER .\n"
msgstr ""
"# cp /usr/src/sys/amd64/conf/GENERIC /root/STORAGESERVER\n"
"# cd /usr/src/sys/amd64/conf\n"
"# ln -s /root/STORAGESERVER .\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:884
msgid "[.filename]#/root/STORAGESERVER# is then edited, adding or removing devices or options as shown in man:config[5]."
msgstr "接着编译 [.filename]#/root/STORAGESERVER#，要加入或移除装置或选项,参考 man:config[5]。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:886
msgid "The custom kernel is built by setting `KERNCONF` to the kernel config file on the command line:"
msgstr "通过在命令行上将 `KERNCONF` 设置为内核配置文件来建立自定义内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:890
#, no-wrap
msgid "# make buildkernel KERNCONF=STORAGESERVER\n"
msgstr "# make buildkernel KERNCONF=STORAGESERVER\n"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:893
#, no-wrap
msgid "Installing the Compiled Code"
msgstr "安装编译好的程序"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:896
msgid "After the `buildworld` and `buildkernel` steps have been completed, the new kernel and world are installed:"
msgstr "在完成 `buildworld` 与 `buildkernel` 两个步骤之后，便可安装新的核心与世界："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:905
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make installkernel\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"
msgstr ""
"# cd /usr/src\n"
"# make installkernel\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:908
msgid "If a custom kernel was built, `KERNCONF` must also be set to use the new custom kernel:"
msgstr "若使用自定义内核，则同样须设置 `KERNCONF` 来使用新的自定义内核："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:917
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make installkernel KERNCONF=STORAGESERVER\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"
msgstr ""
"# cd /usr/src\n"
"# make installkernel KERNCONF=STORAGESERVER\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"

#. type: Title ===
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:920
#, no-wrap
msgid "Completing the Update"
msgstr "完成更新"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:924
msgid ""
"A few final tasks complete the update.  Any modified configuration files are merged with the new versions, outdated libraries are located and "
"removed, then the system is restarted."
msgstr "最后几项任务完成了更新。任何修改过的配置文件都将与新版本合并，过时的库被定位并删除，然后系统被重新启动。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:926
#, no-wrap
msgid "Merging Configuration Files with man:etcupdate[8]"
msgstr "使用 man:etcupdate[8] 合并配置文件"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:931
msgid ""
"man:etcupdate[8] is a tool for managing updates to files that are not updated as part of an installworld such as files located in [.filename]#/etc/"
"#.  It manages updates by doing a three-way merge of changes made to these files against the local versions.  It is also designed to minimize the "
"amount of user intervention, in contrast to man:mergemaster[8]'s interactive prompts."
msgstr ""
"man:etcupdate[8] 是一个管理更新文件的工具，有些文件没有作为安装世界的一部分被更新，比如位于 [.filename]#/etc/# 的文件。它通过对这些文件的修改与本地"
"版本进行三方合并来管理更新。与 man:mergemaster[8] 的交互式提示相比，它还被设计为尽量减少用户的干预。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:936
msgid ""
"In general, man:etcupdate[8] does not need any specific arguments for its job.  There is however a handy in between command for sanity checking "
"what will be done the first time man:etcupdate[8] is used:"
msgstr "一般来说，man:etcupdate[8] 在运行时不需要任何特殊的参数。然而，有一个很方便的中间命令，用于检查第一次使用 man:etcupdate[8] 时会做什么。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:940
#, no-wrap
msgid "# etcupdate diff\n"
msgstr "# etcupdate diff\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:943
msgid "This command allows the user to audit configuration changes."
msgstr "该命令允许用户检查配置的变化。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:946
msgid "If man:etcupdate[8] is not able to merge a file automatically, the merge conflicts can be resolved with manual interaction by issuing:"
msgstr "如果 man:etcupdate[8] 不能自动合并文件，可以通过发布手动交互来解决合并冲突。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:950
#, no-wrap
msgid "# etcupdate resolve\n"
msgstr "# etcupdate resolve\n"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:956
msgid ""
"When switching from man:mergemaster[8] to man:etcupdate[8], the first run might merge changes incorrectly generating spurious conflicts.  To "
"prevent this, perform the following steps *before* updating sources and building the new world:"
msgstr ""
"当从 man:mergemaster[8] 切换到 man:etcupdate[8] 时，第一次运行可能会不正确地合并变化，产生虚假的冲突。为了防止这种情况，在更新源代码和构建新的世界之"
"前，请执行以下步骤："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:961
#, no-wrap
msgid ""
"# etcupdate extract <.>\n"
"# etcupdate diff <.>\n"
msgstr ""
"# etcupdate extract <.>\n"
"# etcupdate diff <.>\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:964
msgid "Bootstrap the database of stock [.filename]#/etc# files, for more information see man:etcupdate[8]."
msgstr "引导 [.filename]#/etc# 文件的数据库，有关更多信息，请参阅 man:etcupdate[8] 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:966
msgid "Check the diff after bootstrapping. Trim any local changes that are no longer needed to reduce the chance of conflicts in future updates."
msgstr "引导后检查差异。修剪不再需要的任何本地更改，以减少未来更新中发生冲突的可能性。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:969
#, no-wrap
msgid "Merging Configuration Files with man:mergemaster[8]"
msgstr "使用 man:mergemaster[8] 合并配置文件"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:974
msgid ""
"man:mergemaster[8] provides a way to merge changes that have been made to system configuration files with new versions of those files.  man:"
"mergemaster[8] is an alternative to the preferred man:etcupdate[8] With `-Ui`, man:mergemaster[8] automatically updates files that have not been "
"user-modified and installs new files that are not already present:"
msgstr ""
"man:mergemaster[8] 提供了一种将对系统配置文件的修改与这些文件的新版本进行合并的方法。man:mergemaster[8] 是首选的 man:etcupdate[8] 的替代方案。使用 "
"`-Ui`，man:mergemaster[8] 自动更新未被用户修改的文件，并安装尚未存在的新文件。"

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:978
#, no-wrap
msgid "# mergemaster -Ui\n"
msgstr "# mergemaster -Ui\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:982
msgid ""
"If a file must be manually merged, an interactive display allows the user to choose which portions of the files are kept.  See man:mergemaster[8] "
"for more information."
msgstr "如果必须手动合并文件，则交互式显示允许用户选择保留文件的哪些部分。有关详细信息，请参阅 man:mergemaster[8]。"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:984
#, no-wrap
msgid "Checking for Outdated Files and Libraries"
msgstr "检查过时的文件和库"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:988
msgid "Some obsolete files or directories can remain after an update.  These files can be located:"
msgstr "部份废弃的文件或目录可能在更新之后保留，可使用以下指令找出这些文件："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:992
#, no-wrap
msgid "# make check-old\n"
msgstr "# make check-old\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:995
msgid "and deleted:"
msgstr "然后删除："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:999
#, no-wrap
msgid "# make delete-old\n"
msgstr "# make delete-old\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1003
msgid "Some obsolete libraries can also remain.  These can be detected with:"
msgstr "一些过时的库也可能保留下来。这些可以用以下方法检测："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1007
#, no-wrap
msgid "# make check-old-libs\n"
msgstr "# make check-old-libs\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1010
msgid "and deleted with"
msgstr "用下面的命令删除："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1014
#, no-wrap
msgid "# make delete-old-libs\n"
msgstr "# make delete-old-libs\n"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1018
msgid ""
"Programs which were still using those old libraries will stop working when the library has been deleted.  These programs must be rebuilt or "
"replaced after deleting the old libraries."
msgstr "当库被删除时，仍在使用这些旧库的程序将停止工作。删除旧库后必须重建或替换这些程序。"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1024
msgid ""
"When all the old files or directories are known to be safe to delete, pressing kbd:[y] and kbd:[Enter] to delete each file can be avoided by "
"setting `BATCH_DELETE_OLD_FILES` in the command.  For example:"
msgstr "当已知所有旧文件或目录都可以安全删除时，可以通过在命令中设置 `BATCH_DELETE_OLD_FILES` 来避免按 kbd:[y] 和 kbd:[Enter] 删除每个文件。例如："

#. type: delimited block . 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1028
#, no-wrap
msgid "# make BATCH_DELETE_OLD_FILES=yes delete-old-libs\n"
msgstr "# make BATCH_DELETE_OLD_FILES=yes delete-old-libs\n"

#. type: Title ====
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1033
#, no-wrap
msgid "Restarting After the Update"
msgstr "更新后重启"

#. type: delimited block = 4
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1036
msgid "The last step after updating is to restart the computer so all the changes take effect:"
msgstr "更新后的最后一步是重新启动计算机，使所有更改生效："

#. type: Title ==
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1043
#, no-wrap
msgid "Tracking for Multiple Machines"
msgstr "多台机器的升级"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1051
msgid ""
"When multiple machines need to track the same source tree, it is a waste of disk space, network bandwidth, and CPU cycles to have each system "
"download the sources and rebuild everything.  The solution is to have one machine do most of the work, while the rest of the machines mount that "
"work via NFS.  This section outlines a method of doing so.  For more information about using NFS, refer to crossref:network-servers[network-nfs,"
"\"Network File System (NFS)\"]."
msgstr ""
"当有多台主机需要追踪相同的原始码树时，要在每一台主机的系统下载原代码与重新编译所有的东西会耗费不少磁盘空间、网络带宽与 CPU 运算，要解决这个问题的方"
"法是先在一部主机上做完大部份的工作，而其余的主机透过 NFS 挂载使用编译完的成果。本节会介绍如何做这件事。要取得更多有关使用 NFS 的信息请参考 "
"crossref:network-servers[network-nfs,网络文件统 (NFS) ]。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1056
msgid ""
"First, identify a set of machines which will run the same set of binaries, known as a _build set_.  Each machine can have a custom kernel, but will "
"run the same userland binaries.  From that set, choose a machine to be the _build machine_ that the world and kernel are built on.  Ideally, this "
"is a fast machine that has sufficient spare CPU to run `make buildworld` and `make buildkernel`."
msgstr ""
"首先，确定一组机器，它们将运行同一组二进制文件，称为构建集群。每台机器可以有一个自定义的内核，但将运行相同的用户态二进制文件。从这组机器中，选择一台"
"机器作为构建机器，在上面构建世界（world）和内核。理想情况下，这是一台快速的机器，它有足够的 CPU 来运行 `make buildworld` 和 `make buildkernel` 。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1060
msgid ""
"Select a machine to be the _test machine_, which will test software updates before they are put into production.  This _must_ be a machine that can "
"afford to be down for an extended period of time.  It can be the build machine, but need not be."
msgstr "选择一台机器作为测试机，它将在软件更新投入生产之前对其进行测试。这台机器必须能够承受长时间的故障。它可以是构建机，但不绝对。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1063
msgid ""
"All the machines in this build set need to mount [.filename]#/usr/obj# and [.filename]#/usr/src# from the build machine via NFS.  For multiple "
"build sets, [.filename]#/usr/src# should be on one build machine, and NFS mounted on the rest."
msgstr ""
"这个构建集群里的所有机器都需要通过 NFS 从构建机上挂载 [.filename]#/usr/obj# 和 [.filename]#/usr/src# 。对于多个构建集群，[.filename]#/usr/src# 应该"
"在一台构建机上，其余的则通过 NFS 安装。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1069
msgid ""
"Ensure that [.filename]#/etc/make.conf# and [.filename]#/etc/src.conf# on all the machines in the build set agree with the build machine.  That "
"means that the build machine must build all the parts of the base system that any machine in the build set is going to install.  Also, each build "
"machine should have its kernel name set with `KERNCONF` in [.filename]#/etc/make.conf#, and the build machine should list them all in its "
"`KERNCONF`, listing its own kernel first.  The build machine must have the kernel configuration files for each machine in its [.filename]#/usr/src/"
"sys/arch/conf#."
msgstr ""
"确保构建集群中所有机器上的 [.filename]#/etc/make.conf# 和 [.filename]#/etc/src.conf# 与构建机一致。这意味着，构建机器必须构建构建组中任何机器要安装"
"的基础系统的所有部分。另外，每个构建机器都应该在 [.filename]#/etc/make.conf# 中用 `KERNCONF` 设置其内核名称，构建机器应该在其 KERNCONF 中列出所有的"
"内核，将自己的内核列在前面。构建机器必须在其 [.filename]#/usr/src/sys/arch/conf# 中拥有每台机器的内核配置文件。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1076
msgid ""
"On the build machine, build the kernel and world as described in <<makeworld>>, but do not install anything on the build machine.  Instead, install "
"the built kernel on the test machine.  On the test machine, mount [.filename]#/usr/src# and [.filename]#/usr/obj# via NFS.  Then, run `shutdown "
"now` to go to single-user mode in order to install the new kernel and world and run `mergemaster` as usual.  When done, reboot to return to normal "
"multi-user operations."
msgstr ""
"在建置机上，按照从源代码更新 FreeBSD 中的描述，编译内核和世界（world），但不要在建置机上安装任何东西。相反，将构建好的内核安装到测试机上。在测试机"
"上，通过 NFS 挂载 [.filename]#/usr/src# 和 [.filename]#/usr/obj# 。然后，运行 `shutdown now` 进入单用户模式，以便安装新的内核和世界，像往常一样运行 "
"mergemaster 。完成后，重新启动，回到正常的多用户操作。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1079
msgid ""
"After verifying that everything on the test machine is working properly, use the same procedure to install the new software on each of the other "
"machines in the build set."
msgstr "在验证了测试机器上的所有东西都正常工作之后，使用同样的程序在构建集的其他机器上安装新的软件。"

#. type: Plain text
#: content/zh-cn/books/handbook/cutting-edge/_index.adoc:1086
msgid ""
"The same methodology can be used for the ports tree.  The first step is to share [.filename]#/usr/ports# via NFS to all the machines in the build "
"set.  To configure [.filename]#/etc/make.conf# to share distfiles, set `DISTDIR` to a common shared directory that is writable by whichever user "
"`root` is mapped to by the NFS mount.  Each machine should set `WRKDIRPREFIX` to a local build directory, if ports are to be built locally.  "
"Alternately, if the build system is to build and distribute packages to the machines in the build set, set `PACKAGES` on the build system to a "
"directory similar to `DISTDIR`."
msgstr ""
"同样的方法可以用在 ports 树上。第一步是通过 NFS 将 [.filename]#/usr/ports# 共享给构建集中的所有机器。要配置 [.filename]#/etc/make.conf# 以共享 "
"distfiles ，请将 `DISTDIR` 设置为一个共同的共享目录，该目录可由 NFS 挂载映射到的任何用户 `root` 来写入。如果要在本地构建 ports，每台机器都应将 "
"`WRKDIRPREFIX` 设置为本地构建目录。另外，如果联编系统要联编并向联编组中的机器分发软件包，则应将联编系统上的 `PACKAGES` 设置为与 `DISTDIR` 类似的目"
"录。"
